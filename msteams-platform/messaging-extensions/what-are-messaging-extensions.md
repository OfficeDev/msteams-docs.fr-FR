---
title: Extensions de messagerie
author: clearab
description: Vue d’ensemble des extensions de messagerie sur la plateforme Microsoft Teams messagerie
localization_priority: Normal
ms.topic: overview
ms.author: anclear
ms.openlocfilehash: ee59a7ad96572f5a8ebc6afedd2e0e8485169e5a
ms.sourcegitcommit: d90c5dafea09e2893dea8da46ee49516bbaa04b0
ms.translationtype: MT
ms.contentlocale: fr-FR
ms.lasthandoff: 04/28/2021
ms.locfileid: "52075667"
---
# <a name="messaging-extensions"></a><span data-ttu-id="c7f98-103">Extensions de messagerie</span><span class="sxs-lookup"><span data-stu-id="c7f98-103">Messaging extensions</span></span>

<span data-ttu-id="c7f98-104">Les extensions de messagerie permettent aux utilisateurs d’interagir avec votre service web par le biais de boutons et de formulaires dans Microsoft Teams client.</span><span class="sxs-lookup"><span data-stu-id="c7f98-104">Messaging extensions allow the users to interact with your web service through buttons and forms in the Microsoft Teams client.</span></span> <span data-ttu-id="c7f98-105">Ils peuvent rechercher ou initier des actions dans un système externe à partir de la zone de composition du message, de la zone de commande ou directement à partir d’un message.</span><span class="sxs-lookup"><span data-stu-id="c7f98-105">They can search or initiate actions in an external system from the compose message area, the command box, or directly from a message.</span></span> <span data-ttu-id="c7f98-106">Vous pouvez renvoyer les résultats de cette interaction au client Microsoft Teams sous la forme d’une carte richement mise en forme.</span><span class="sxs-lookup"><span data-stu-id="c7f98-106">You can send back the results of that interaction to the Microsoft Teams client in the form of a richly formatted card.</span></span> <span data-ttu-id="c7f98-107">Ce document donne une vue d’ensemble de l’extension de messagerie, des tâches effectuées dans différents scénarios, de l’utilisation de l’extension de messagerie, des commandes d’action et de recherche, et du déploiement de liens.</span><span class="sxs-lookup"><span data-stu-id="c7f98-107">This document gives an overview of the messaging extension, tasks performed under different scenarios, working of messaging extension, action and search commands, and link unfurling.</span></span>

<span data-ttu-id="c7f98-108">L’image suivante affiche les emplacements d’appel des extensions de messagerie :</span><span class="sxs-lookup"><span data-stu-id="c7f98-108">The following image displays the locations from where messaging extensions are invoked:</span></span>

![emplacements d’appel d’extension de messagerie](~/assets/images/messaging-extension-invoke-locations.png)

## <a name="scenarios-where-messaging-extensions-are-used"></a><span data-ttu-id="c7f98-110">Scénarios dans lequel les extensions de messagerie sont utilisées</span><span class="sxs-lookup"><span data-stu-id="c7f98-110">Scenarios where messaging extensions are used</span></span>

| <span data-ttu-id="c7f98-111">Scénario</span><span class="sxs-lookup"><span data-stu-id="c7f98-111">Scenario</span></span> | <span data-ttu-id="c7f98-112">Exemple</span><span class="sxs-lookup"><span data-stu-id="c7f98-112">Example</span></span> |
|:-----------------|:-----------------|
|<span data-ttu-id="c7f98-113">Vous souhaitez qu’un système externe soit en mesure d’action et que le résultat de l’action soit renvoyé à votre conversation.</span><span class="sxs-lookup"><span data-stu-id="c7f98-113">You want some external system to do an action  and the result of the action to be sent back to your conversation.</span></span>|<span data-ttu-id="c7f98-114">Réservez une ressource et autorisez le canal à connaître le créneau horaire réservé.</span><span class="sxs-lookup"><span data-stu-id="c7f98-114">Reserve a resource and allow the channel to know the reserved time slot.</span></span>|
|<span data-ttu-id="c7f98-115">Vous souhaitez trouver quelque chose dans un système externe et partager les résultats avec la conversation.</span><span class="sxs-lookup"><span data-stu-id="c7f98-115">You want to find something in an external system, and share the results with the conversation.</span></span>|<span data-ttu-id="c7f98-116">Recherchez un élément de travail dans Azure DevOps et partagez-le avec le groupe en tant que carte adaptative.</span><span class="sxs-lookup"><span data-stu-id="c7f98-116">Search for a work item in Azure DevOps, and share it with the group as an Adaptive Card.</span></span>|
|<span data-ttu-id="c7f98-117">Vous souhaitez effectuer une tâche complexe impliquant plusieurs étapes ou une grande quantité d’informations dans un système externe et partager les résultats avec une conversation.</span><span class="sxs-lookup"><span data-stu-id="c7f98-117">You want to complete a complex task involving multiple steps or lots of information in an external system, and share the results with a conversation.</span></span>|<span data-ttu-id="c7f98-118">Créez un bogue dans votre système de suivi en fonction d’un message Teams, affectez ce bogue à Bob et envoyez une carte au thread de conversation avec les détails du bogue.</span><span class="sxs-lookup"><span data-stu-id="c7f98-118">Create a bug in your tracking system based on a Teams message, assign that bug to Bob, and send a card to the conversation thread with the bug's details.</span></span>|

## <a name="understand-how-messaging-extensions-work"></a><span data-ttu-id="c7f98-119">Comprendre le fonctionnement des extensions de messagerie</span><span class="sxs-lookup"><span data-stu-id="c7f98-119">Understand how messaging extensions work</span></span>

<span data-ttu-id="c7f98-120">Une extension de messagerie se compose d’un service web que vous hébergez et d’un manifeste d’application, qui définit l’endroit à partir duquel votre service web est appelé dans le client Microsoft Teams client.</span><span class="sxs-lookup"><span data-stu-id="c7f98-120">A messaging extension consists of a web service that you host and an app manifest, which defines where your web service is invoked from in the Microsoft Teams client.</span></span> <span data-ttu-id="c7f98-121">Le service web tire parti du schéma de messagerie et du protocole de communication sécurisée de Bot Framework. Vous devez donc inscrire votre service web en tant que bot dans Bot Framework.</span><span class="sxs-lookup"><span data-stu-id="c7f98-121">The web service takes advantage of the Bot Framework's messaging schema and secure communication protocol, so you must register your web service as a bot in the Bot Framework.</span></span> 

> [!NOTE]
> <span data-ttu-id="c7f98-122">Bien que vous pouvez créer le service web manuellement, utilisez le [SDK Bot Framework](https://github.com/microsoft/botframework) pour utiliser le protocole.</span><span class="sxs-lookup"><span data-stu-id="c7f98-122">Though you can create the web service manually, use [Bot Framework SDK](https://github.com/microsoft/botframework) to work with the protocol.</span></span>

<span data-ttu-id="c7f98-123">Dans le manifeste de l’Microsoft Teams’application, une seule extension de messagerie est définie avec jusqu’à dix commandes différentes.</span><span class="sxs-lookup"><span data-stu-id="c7f98-123">In the app manifest for Microsoft Teams app, a single messaging extension is defined with up to ten different commands.</span></span> <span data-ttu-id="c7f98-124">Chaque commande définit un type, tel qu’une action ou une recherche, ainsi que les emplacements dans le client à partir de l’endroit où elle est invoquée.</span><span class="sxs-lookup"><span data-stu-id="c7f98-124">Each command defines a type, such as action or search and the locations in the client from where it is invoked.</span></span> <span data-ttu-id="c7f98-125">Les emplacements d’appel sont la zone de message de composition, la barre de commandes et le message.</span><span class="sxs-lookup"><span data-stu-id="c7f98-125">The invoke locations are compose message area, command bar, and message.</span></span> <span data-ttu-id="c7f98-126">Lors de l’appel, le service web reçoit un message HTTPS avec une charge utile JSON incluant toutes les informations pertinentes.</span><span class="sxs-lookup"><span data-stu-id="c7f98-126">On invoke, the web service receives an HTTPS message with a JSON payload including all the relevant information.</span></span> <span data-ttu-id="c7f98-127">Répondez avec une charge utile JSON, ce qui permet au client Teams de connaître l’interaction suivante à activer.</span><span class="sxs-lookup"><span data-stu-id="c7f98-127">Respond with a JSON payload, allowing the Teams client to know the next interaction to enable.</span></span> 

## <a name="types-of-messaging-extension-commands"></a><span data-ttu-id="c7f98-128">Types de commandes d’extension de messagerie</span><span class="sxs-lookup"><span data-stu-id="c7f98-128">Types of messaging extension commands</span></span>

<span data-ttu-id="c7f98-129">Il existe deux types de commandes d’extension de messagerie : commande d’action et commande de recherche.</span><span class="sxs-lookup"><span data-stu-id="c7f98-129">There are two types of messaging extension commands, action command and search command.</span></span> <span data-ttu-id="c7f98-130">Le type de commande d’extension de messagerie définit les éléments d’interface utilisateur et les flux d’interaction disponibles pour votre service web.</span><span class="sxs-lookup"><span data-stu-id="c7f98-130">The messaging extension command type defines the UI elements and interaction flows available to your web service.</span></span> <span data-ttu-id="c7f98-131">Certaines interactions, telles que l’authentification et la configuration, sont disponibles pour les deux types de commandes.</span><span class="sxs-lookup"><span data-stu-id="c7f98-131">Some interactions, such as authentication and configuration are available for both types of commands.</span></span>

### <a name="action-commands"></a><span data-ttu-id="c7f98-132">Commandes d'action</span><span class="sxs-lookup"><span data-stu-id="c7f98-132">Action commands</span></span>

<span data-ttu-id="c7f98-133">Les commandes d’action sont utilisées pour présenter aux utilisateurs une fenêtre popup modale pour collecter ou afficher des informations.</span><span class="sxs-lookup"><span data-stu-id="c7f98-133">Action commands are used to present the users with a modal popup to collect or display information.</span></span> <span data-ttu-id="c7f98-134">Lorsque l’utilisateur soumet le formulaire, votre service web répond en insérant un message directement dans la conversation ou en insérant un message dans la zone de composition du message.</span><span class="sxs-lookup"><span data-stu-id="c7f98-134">When the user submits the form, your web service responds by inserting a message into the conversation directly or by inserting a message into the compose message area.</span></span> <span data-ttu-id="c7f98-135">Après cela, l’utilisateur peut envoyer le message.</span><span class="sxs-lookup"><span data-stu-id="c7f98-135">After that the user can submit the message.</span></span> <span data-ttu-id="c7f98-136">Vous pouvez chaîner plusieurs formulaires pour des flux de travail plus complexes.</span><span class="sxs-lookup"><span data-stu-id="c7f98-136">You can chain multiple forms together for more complex workflows.</span></span>

<span data-ttu-id="c7f98-137">Les commandes d’action sont déclenchées à partir de la zone de composition du message, de la zone de commande ou d’un message.</span><span class="sxs-lookup"><span data-stu-id="c7f98-137">The action commands are triggered from the compose message area, the command box, or from a message.</span></span> <span data-ttu-id="c7f98-138">Lorsque la commande est invoquée à partir d’un message, la charge utile JSON initiale envoyée à votre bot inclut l’intégralité du message à partir de qui elle a été invoquée.</span><span class="sxs-lookup"><span data-stu-id="c7f98-138">When the command is invoked from a message, the initial JSON payload sent to your bot includes the entire message it was invoked from.</span></span> <span data-ttu-id="c7f98-139">L’image suivante affiche le module de tâche de commande d’action d’extension de messagerie : module de tâche de commande ![ d’action d’extension de messagerie](~/assets/images/task-module.png)</span><span class="sxs-lookup"><span data-stu-id="c7f98-139">The following image displays the messaging extension action command task module: ![messaging extension action command task module](~/assets/images/task-module.png)</span></span>

### <a name="search-commands"></a><span data-ttu-id="c7f98-140">Commandes de recherche</span><span class="sxs-lookup"><span data-stu-id="c7f98-140">Search commands</span></span>

<span data-ttu-id="c7f98-141">Les commandes de recherche permettent aux utilisateurs de rechercher des informations manuellement dans un système externe via une zone de recherche, ou en csérant un lien vers un domaine surveillé dans la zone de composition du message et en insérant les résultats de la recherche dans un message.</span><span class="sxs-lookup"><span data-stu-id="c7f98-141">Search commands allow the users to search an external system for information either manually through a search box, or by pasting a link to a monitored domain into the compose message area, and insert the results of the search into a message.</span></span> <span data-ttu-id="c7f98-142">Dans le flux de commande de recherche le plus élémentaire, le message d’appel initial inclut la chaîne de recherche envoyée par l’utilisateur.</span><span class="sxs-lookup"><span data-stu-id="c7f98-142">In the most basic search command flow, the initial invoke message includes the search string that the user submitted.</span></span> <span data-ttu-id="c7f98-143">Vous répondez avec une liste de cartes et d’aperçus de carte.</span><span class="sxs-lookup"><span data-stu-id="c7f98-143">You respond with a list of cards and card previews.</span></span> <span data-ttu-id="c7f98-144">Le client Teams affiche une liste d’aperçus de carte pour l’utilisateur.</span><span class="sxs-lookup"><span data-stu-id="c7f98-144">The Teams client renders a list of card previews for the user.</span></span> <span data-ttu-id="c7f98-145">Lorsque l’utilisateur sélectionne une carte dans la liste, la carte pleine taille est insérée dans la zone de composition du message.</span><span class="sxs-lookup"><span data-stu-id="c7f98-145">When the user selects a card from the list, the full-size card is inserted into the compose message area.</span></span>

<span data-ttu-id="c7f98-146">Les cartes sont déclenchées à partir de la zone de composition du message ou de la zone de commande et ne sont pas déclenchées à partir d’un message.</span><span class="sxs-lookup"><span data-stu-id="c7f98-146">The cards are triggered from the compose message area or the command box and not triggered from a message.</span></span> <span data-ttu-id="c7f98-147">Ils ne peuvent pas être déclenchés à partir d’un message.</span><span class="sxs-lookup"><span data-stu-id="c7f98-147">They can not be triggered from a message.</span></span>
<span data-ttu-id="c7f98-148">L’image suivante affiche le module de tâche de recherche d’extension de messagerie :</span><span class="sxs-lookup"><span data-stu-id="c7f98-148">The following image displays the messaging extension search command task module:</span></span>

![Commande de recherche d’extension de messagerie](~/assets/images/search-extension.png)

> [!NOTE]
> <span data-ttu-id="c7f98-150">Pour plus d’informations sur les cartes, voir [les cartes.](../task-modules-and-cards/what-are-cards.md)</span><span class="sxs-lookup"><span data-stu-id="c7f98-150">For more information on cards, see [what are cards](../task-modules-and-cards/what-are-cards.md).</span></span>

## <a name="link-unfurling"></a><span data-ttu-id="c7f98-151">Déploiement de lien</span><span class="sxs-lookup"><span data-stu-id="c7f98-151">Link unfurling</span></span>

<span data-ttu-id="c7f98-152">Un service web est appelé lorsqu’une URL est pastée dans la zone composer un message.</span><span class="sxs-lookup"><span data-stu-id="c7f98-152">A web service is invoked when a URL is pasted in the compose message area.</span></span> <span data-ttu-id="c7f98-153">Cette fonctionnalité est connue sous le nom de déploiement de lien.</span><span class="sxs-lookup"><span data-stu-id="c7f98-153">This functionality is known as link unfurling.</span></span> <span data-ttu-id="c7f98-154">Vous pouvez vous abonner pour recevoir un appel lorsque les URL contenant un domaine particulier sont passées dans la zone de rédaction d’un message.</span><span class="sxs-lookup"><span data-stu-id="c7f98-154">You can subscribe to receive an invoke when URLs containing a particular domain are pasted into the compose message area.</span></span> <span data-ttu-id="c7f98-155">Votre service web peut « déployer » l’URL dans une carte détaillée, fournissant plus d’informations que la carte d’aperçu du site web standard.</span><span class="sxs-lookup"><span data-stu-id="c7f98-155">Your web service can "unfurl" the URL into a detailed card, providing more information than the standard website preview card.</span></span> <span data-ttu-id="c7f98-156">Vous pouvez ajouter des boutons pour permettre aux utilisateurs d’agir immédiatement sans quitter Microsoft Teams client.</span><span class="sxs-lookup"><span data-stu-id="c7f98-156">You can add buttons to allow the users to immediately take action without leaving the Microsoft Teams client.</span></span>
<span data-ttu-id="c7f98-157">Les images suivantes affichent la fonctionnalité de déploiement de lien lorsqu’un lien est passé dans l’extension de messagerie :</span><span class="sxs-lookup"><span data-stu-id="c7f98-157">The following images display link unfurling feature when a link is pasted in messaging extension:</span></span>
 
![lien de déploiement](../assets/images/messaging-extension/unfurl-link.png)

![déploiement de lien](../assets/images/messaging-extension/link-unfurl.gif)

## <a name="code-sample"></a><span data-ttu-id="c7f98-160">Exemple de code</span><span class="sxs-lookup"><span data-stu-id="c7f98-160">Code sample</span></span>

| <span data-ttu-id="c7f98-161">**Exemple de nom**</span><span class="sxs-lookup"><span data-stu-id="c7f98-161">**Sample name**</span></span> | <span data-ttu-id="c7f98-162">**Description**</span><span class="sxs-lookup"><span data-stu-id="c7f98-162">**Description**</span></span> | <span data-ttu-id="c7f98-163">**.NET**</span><span class="sxs-lookup"><span data-stu-id="c7f98-163">**.NET**</span></span> | <span data-ttu-id="c7f98-164">**Node.js**</span><span class="sxs-lookup"><span data-stu-id="c7f98-164">**Node.js**</span></span> | <span data-ttu-id="c7f98-165">**Python**</span><span class="sxs-lookup"><span data-stu-id="c7f98-165">**Python**</span></span> |
|------------|-------------|----------------|------------|
| <span data-ttu-id="c7f98-166">Extension de messagerie avec commandes basées sur l’action</span><span class="sxs-lookup"><span data-stu-id="c7f98-166">Messaging extension with action-based commands</span></span> | <span data-ttu-id="c7f98-167">Cet exemple montre comment créer une extension de messagerie basée sur une action.</span><span class="sxs-lookup"><span data-stu-id="c7f98-167">This sample illustrates how to build an action-based messaging extension.</span></span> | [<span data-ttu-id="c7f98-168">View</span><span class="sxs-lookup"><span data-stu-id="c7f98-168">View</span></span>](https://github.com/microsoft/BotBuilder-Samples/tree/master/samples/csharp_dotnetcore/51.teams-messaging-extensions-action) | [<span data-ttu-id="c7f98-169">View</span><span class="sxs-lookup"><span data-stu-id="c7f98-169">View</span></span>](https://github.com/microsoft/BotBuilder-Samples/tree/master/samples/javascript_nodejs/51.teams-messaging-extensions-action) | [<span data-ttu-id="c7f98-170">View</span><span class="sxs-lookup"><span data-stu-id="c7f98-170">View</span></span>](https://github.com/microsoft/BotBuilder-Samples/tree/main/samples/python/51.teams-messaging-extensions-action) |
| <span data-ttu-id="c7f98-171">Extension de messagerie avec commandes basées sur la recherche</span><span class="sxs-lookup"><span data-stu-id="c7f98-171">Messaging extension with search-based commands</span></span> | <span data-ttu-id="c7f98-172">Cet exemple montre comment créer une extension de messagerie basée sur la recherche.</span><span class="sxs-lookup"><span data-stu-id="c7f98-172">This sample illustrates how to build a Search-based Messaging Extension.</span></span> | [<span data-ttu-id="c7f98-173">View</span><span class="sxs-lookup"><span data-stu-id="c7f98-173">View</span></span>](https://github.com/microsoft/BotBuilder-Samples/tree/master/samples/csharp_dotnetcore/50.teams-messaging-extensions-search) | [<span data-ttu-id="c7f98-174">View</span><span class="sxs-lookup"><span data-stu-id="c7f98-174">View</span></span>](https://github.com/microsoft/BotBuilder-Samples/tree/master/samples/javascript_nodejs/50.teams-messaging-extensions-search) | [<span data-ttu-id="c7f98-175">View</span><span class="sxs-lookup"><span data-stu-id="c7f98-175">View</span></span>](https://github.com/microsoft/BotBuilder-Samples/tree/main/samples/python/50.teams-messaging-extension-search) |

## <a name="see-also"></a><span data-ttu-id="c7f98-176">Voir aussi</span><span class="sxs-lookup"><span data-stu-id="c7f98-176">See also</span></span>

[<span data-ttu-id="c7f98-177">Créer une extension de messagerie</span><span class="sxs-lookup"><span data-stu-id="c7f98-177">Create a messaging extension</span></span>](../build-your-first-app/build-messaging-extension.md)


## <a name="next-step"></a><span data-ttu-id="c7f98-178">Étape suivante</span><span class="sxs-lookup"><span data-stu-id="c7f98-178">Next step</span></span>

> [!div class="nextstepaction"]
> [<span data-ttu-id="c7f98-179">Définir la commande d’extension de messagerie d’action</span><span class="sxs-lookup"><span data-stu-id="c7f98-179">Define action messaging extension command</span></span>](~/messaging-extensions/how-to/action-commands/define-action-command.md)

> [!div class="nextstepaction"]
> [<span data-ttu-id="c7f98-180">Définir la commande d’extension de messagerie de recherche</span><span class="sxs-lookup"><span data-stu-id="c7f98-180">Define search messaging extension command</span></span>](~/messaging-extensions/how-to/search-commands/define-search-command.md)
