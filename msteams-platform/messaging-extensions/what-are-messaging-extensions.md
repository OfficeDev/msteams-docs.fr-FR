---
title: Qu’est-ce que les extensions de messagerie ?
author: clearab
description: Vue d’ensemble des extensions de messagerie sur la plateforme Microsoft teams
ms.topic: overview
ms.author: anclear
ms.openlocfilehash: 01a038d57368826345a55358b1d628447b21f772
ms.sourcegitcommit: 4329a94918263c85d6c65ff401f571556b80307b
ms.translationtype: MT
ms.contentlocale: fr-FR
ms.lasthandoff: 02/01/2020
ms.locfileid: "41673847"
---
# <a name="what-are-messaging-extensions"></a><span data-ttu-id="8426a-103">Qu’est-ce que les extensions de messagerie ?</span><span class="sxs-lookup"><span data-stu-id="8426a-103">What are messaging extensions?</span></span>

<span data-ttu-id="8426a-104">Les extensions de messagerie permettent aux utilisateurs d’interagir avec votre service Web par le biais de boutons et de formulaires dans le client Microsoft Teams.</span><span class="sxs-lookup"><span data-stu-id="8426a-104">Messaging extensions allow users to interact with your web service through buttons and forms in the Microsoft Teams client.</span></span> <span data-ttu-id="8426a-105">Ils peuvent effectuer des recherches ou initier des actions dans un système externe à partir de la zone de message de composition, de la zone de commande ou directement à partir d’un message.</span><span class="sxs-lookup"><span data-stu-id="8426a-105">They can search, or initiate actions, in an external system from the compose message area, the command box, or directly from a message.</span></span> <span data-ttu-id="8426a-106">Vous pouvez ensuite renvoyer les résultats de cette interaction au client Microsoft Teams, généralement sous la forme d’une carte formatée de manière enrichie.</span><span class="sxs-lookup"><span data-stu-id="8426a-106">You can then send the results of that interaction back to the Microsoft Teams client, typically in the form of a richly formatted card.</span></span>

<span data-ttu-id="8426a-107">La capture d’écran ci-dessous montre les emplacements à partir desquels les extensions de messagerie peuvent être appelées.</span><span class="sxs-lookup"><span data-stu-id="8426a-107">The screenshot below shows the locations where messaging extensions can be invoked from.</span></span>

![emplacements d’appel d’extension de messagerie](~/assets/images/messaging-extension-invoke-locations.png)

## <a name="what-kinds-of-tasks-are-they-good-for"></a><span data-ttu-id="8426a-109">Quels types de tâches sont-elles utiles ?</span><span class="sxs-lookup"><span data-stu-id="8426a-109">What kinds of tasks are they good for?</span></span>

<span data-ttu-id="8426a-110">**Scénario :** J’ai besoin d’un système externe pour effectuer une opération et je souhaite que le résultat de l’action soit renvoyé à ma conversation. </span><span class="sxs-lookup"><span data-stu-id="8426a-110">**Scenario:** I need some external system to do something and I want the result of the action to be sent back to my conversation.</span></span>\
<span data-ttu-id="8426a-111">**Exemple :** Réservez une ressource et indiquez au canal la date/l’heure à laquelle vous l’avez réservée.</span><span class="sxs-lookup"><span data-stu-id="8426a-111">**Example:** Reserve a resource and let the channel know what day/time you reserved it for.</span></span>

<span data-ttu-id="8426a-112">**Scénario :** J’ai besoin de trouver des éléments dans un système externe et je souhaite partager les résultats avec ma conversation. </span><span class="sxs-lookup"><span data-stu-id="8426a-112">**Scenario:** I need to find something in an external system, and I want to share the results with my conversation.</span></span>\
<span data-ttu-id="8426a-113">**Exemple :**  Recherchez un élément de travail dans Azure DevOps et partagez-le avec le groupe sous forme de carte adaptative.</span><span class="sxs-lookup"><span data-stu-id="8426a-113">**Example:**  Search for a work item in Azure DevOps, and share it with the group as an adaptive card.</span></span>

<span data-ttu-id="8426a-114">**Scénario :** J’ai besoin d’effectuer une tâche complexe impliquant plusieurs étapes (ou un grand nombre d’informations) dans un système externe, et les résultats doivent être partagés avec une conversation. </span><span class="sxs-lookup"><span data-stu-id="8426a-114">**Scenario:** I need to complete a complex task involving multiple steps (or lots of information) in an external system, and the results should be shared with a conversation.</span></span>\
<span data-ttu-id="8426a-115">**Exemple :** Créez un bogue dans votre système de suivi en fonction d’un message Teams, affectez ce bogue à Bob, puis envoyez une carte au thread de conversation avec les détails du bogue.</span><span class="sxs-lookup"><span data-stu-id="8426a-115">**Example:** Create a bug in your tracking system based on a Teams message, assign that bug to Bob, then send a card to the conversation thread with the bug's details.</span></span>

## <a name="how-do-messaging-extensions-work"></a><span data-ttu-id="8426a-116">Comment fonctionnent les extensions de messagerie ?</span><span class="sxs-lookup"><span data-stu-id="8426a-116">How do messaging extensions work?</span></span>

<span data-ttu-id="8426a-117">Une extension de messagerie se compose d’un service Web que vous hébergez et de votre manifeste d’application qui définit l’emplacement à partir duquel votre service Web peut être appelé dans le client Microsoft Teams.</span><span class="sxs-lookup"><span data-stu-id="8426a-117">A messaging extension consists of a web service you host and your app manifest which defines where your web service can be invoked from in the Microsoft Teams client.</span></span> <span data-ttu-id="8426a-118">Elles tirent parti du schéma de messagerie de l’infrastructure de moteur et du protocole de communication sécurisé, vous devez donc également enregistrer votre service Web en tant que bot dans l’infrastructure de robot.</span><span class="sxs-lookup"><span data-stu-id="8426a-118">They take advantage of the Bot Framework's messaging schema and secure communication protocol, so you'll also need to register your web service as a bot in the Bot Framework.</span></span> <span data-ttu-id="8426a-119">Bien que vous puissiez créer entièrement votre service Web manuellement, nous vous recommandons de tirer parti du [Kit de développement logiciel (SDK)](https://github.com/microsoft/botframework) de l’infrastructure de robots pour utiliser plus facilement le protocole.</span><span class="sxs-lookup"><span data-stu-id="8426a-119">Although you can create your web service completely by hand, we recommend you take advantage of the [Bot Framework SDK](https://github.com/microsoft/botframework) to make working with the protocol simpler.</span></span>

<span data-ttu-id="8426a-120">Dans le manifeste de l’application pour votre application Microsoft Teams, vous allez définir une extension de messagerie unique avec jusqu’à dix commandes différentes.</span><span class="sxs-lookup"><span data-stu-id="8426a-120">In the app manifest for your Microsoft Teams app you'll define a single messaging extension with up to ten different commands.</span></span> <span data-ttu-id="8426a-121">Chaque commande définit un type (action ou recherche), ainsi que les emplacements dans le client à partir duquel elle peut être appelée (zone de message, barre de commandes et/ou message de composition).</span><span class="sxs-lookup"><span data-stu-id="8426a-121">Each command defines a type (action or search), and the locations in the client it can be invoked from (compose message area, command bar, and/or message).</span></span> <span data-ttu-id="8426a-122">Une fois l’appel effectué, votre service Web reçoit un message HTTPs avec une charge utile JSON, y compris toutes les informations pertinentes.</span><span class="sxs-lookup"><span data-stu-id="8426a-122">Once invoked, your web service will receive an HTTPS message with a JSON payload including all the relevant information.</span></span> <span data-ttu-id="8426a-123">Vous allez répondre avec une charge utile JSON, ce qui permet au client teams de savoir quelle interaction activer ensuite.</span><span class="sxs-lookup"><span data-stu-id="8426a-123">You'll respond with a JSON payload, letting the Teams client know what interaction to enable next.</span></span>

## <a name="types-of-messaging-extension-commands"></a><span data-ttu-id="8426a-124">Types de commandes d’extension de messagerie</span><span class="sxs-lookup"><span data-stu-id="8426a-124">Types of messaging extension commands</span></span>

<span data-ttu-id="8426a-125">Le type de commande d’extension de messagerie définit les éléments d’interface utilisateur et les flux d’interaction disponibles pour votre service Web.</span><span class="sxs-lookup"><span data-stu-id="8426a-125">The type of messaging extension command defines the UI elements and interaction flows available to your web service.</span></span> <span data-ttu-id="8426a-126">Certaines interactions, telles que l’authentification et la configuration, sont disponibles pour les deux types de commandes.</span><span class="sxs-lookup"><span data-stu-id="8426a-126">Some interactions, like authentication and configuration, are available for both types of commands.</span></span>

### <a name="action-commands"></a><span data-ttu-id="8426a-127">Commandes d’action</span><span class="sxs-lookup"><span data-stu-id="8426a-127">Action commands</span></span>

<span data-ttu-id="8426a-128">Les commandes d’action vous permettent de présenter à vos utilisateurs une fenêtre contextuelle modale pour collecter ou afficher des informations.</span><span class="sxs-lookup"><span data-stu-id="8426a-128">Action commands allow you present your users with a modal popup to collect or display information.</span></span> <span data-ttu-id="8426a-129">Lors de l’envoi du formulaire, votre service Web peut répondre en insérant un message directement dans la conversation ou en insérant un message dans la zone de message de composition et en permettant à l’utilisateur d’envoyer le message.</span><span class="sxs-lookup"><span data-stu-id="8426a-129">When they submit the form, your web service can respond by inserting a message into the conversation directly, or by inserting a message into the compose message area and allowing the user to submit the message.</span></span> <span data-ttu-id="8426a-130">Vous pouvez même regrouper plusieurs formulaires pour des flux de travail plus complexes.</span><span class="sxs-lookup"><span data-stu-id="8426a-130">You can even chain multiple forms together for more complex workflows.</span></span>

<span data-ttu-id="8426a-131">Elles peuvent être déclenchées à partir de la zone de message de composition, de la zone de commande ou d’un message.</span><span class="sxs-lookup"><span data-stu-id="8426a-131">They can be triggered from the compose message area, the command box, or from a message.</span></span> <span data-ttu-id="8426a-132">Lorsqu’elle est appelée à partir d’un message, la charge utile JSON initiale envoyée à votre bot inclut l’intégralité du message à partir duquel elle a été appelée.</span><span class="sxs-lookup"><span data-stu-id="8426a-132">When invoked from a message, the initial JSON payload sent to your bot will include the entire message it was invoked from.</span></span>

![module de tâche de commande d’action d’extension de messagerie](~/assets/images/task-module.png)

### <a name="search-commands"></a><span data-ttu-id="8426a-134">Commandes de recherche</span><span class="sxs-lookup"><span data-stu-id="8426a-134">Search commands</span></span>

<span data-ttu-id="8426a-135">Les commandes de recherche permettent aux utilisateurs de rechercher des informations sur un système externe (soit manuellement par le biais d’une zone de recherche, soit en collant un lien vers un domaine surveillé dans la zone de message composer), puis en insérant les résultats de la recherche dans un message.</span><span class="sxs-lookup"><span data-stu-id="8426a-135">Search commands allow your users to search an external system for information (either manually through a search box, or by pasting a link to a monitored domain into the compose message area), then insert the results of the search into a message.</span></span> <span data-ttu-id="8426a-136">Dans le flux de commandes de recherche le plus simple, le message d’appel initial inclut la chaîne de recherche que l’utilisateur a envoyé.</span><span class="sxs-lookup"><span data-stu-id="8426a-136">In the most basic search command flow, the initial invoke message will include the search string the user submitted.</span></span> <span data-ttu-id="8426a-137">Vous allez répondre avec une liste de cartes et d’aperçus de carte.</span><span class="sxs-lookup"><span data-stu-id="8426a-137">You'll respond with a list of cards and card previews.</span></span> <span data-ttu-id="8426a-138">Le client teams affiche les aperçus de carte dans une liste à partir de laquelle l’utilisateur final peut effectuer une sélection.</span><span class="sxs-lookup"><span data-stu-id="8426a-138">The Teams client will render the card previews in a list for the end user to select from.</span></span> <span data-ttu-id="8426a-139">Lorsque l’utilisateur sélectionne une carte, la carte pleine taille est insérée dans la zone de message de composition.</span><span class="sxs-lookup"><span data-stu-id="8426a-139">When the user selects a card, the full-size card will be inserted into the compose message area.</span></span>

<span data-ttu-id="8426a-140">Ils peuvent être déclenchés à partir de la zone de message composer ou de la zone de commande.</span><span class="sxs-lookup"><span data-stu-id="8426a-140">They can be triggered from the compose message area or the command box.</span></span> <span data-ttu-id="8426a-141">Contrairement aux commandes d’action, elles ne peuvent pas être déclenchées à partir d’un message.</span><span class="sxs-lookup"><span data-stu-id="8426a-141">Unlike action commands, they cannot be triggered from a message.</span></span>

![commande de recherche de l’extension de messagerie](~/assets/images/search-extension.png)

### <a name="link-unfurling"></a><span data-ttu-id="8426a-143">Lien unfurling</span><span class="sxs-lookup"><span data-stu-id="8426a-143">Link unfurling</span></span>

<span data-ttu-id="8426a-144">Vous avez également la possibilité d’appeler votre service lorsqu’une URL est collée dans la zone de message de composition.</span><span class="sxs-lookup"><span data-stu-id="8426a-144">You also have to option to invoke your service when a URL is pasted in the compose message area.</span></span> <span data-ttu-id="8426a-145">Cette fonctionnalité, appelée **liaison unfurling**, vous permet de vous abonner pour recevoir un appel lorsque des URL contenant un domaine particulier sont collées dans la zone de message de composition.</span><span class="sxs-lookup"><span data-stu-id="8426a-145">This functionality, known as **link unfurling**, allows you to subscribe to receive an invoke when URLs containing a particular domain are pasted into the compose message area.</span></span> <span data-ttu-id="8426a-146">Votre service Web peut « Unfurl » l’URL en une carte détaillée, ce qui fournit davantage d’informations que la carte d’aperçu de site Web standard.</span><span class="sxs-lookup"><span data-stu-id="8426a-146">Your web service can "unfurl" the URL into a detailed card, providing more information than the standard website preview card.</span></span> <span data-ttu-id="8426a-147">Vous pouvez même ajouter des boutons pour permettre à vos utilisateurs de prendre immédiatement des mesures sans quitter le client Microsoft Teams.</span><span class="sxs-lookup"><span data-stu-id="8426a-147">You can even add buttons to allow your users to immediately take action without leaving the Microsoft Teams client.</span></span>

## <a name="get-started"></a><span data-ttu-id="8426a-148">Prise en main</span><span class="sxs-lookup"><span data-stu-id="8426a-148">Get Started</span></span>

<span data-ttu-id="8426a-149">Vous êtes prêt à commencer à créer ?</span><span class="sxs-lookup"><span data-stu-id="8426a-149">Ready to get started building?</span></span> <span data-ttu-id="8426a-150">Essayez l’un de nos Démarrages rapides :</span><span class="sxs-lookup"><span data-stu-id="8426a-150">Try one of our quickstarts:</span></span>

* <span data-ttu-id="8426a-151">Démarrages rapides pour C #</span><span class="sxs-lookup"><span data-stu-id="8426a-151">Quickstarts for C#</span></span>
  * [<span data-ttu-id="8426a-152">Extension de messagerie avec des commandes basées sur l’action</span><span class="sxs-lookup"><span data-stu-id="8426a-152">Messaging extension with action-based commands</span></span>](https://github.com/microsoft/BotBuilder-Samples/tree/master/samples/csharp_dotnetcore/51.teams-messaging-extensions-action)
  * [<span data-ttu-id="8426a-153">Extension de messagerie avec des commandes basées sur la recherche</span><span class="sxs-lookup"><span data-stu-id="8426a-153">Messaging extension with search-based commands</span></span>](https://github.com/microsoft/BotBuilder-Samples/tree/master/samples/csharp_dotnetcore/50.teams-messaging-extensions-search)
* <span data-ttu-id="8426a-154">Démarrages rapides pour JavaScript</span><span class="sxs-lookup"><span data-stu-id="8426a-154">Quickstarts for JavaScript</span></span>
  * [<span data-ttu-id="8426a-155">Extension de messagerie avec des commandes basées sur l’action</span><span class="sxs-lookup"><span data-stu-id="8426a-155">Messaging extension with action-based commands</span></span>](https://github.com/microsoft/BotBuilder-Samples/tree/master/samples/javascript_nodejs/51.teams-messaging-extensions-action)
  * [<span data-ttu-id="8426a-156">Extension de messagerie avec des commandes basées sur la recherche</span><span class="sxs-lookup"><span data-stu-id="8426a-156">Messaging extension with search-based commands</span></span>](https://github.com/microsoft/BotBuilder-Samples/tree/master/samples/javascript_nodejs/50.teams-messaging-extensions-search)

## <a name="learn-more"></a><span data-ttu-id="8426a-157">En savoir plus</span><span class="sxs-lookup"><span data-stu-id="8426a-157">Learn more</span></span>

<span data-ttu-id="8426a-158">Créer une extension de messagerie :</span><span class="sxs-lookup"><span data-stu-id="8426a-158">Build a messaging extension:</span></span>

* [<span data-ttu-id="8426a-159">Créer une extension de messagerie</span><span class="sxs-lookup"><span data-stu-id="8426a-159">Create a messaging extension</span></span>](~/messaging-extensions/how-to/create-messaging-extension.md)
* [<span data-ttu-id="8426a-160">Commande définir une extension de messagerie d’action</span><span class="sxs-lookup"><span data-stu-id="8426a-160">Define action messaging extension command</span></span>](~/messaging-extensions/how-to/action-commands/define-action-command.md)
* [<span data-ttu-id="8426a-161">Commande define Search Messaging extension</span><span class="sxs-lookup"><span data-stu-id="8426a-161">Define search messaging extension command</span></span>](~/messaging-extensions/how-to/search-commands/define-search-command.md)
