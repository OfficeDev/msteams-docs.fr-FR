---
title: Appels multimédias en temps réel et réunions en ligne avec Microsoft Teams
description: Comprendre les concepts clés dans la création d’un bot qui peut mener des appels audio et vidéo en temps réel et des réunions en ligne.
ms.topic: conceptual
keywords: audio stream video stream audio/video calling meeting real-time media application-hosted media service-hosted media
ms.openlocfilehash: 997fcedd2cd2d536a4c413c8f8ef2dd355d5a7e3
ms.sourcegitcommit: 79e6bccfb513d4c16a58ffc03521edcf134fa518
ms.translationtype: MT
ms.contentlocale: fr-FR
ms.lasthandoff: 04/13/2021
ms.locfileid: "51697087"
---
# <a name="real-time-media-calls-and-meetings-with-microsoft-teams"></a><span data-ttu-id="2da25-104">Appels et réunions multimédias en temps réel avec Microsoft Teams</span><span class="sxs-lookup"><span data-stu-id="2da25-104">Real-time media calls and meetings with Microsoft Teams</span></span>

<span data-ttu-id="2da25-105">La plateforme Real-time Media permet aux bots d’interagir avec les appels et réunions Microsoft Teams à l’aide de la voix, de la vidéo et du partage d’écran en temps réel.</span><span class="sxs-lookup"><span data-stu-id="2da25-105">The Real-time Media Platform enables bots to interact with Microsoft Teams calls and meetings using real-time voice, video, and screen sharing.</span></span> <span data-ttu-id="2da25-106">Il s’agit d’une fonctionnalité avancée qui permet au bot d’envoyer et de recevoir du contenu vocal et vidéo, image par image.</span><span class="sxs-lookup"><span data-stu-id="2da25-106">This is an advanced capability that allows the bot to send and receive voice and video content frame by frame.</span></span> <span data-ttu-id="2da25-107">Le bot dispose d’un accès brut aux flux multimédias vocaux, vidéo et de partage d’écran.</span><span class="sxs-lookup"><span data-stu-id="2da25-107">The bot has raw access to the voice, video, and screen sharing media streams.</span></span> <span data-ttu-id="2da25-108">Il existe des robots multimédias hébergés par un service plus simples qui s’appuient sur la plateforme multimédia en temps réel pour tout le traitement multimédia.</span><span class="sxs-lookup"><span data-stu-id="2da25-108">There are simpler service-hosted media bots that rely on the Real-time Media Platform for all media processing.</span></span> <span data-ttu-id="2da25-109">Les bots qui traitéent les médias eux-mêmes sont appelés bots multimédias hébergés par l’application.</span><span class="sxs-lookup"><span data-stu-id="2da25-109">Bots that process media themselves are called application-hosted media bots.</span></span>

<span data-ttu-id="2da25-110">Par exemple, dans un appel 1:1 avec un bot, lorsque l’utilisateur parle, le bot reçoit 50 images audio par seconde, chaque image contenant 20 millisecondes (ms) d’audio.</span><span class="sxs-lookup"><span data-stu-id="2da25-110">For example, in a 1:1 call with a bot, as the user speaks, the bot receives 50 audio frames per second, with each frame containing 20 milliseconds (ms) of audio.</span></span> <span data-ttu-id="2da25-111">Un bot multimédia hébergé par l’application peut effectuer une reconnaissance vocale en temps réel à mesure que les trames audio sont reçues, plutôt que d’attendre un enregistrement une fois que l’utilisateur a cessé de parler.</span><span class="sxs-lookup"><span data-stu-id="2da25-111">An application-hosted media bot can perform real-time speech recognition as the audio frames are received, rather than having to wait for a recording after the user has stopped speaking.</span></span> <span data-ttu-id="2da25-112">Le bot peut également envoyer et recevoir des vidéos haute définition, y compris du contenu de partage d’écran vidéo.</span><span class="sxs-lookup"><span data-stu-id="2da25-112">The bot can also send and receive high-definition-resolution video, including video-based screen sharing content.</span></span>

<span data-ttu-id="2da25-113">La plateforme fournit une API simple de socket permettant au bot d’envoyer et de recevoir des médias.</span><span class="sxs-lookup"><span data-stu-id="2da25-113">The platform provides a simple socket-like API for the bot to send and receive media.</span></span> <span data-ttu-id="2da25-114">Il gère le codage et le décodage en temps réel des paquets audio ou vidéo à l’aide de codecs tels que LAG ET G.722 pour l’audio et H.264 pour la vidéo.</span><span class="sxs-lookup"><span data-stu-id="2da25-114">It handles the real-time encoding and decoding of audio or video packets using codecs such as SILK and G.722 for audio and H.264 for video.</span></span> <span data-ttu-id="2da25-115">La plateforme gère également automatiquement le chiffrement ou le déchiffrement de tous les paquets multimédias, ainsi que la transmission du réseau de paquets.</span><span class="sxs-lookup"><span data-stu-id="2da25-115">The platform also handles all media packet encryption or decryption and packet network transmission automatically.</span></span> <span data-ttu-id="2da25-116">Le bot n’est concerné que par le contenu audio ou vidéo réel.</span><span class="sxs-lookup"><span data-stu-id="2da25-116">The bot is only concerned with the actual audio or video content.</span></span> <span data-ttu-id="2da25-117">Un bot multimédia en temps réel participe à des appels 1:1 ainsi qu’à des réunions avec plusieurs participants.</span><span class="sxs-lookup"><span data-stu-id="2da25-117">A real-time media bot participates in 1:1 calls as well as meetings with multiple participants.</span></span>

## <a name="media-session"></a><span data-ttu-id="2da25-118">Session multimédia</span><span class="sxs-lookup"><span data-stu-id="2da25-118">Media session</span></span>

<span data-ttu-id="2da25-119">Lorsqu’un bot multimédia en temps réel répond à un appel entrant ou rejoint une réunion Teams, il doit déclarer les modalités qu’il doit prendre en charge.</span><span class="sxs-lookup"><span data-stu-id="2da25-119">When a real-time media bot answers an incoming call or joins a Teams meeting, it must declare what modalities it must support.</span></span> <span data-ttu-id="2da25-120">Pour chaque modalité prise en charge, le bot déclare s’il peut envoyer et recevoir du média, recevoir uniquement ou envoyer uniquement.</span><span class="sxs-lookup"><span data-stu-id="2da25-120">For each supported modality, the bot declares whether it can send and receive media, receive only, or send only.</span></span> <span data-ttu-id="2da25-121">Par exemple, un bot conçu pour gérer les appels 1:1 Teams nécessite d’envoyer et de recevoir du contenu audio, mais uniquement d’envoyer de la vidéo, car il n’est pas nécessaire de recevoir la vidéo de l’appelant.</span><span class="sxs-lookup"><span data-stu-id="2da25-121">For example, a bot designed to handle 1:1 Teams calls, requires to both send and receive audio, but only send video as it does not require to receive the video of the caller.</span></span> <span data-ttu-id="2da25-122">L’ensemble des modalités audio et vidéo établies entre le bot et l’appelant ou la réunion Teams est appelé session multimédia.</span><span class="sxs-lookup"><span data-stu-id="2da25-122">The set of audio and video modalities established between the bot and the Teams caller or meeting is called the media session.</span></span>

<span data-ttu-id="2da25-123">Deux types de modalités vidéo sont pris en charge: le partage d’écran vidéo principal et vidéo.</span><span class="sxs-lookup"><span data-stu-id="2da25-123">Two types of video modalities are supported, main video and video-based screen sharing.</span></span> <span data-ttu-id="2da25-124">La vidéo principale est utilisée pour transporter la vidéo à partir de la webcam d’un utilisateur.</span><span class="sxs-lookup"><span data-stu-id="2da25-124">The main video is used to transport the video from a user's webcam.</span></span> <span data-ttu-id="2da25-125">Le partage d’écran vidéo permet à un utilisateur de partager son écran en tant que flux vidéo.</span><span class="sxs-lookup"><span data-stu-id="2da25-125">The video-based screen sharing allows a user to share his or her screen as a video stream.</span></span> <span data-ttu-id="2da25-126">La plateforme permet à un bot d’envoyer et de recevoir les deux types de vidéos.</span><span class="sxs-lookup"><span data-stu-id="2da25-126">The platform allows a bot to send and receive both video types.</span></span>

<span data-ttu-id="2da25-127">Lorsqu’il est joint à une réunion Teams, un bot peut recevoir plusieurs flux vidéo principaux simultanément jusqu’à dix par session multimédia.</span><span class="sxs-lookup"><span data-stu-id="2da25-127">When joined to a Teams meeting, a bot can receive multiple main video streams simultaneously up to ten per media session.</span></span> <span data-ttu-id="2da25-128">Cela permet au bot de voir plusieurs participants à la réunion.</span><span class="sxs-lookup"><span data-stu-id="2da25-128">This allows the bot to see more than one participant in the meeting.</span></span>

<span data-ttu-id="2da25-129">La section suivante fournit des détails sur l’envoi et la réception de médias par le bot sous la mesure d’une séquence d’images.</span><span class="sxs-lookup"><span data-stu-id="2da25-129">The next section provides details about the bot sending and receiving media as a sequence of frames.</span></span>

## <a name="frames-and-frame-rate"></a><span data-ttu-id="2da25-130">Trames et fréquence d’images</span><span class="sxs-lookup"><span data-stu-id="2da25-130">Frames and frame rate</span></span>

<span data-ttu-id="2da25-131">Un bot multimédia en temps réel interagit directement avec les modalités audio et vidéo d’une session multimédia.</span><span class="sxs-lookup"><span data-stu-id="2da25-131">A real-time media bot interacts directly with the audio and video modalities of a media session.</span></span> <span data-ttu-id="2da25-132">Cela signifie que le bot envoie et reçoit du contenu multimédia sous la mesure d’une séquence d’images, où chaque image représente une unité de contenu.</span><span class="sxs-lookup"><span data-stu-id="2da25-132">This means the bot is sending and receiving media as a sequence of frames, where each frame represents a unit of content.</span></span> <span data-ttu-id="2da25-133">Une seconde de l’audio est transmise sous la mesure d’une séquence de 50 images, chaque trame contenant 20 ms qui est 1/50e de seconde de contenu de reconnaissance vocale.</span><span class="sxs-lookup"><span data-stu-id="2da25-133">One second of audio is transmitted as a sequence of 50 frames, with each frame containing 20 ms that is 1/50th of a second of speech content.</span></span> <span data-ttu-id="2da25-134">Une seconde de la vidéo est transmise sous la mesure d’une séquence de 30 images fixes, chacune devant être affichée à seulement 33,3 ms, soit 1/30e de seconde avant l’affichage de la trame vidéo suivante.</span><span class="sxs-lookup"><span data-stu-id="2da25-134">One second of video is transmitted as a sequence of 30 still images, each intended to be viewed for just 33.3 ms that is 1/30th of a second before the next video frame is displayed.</span></span> <span data-ttu-id="2da25-135">Le nombre d’images transmises ou rendues par seconde est appelé fréquence d’images.</span><span class="sxs-lookup"><span data-stu-id="2da25-135">The number of frames transmitted or rendered per second is called the frame rate.</span></span>

<span data-ttu-id="2da25-136">La section suivante fournit des détails sur le format audio et vidéo utilisé dans les appels et réunions multimédias en temps réel.</span><span class="sxs-lookup"><span data-stu-id="2da25-136">The next section provides details about the audio and video format used in real-time media calls and meetings.</span></span>

## <a name="audio-and-video-format"></a><span data-ttu-id="2da25-137">Format audio et vidéo</span><span class="sxs-lookup"><span data-stu-id="2da25-137">Audio and video format</span></span>

<span data-ttu-id="2da25-138">Au format audio, chaque seconde de l’audio est représentée sous forme de 16 000 échantillons, chaque échantillon contenant 16 bits de données.</span><span class="sxs-lookup"><span data-stu-id="2da25-138">In audio format, each second of audio is represented as 16,000 samples, with each sample containing 16-bits of data.</span></span> <span data-ttu-id="2da25-139">Un cadre audio de 20 ms contient 320 échantillons, soit 640 octets de données.</span><span class="sxs-lookup"><span data-stu-id="2da25-139">A 20 ms audio frame contains 320 samples that is 640 bytes of data.</span></span>

<span data-ttu-id="2da25-140">Dans le format vidéo, plusieurs formats sont pris en charge.</span><span class="sxs-lookup"><span data-stu-id="2da25-140">In video format, several formats are supported.</span></span> <span data-ttu-id="2da25-141">Deux propriétés clés d’un format vidéo sont sa taille d’image et son format de couleur.</span><span class="sxs-lookup"><span data-stu-id="2da25-141">Two key properties of a video format are its frame size and color format.</span></span> <span data-ttu-id="2da25-142">Les tailles d’images pris en charge incluent 640 x 360 pixels, 1280 x 720 pixels et 1920 x 1080 pixels.</span><span class="sxs-lookup"><span data-stu-id="2da25-142">Supported frame sizes include 640x360 that is 360 pixels, 1280x720 that is 720 pixels, and 1920x1080 that is 1080 pixels.</span></span> <span data-ttu-id="2da25-143">Les formats de couleur pris en charge incluent NV12 qui est de 12 bits par pixel et RVB24 qui est de 24 bits par pixel.</span><span class="sxs-lookup"><span data-stu-id="2da25-143">Supported color formats include NV12 that is 12 bits per pixel and RGB24 that is 24 bits per pixel.</span></span>

<span data-ttu-id="2da25-144">Une image vidéo de 720 p contient 921 600 pixels, soit 1 280 fois 720.</span><span class="sxs-lookup"><span data-stu-id="2da25-144">A 720p video frame contains 921,600 pixels that is 1280 times 720.</span></span> <span data-ttu-id="2da25-145">Dans le format de couleur RVB24, chaque pixel est représenté sous la forme de 3 octets de 24 bits composés d’un octet chacun des composants de couleur rouge, vert et bleu.</span><span class="sxs-lookup"><span data-stu-id="2da25-145">In the RGB24 color format, each pixel is represented as 3 bytes that is 24-bits comprised of one byte each of red, green, and blue color components.</span></span> <span data-ttu-id="2da25-146">Par conséquent, une seule image vidéo RVB24 de 720 p nécessite 2 764 800 octets de données, soit 921 600 pixels et 3 octets par pixel.</span><span class="sxs-lookup"><span data-stu-id="2da25-146">Therefore, a single 720p RGB24 video frame requires 2,764,800 bytes of data that is 921,600 pixels times 3 bytes per pixel.</span></span> <span data-ttu-id="2da25-147">À une fréquence d’images de 30 fps, l’envoi de trames vidéo RVB24 de 720 p implique le traitement d’environ 80 mégaoctets par seconde du contenu, qui est considérablement compressé par le codec vidéo H.264 avant la transmission réseau.</span><span class="sxs-lookup"><span data-stu-id="2da25-147">At a frame rate of 30 fps, sending 720p RGB24 video frames means processing approximately 80 megabytes per second of content, which is substantially compressed by the H.264 video codec before network transmission.</span></span>

<span data-ttu-id="2da25-148">Une fonctionnalité avancée de la plateforme permet à un bot d’envoyer ou de recevoir des vidéos sous forme d’images H.264 codées.</span><span class="sxs-lookup"><span data-stu-id="2da25-148">An advanced capability of the platform allows a bot to send or receive video as encoded H.264 frames.</span></span> <span data-ttu-id="2da25-149">Cela prend en charge les bots qui fournissent leur propre encodeur ou décodeur H.264, ou qui ne nécessitent pas le flux vidéo décodé en bitmaps RGB24 ou NV12 brutes.</span><span class="sxs-lookup"><span data-stu-id="2da25-149">This supports bots which provide their own H.264 encoder or decoder, or do not require the video stream decoded into raw RGB24 or NV12 bitmaps.</span></span>

<span data-ttu-id="2da25-150">La section suivante fournit des détails sur les participants à la réunion qui sont des haut-parleurs actifs et dominants.</span><span class="sxs-lookup"><span data-stu-id="2da25-150">The next section provides details about which meeting participants are speaking that is which are active and dominant speakers.</span></span>

## <a name="active-and-dominant-speakers"></a><span data-ttu-id="2da25-151">Haut-parleurs actifs et dominants</span><span class="sxs-lookup"><span data-stu-id="2da25-151">Active and dominant speakers</span></span>

<span data-ttu-id="2da25-152">Lorsqu’il est joint à une réunion Teams constituée de plusieurs participants, un bot peut identifier les participants à la réunion qui parlent actuellement.</span><span class="sxs-lookup"><span data-stu-id="2da25-152">When joined to a Teams meeting consisting of multiple participants, a bot can identify which meeting participants are currently speaking.</span></span> <span data-ttu-id="2da25-153">Les haut-parleurs actifs identifient les participants qui sont entendus dans chaque trame audio reçue.</span><span class="sxs-lookup"><span data-stu-id="2da25-153">Active speakers identify which participants are being heard in each received audio frame.</span></span> <span data-ttu-id="2da25-154">Les haut-parleurs dominants identifient les participants les plus actifs ou les plus dominants dans la conversation de groupe, même si leur voix n’est pas entendu dans chaque trame audio.</span><span class="sxs-lookup"><span data-stu-id="2da25-154">Dominant speakers identify which participants are currently most active or dominant in the group conversation, even though their voice is not heard in every audio frame.</span></span> <span data-ttu-id="2da25-155">L’ensemble des haut-parleurs dominants peut changer à mesure que différents participants parlent à tour de rôle.</span><span class="sxs-lookup"><span data-stu-id="2da25-155">The set of dominant speakers can change as different participants take turns speaking.</span></span>

<span data-ttu-id="2da25-156">La section suivante fournit des détails sur les demandes d’abonnement vidéo réalisées par un bot.</span><span class="sxs-lookup"><span data-stu-id="2da25-156">The next section provides details about video subscription requests made by a bot.</span></span>

## <a name="video-subscription"></a><span data-ttu-id="2da25-157">Abonnement vidéo</span><span class="sxs-lookup"><span data-stu-id="2da25-157">Video subscription</span></span>

<span data-ttu-id="2da25-158">Dans un appel 1:1, le bot reçoit automatiquement la vidéo de l’appelant si le bot est activé pour recevoir la vidéo.</span><span class="sxs-lookup"><span data-stu-id="2da25-158">In a 1:1 call, the bot automatically receives the video of the caller if the bot is enabled to receive the video.</span></span> <span data-ttu-id="2da25-159">Dans une réunion Teams, le bot doit indiquer à la plateforme les participants qu'il souhaite voir.</span><span class="sxs-lookup"><span data-stu-id="2da25-159">In a Teams meeting, the bot must indicate to the platform which participants it wants to see.</span></span> <span data-ttu-id="2da25-160">Un abonnement vidéo est une demande du bot pour recevoir le contenu vidéo ou de partage d'écran principal d'un participant.</span><span class="sxs-lookup"><span data-stu-id="2da25-160">A video subscription is a request by the bot to receive a participant’s main video or screen-sharing content.</span></span> <span data-ttu-id="2da25-161">Lorsque les participants à la réunion effectuent leur conversation, le bot modifie les abonnements vidéo souhaités en fonction des mises à jour du jeu de haut-parleurs dominants ou des notifications indiquant le participant qui partage actuellement l'écran.</span><span class="sxs-lookup"><span data-stu-id="2da25-161">As the participants in the meeting conduct their conversation, the bot modifies its desired video subscriptions based on updates of the dominant speaker set or notifications indicating which participant is currently screen sharing.</span></span>

<span data-ttu-id="2da25-162">La section suivante fournit des détails sur ce que vous devez installer et les conditions requises pour développer un bot multimédia hébergé par l'application.</span><span class="sxs-lookup"><span data-stu-id="2da25-162">The next section provides details about what you must install and the requirements to develop an application-hosted media bot.</span></span>

## <a name="developer-resources"></a><span data-ttu-id="2da25-163">Ressources pour les développeurs</span><span class="sxs-lookup"><span data-stu-id="2da25-163">Developer resources</span></span>

<span data-ttu-id="2da25-164">Pour développer un bot multimédia hébergé par l'application, vous devez installer le package NuGet de bibliothèque [Microsoft.Graph.Calls.Media .NET](https://www.nuget.org/packages/Microsoft.Graph.Communications.Calls.Media/) dans votre projet Visual Studio web.</span><span class="sxs-lookup"><span data-stu-id="2da25-164">To develop an application-hosted media bot, you must install the [Microsoft.Graph.Calls.Media .NET library](https://www.nuget.org/packages/Microsoft.Graph.Communications.Calls.Media/) NuGet package within your Visual Studio project.</span></span>

<span data-ttu-id="2da25-165">Les bots multimédias hébergés par l'application nécessitent .NET ou C# et Windows Server.</span><span class="sxs-lookup"><span data-stu-id="2da25-165">Application-hosted media bots require .NET or C# and Windows Server.</span></span> <span data-ttu-id="2da25-166">Pour plus d'informations, voir [les exigences et les considérations relatives aux bots multimédias hébergés par l'application.](requirements-considerations-application-hosted-media-bots.md#c-or-net-and-windows-server-for-development)</span><span class="sxs-lookup"><span data-stu-id="2da25-166">For more information, see [requirements and considerations for application-hosted media bots](requirements-considerations-application-hosted-media-bots.md#c-or-net-and-windows-server-for-development).</span></span>

## <a name="next-step"></a><span data-ttu-id="2da25-167">Étape suivante</span><span class="sxs-lookup"><span data-stu-id="2da25-167">Next step</span></span>

> [!div class="nextstepaction"]
> [<span data-ttu-id="2da25-168">Enregistrer un bot appelant</span><span class="sxs-lookup"><span data-stu-id="2da25-168">Register a calling bot</span></span>](~/bots/calls-and-meetings/registering-calling-bot.md)
