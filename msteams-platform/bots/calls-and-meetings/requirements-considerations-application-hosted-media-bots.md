---
title: Conditions requises et considérations pour les robots multimédias hébergés par l’application
description: Comprendre les exigences et considérations importantes liées à la création de bots multimédias hébergés par l’application pour Microsoft Teams.
ms.topic: conceptual
keywords: ordinateur windows windows server azure hébergé par l’application
ms.date: 11/16/2018
ms.openlocfilehash: bf75b7f689713f16cb3ff9ff4313ab829b5cc2d6
ms.sourcegitcommit: 976e870cc925f61b76c3830ec04ba6e4bdfde32f
ms.translationtype: MT
ms.contentlocale: fr-FR
ms.lasthandoff: 01/27/2021
ms.locfileid: "50014487"
---
# <a name="requirements-and-considerations-for-application-hosted-media-bots"></a><span data-ttu-id="215aa-104">Conditions requises et considérations pour les robots multimédias hébergés par l’application</span><span class="sxs-lookup"><span data-stu-id="215aa-104">Requirements and considerations for application-hosted media bots</span></span>

<span data-ttu-id="215aa-105">Tous les conseils pour le développement de bots de messagerie et de réponse vocale interactive (IVR) ne s’appliquent pas de la même manière à la création de bots multimédias hébergés par l’application.</span><span class="sxs-lookup"><span data-stu-id="215aa-105">Not all guidance for developing messaging and Interactive Voice Response (IVR) bots applies equally to building application-hosted media bots.</span></span> <span data-ttu-id="215aa-106">Cet article décrit quelques-unes des exigences et considérations importantes pour le développement et l’exécution d’un bot multimédia hébergé par l’application.</span><span class="sxs-lookup"><span data-stu-id="215aa-106">This article describes some of the important requirements and considerations for developing and running an application-hosted media bot.</span></span>

> [!NOTE]
> <span data-ttu-id="215aa-107">Étant donné que la plateforme Microsoft Real-time Media pour bots est en version préliminaire pour les développeurs, les instructions de cet article peuvent faire l’objet de changements.</span><span class="sxs-lookup"><span data-stu-id="215aa-107">Because the Microsoft Real-time Media Platform for Bots is in developer preview, the guidance in this article is subject to change.</span></span>

## <a name="application-hosted-media-bot-development-requires-cnet-and-windows-server"></a><span data-ttu-id="215aa-108">Le développement de bots multimédias hébergés par l’application nécessite C#/.NET et Windows Server</span><span class="sxs-lookup"><span data-stu-id="215aa-108">Application-hosted media bot development requires C#/.NET and Windows Server</span></span>

- <span data-ttu-id="215aa-109">Un bot multimédia hébergé par l’application nécessite la bibliothèque .NET (disponible ici pour accéder aux flux multimédias audio et vidéo, et le bot doit être déployé sur un ordinateur Windows Server (ou un système d’exploitation invité `Microsoft.Graph.Communications.Calls.Media` Windows Server dans Azure).[](https://www.nuget.org/packages/Microsoft.Graph.Communications.Calls.Media/)</span><span class="sxs-lookup"><span data-stu-id="215aa-109">An application-hosted media bot requires the `Microsoft.Graph.Communications.Calls.Media` .NET library ([available here](https://www.nuget.org/packages/Microsoft.Graph.Communications.Calls.Media/) to access the audio and video media streams, and the bot must be deployed on a Windows Server machine (or Windows Server guest OS in Azure).</span></span> <span data-ttu-id="215aa-110">Par conséquent, le bot doit être développé en C# et .NET Framework standard et déployé dans Microsoft Azure.</span><span class="sxs-lookup"><span data-stu-id="215aa-110">Therefore, the bot must be developed in C# and the standard .NET Framework and deployed in Microsoft Azure.</span></span> <span data-ttu-id="215aa-111">Vous ne pouvez pas utiliser les API C++ ou Node.js pour accéder aux médias en temps réel et .NET Core n’est pas pris en charge pour un bot multimédia hébergé par l’application.</span><span class="sxs-lookup"><span data-stu-id="215aa-111">You can't use C++ or Node.js APIs to access real-time media and .NET Core is not supported for an application-hosted media bot.</span></span>

- <span data-ttu-id="215aa-112">Un bot multimédia hébergé par l’application peut être hébergé dans l’un des environnements de service Azure suivants :</span><span class="sxs-lookup"><span data-stu-id="215aa-112">An application-hosted media bot can be hosted within one of the following Azure service environments:</span></span>
  - <span data-ttu-id="215aa-113">Service cloud.</span><span class="sxs-lookup"><span data-stu-id="215aa-113">Cloud Service.</span></span>
  - <span data-ttu-id="215aa-114">Service Fabric avec jeux d’échelle de machine virtuelle (VMSS).</span><span class="sxs-lookup"><span data-stu-id="215aa-114">Service Fabric with Virtual Machine Scale Sets (VMSS).</span></span>
  - <span data-ttu-id="215aa-115">Ordinateur virtuel IaaS (Infrastructure as a Service).</span><span class="sxs-lookup"><span data-stu-id="215aa-115">Infrastructure as a Service (IaaS) Virtual Machine (VM).</span></span>  
  
- <span data-ttu-id="215aa-116">Un bot multimédia hébergé par l’application ne peut pas être déployé en tant qu’application web Azure.</span><span class="sxs-lookup"><span data-stu-id="215aa-116">An application-hosted media bot can't be deployed as an Azure Web App.</span></span>

- <span data-ttu-id="215aa-117">Un bot multimédia hébergé par l’application doit être en cours d’exécution sur une version récente de la bibliothèque `Microsoft.Graph.Communications.Calls.Media` .NET.</span><span class="sxs-lookup"><span data-stu-id="215aa-117">An application-hosted media bot must be running on a recent version of the `Microsoft.Graph.Communications.Calls.Media` .NET library.</span></span> <span data-ttu-id="215aa-118">Le bot doit utiliser la dernière version disponible du [package NuGet](https://www.nuget.org/packages/Microsoft.Graph.Communications.Calls.Media/)ou une version qui n’a pas plus de trois mois.</span><span class="sxs-lookup"><span data-stu-id="215aa-118">The bot should use either the newest available version of the [NuGet package](https://www.nuget.org/packages/Microsoft.Graph.Communications.Calls.Media/), or a version that is not more than three months old.</span></span> <span data-ttu-id="215aa-119">Les versions antérieures de la bibliothèque seront dépréciées et risquent de ne pas fonctionner après quelques mois.</span><span class="sxs-lookup"><span data-stu-id="215aa-119">Older versions of the library will be deprecated and may not work after a few months.</span></span> <span data-ttu-id="215aa-120">La mise à jour de la bibliothèque garantit la `Microsoft.Graph.Communications.Calls.Media` meilleure interopérabilité entre le bot et Microsoft Teams.</span><span class="sxs-lookup"><span data-stu-id="215aa-120">Keeping the `Microsoft.Graph.Communications.Calls.Media` library up-to-date will ensure the best interoperability between the bot and Microsoft Teams.</span></span>

## <a name="real-time-media-calls-stay-on-the-machine-where-they-were-created"></a><span data-ttu-id="215aa-121">Les appels multimédias en temps réel restent sur l’ordinateur où ils ont été créés</span><span class="sxs-lookup"><span data-stu-id="215aa-121">Real-time media calls stay on the machine where they were created</span></span>

- <span data-ttu-id="215aa-122">Un appel multimédia en temps réel est épinglé à l’instance de machine virtuelle (VM) qui a accepté ou démarré l’appel.</span><span class="sxs-lookup"><span data-stu-id="215aa-122">A real-time media call is pinned to the virtual machine (VM) instance that accepted or started the call.</span></span> <span data-ttu-id="215aa-123">Les médias d’un appel ou d’une réunion Microsoft Teams sont envoyés vers cette instance de la VM, et le support que le bot renvoie à Microsoft Teams doit également provenir de cette VM.</span><span class="sxs-lookup"><span data-stu-id="215aa-123">Media from a Microsoft Teams call or meeting will flow to that VM instance, and media the bot sends back to Microsoft Teams must also originate from that VM.</span></span>
- <span data-ttu-id="215aa-124">Si des appels multimédias en temps réel sont en cours lorsque la VM est arrêtée, ces appels sont brusquement arrêtés.</span><span class="sxs-lookup"><span data-stu-id="215aa-124">If there are any real-time media calls in progress when the VM is stopped, those calls will be abruptly terminated.</span></span> <span data-ttu-id="215aa-125">Si le bot a connaissance de l’arrêt de la VM en attente, il peut essayer de mettre fin « normalement » aux appels.</span><span class="sxs-lookup"><span data-stu-id="215aa-125">If the bot has prior knowledge of the pending VM shutdown, it can try to "gracefully" end the calls.</span></span>

## <a name="application-hosted-media-bots-must-be-directly-accessible-on-the-internet"></a><span data-ttu-id="215aa-126">Les robots multimédias hébergés par l’application doivent être directement accessibles sur Internet</span><span class="sxs-lookup"><span data-stu-id="215aa-126">Application-hosted media bots must be directly accessible on the internet</span></span>

- <span data-ttu-id="215aa-127">Chaque instance de la VM hébergeant un bot multimédia hébergé par l’application dans Azure doit être directement accessible à partir d’Internet à l’aide d’une adresse IP publique au niveau de l’instance (ILPIP).</span><span class="sxs-lookup"><span data-stu-id="215aa-127">Each VM instance hosting an application-hosted media bot in Azure must be directly accessible from the internet using an instance-level public IP address (ILPIP).</span></span>
  - <span data-ttu-id="215aa-128">Pour obtenir et configurer un ILPIP pour un service cloud Azure, voir vue d’ensemble de l’adresse IP publique (classique) au niveau de [l’instance.](/azure/virtual-network/virtual-networks-instance-level-public-ip)</span><span class="sxs-lookup"><span data-stu-id="215aa-128">For obtaining and configuring an ILPIP for an Azure Cloud Service, see [Instance level public IP (Classic) overview](/azure/virtual-network/virtual-networks-instance-level-public-ip).</span></span>
  - <span data-ttu-id="215aa-129">Pour configurer un ILPIP pour un jeu d’échelles de machines virtuelles, voir [Public IPv4 par ordinateur virtuel.](/azure/virtual-machine-scale-sets/virtual-machine-scale-sets-networking#public-ipv4-per-virtual-machine)</span><span class="sxs-lookup"><span data-stu-id="215aa-129">For configuring an ILPIP for a VM Scale Set, see [Public IPv4 per virtual machine](/azure/virtual-machine-scale-sets/virtual-machine-scale-sets-networking#public-ipv4-per-virtual-machine).</span></span>
- <span data-ttu-id="215aa-130">Le service hébergeant un bot multimédia hébergé par l’application doit également configurer chaque instance d’une vm avec un port public qui est mapmé sur l’instance spécifique.</span><span class="sxs-lookup"><span data-stu-id="215aa-130">The service hosting an application-hosted media bot must also configure each VM instance with a public-facing port which maps to the specific instance.</span></span>
  - <span data-ttu-id="215aa-131">Pour un service cloud Azure, cela nécessite un point de terminaison d’entrée d’instance ; voir [Activer la communication pour les instances de rôle dans Azure.](/azure/cloud-services/cloud-services-enable-communication-role-instances)</span><span class="sxs-lookup"><span data-stu-id="215aa-131">For an Azure Cloud Service, this requires an instance input endpoint; see [Enable communication for role instances in Azure](/azure/cloud-services/cloud-services-enable-communication-role-instances).</span></span>
  - <span data-ttu-id="215aa-132">Pour un jeu d’échelles de vm, une règle NAT sur l’équilibrage de charge doit être configurée ; voir [Les réseaux virtuels et les machines virtuelles dans Azure](/azure/virtual-machines/windows/network-overview).</span><span class="sxs-lookup"><span data-stu-id="215aa-132">For a VM Scale Set, a NAT rule on the load balancer must be configured; see [Virtual networks and virtual machines in Azure](/azure/virtual-machines/windows/network-overview).</span></span>
- <span data-ttu-id="215aa-133">Les robots multimédias hébergés par l’application ne sont pas pris en charge par l’émulateur Bot Framework.</span><span class="sxs-lookup"><span data-stu-id="215aa-133">Application-hosted media bots aren't supported by the Bot Framework Emulator.</span></span>

## <a name="scalability-and-performance-considerations"></a><span data-ttu-id="215aa-134">Considérations relatives à l’évolutivité et aux performances</span><span class="sxs-lookup"><span data-stu-id="215aa-134">Scalability and performance considerations</span></span>

- <span data-ttu-id="215aa-135">Les bots multimédias hébergés par l’application nécessitent plus de capacité de calcul et de réseau (bande passante) que les bots de messagerie et peuvent subir des coûts d’exploitation beaucoup plus élevés.</span><span class="sxs-lookup"><span data-stu-id="215aa-135">Application-hosted media bots require more compute and network (bandwidth) capacity than messaging bots and may incur significantly higher operational costs.</span></span> <span data-ttu-id="215aa-136">Un développeur de bot multimédia en temps réel doit mesurer avec soin l’évolutivité du bot et s’assurer qu’il n’accepte pas plus d’appels simultanés qu’il ne peut gérer.</span><span class="sxs-lookup"><span data-stu-id="215aa-136">A real-time media bot developer must carefully measure the bot's scalability, and ensure the bot doesn't accept more simultaneous calls than it can manage.</span></span> <span data-ttu-id="215aa-137">Un bot vidéo peut être en mesure de supporter une ou deux sessions multimédias simultanées par cœur d’UC (si vous utilisez les formats vidéo RGB24 ou NV12 « bruts »).</span><span class="sxs-lookup"><span data-stu-id="215aa-137">A video-enabled bot may be able to sustain only one or two concurrent media sessions per CPU core (if using the "raw" RGB24 or NV12 video formats).</span></span>
- <span data-ttu-id="215aa-138">La plateforme Real-time Media ne tire actuellement parti d’aucune unité de traitement graphique (GPU) disponible sur la VM pour décharger le codage/décodage vidéo H.264.</span><span class="sxs-lookup"><span data-stu-id="215aa-138">The Real-time Media Platform doesn't currently take advantage of any Graphics Processing Units (GPU) available on the VM to off-load H.264 video encoding/decoding.</span></span> <span data-ttu-id="215aa-139">Au lieu de cela, le code vidéo et le décodage sont effectués dans le logiciel sur l’UC.</span><span class="sxs-lookup"><span data-stu-id="215aa-139">Instead, video encode and decode are done in software on the CPU.</span></span> <span data-ttu-id="215aa-140">Si un processeur graphique est disponible, le bot peut en tirer parti pour son propre rendu graphique (par exemple, si le bot utilise un moteur graphique 3D).</span><span class="sxs-lookup"><span data-stu-id="215aa-140">If a GPU is available, the bot may take advantage of it for its own graphics rendering (e.g. if the bot is using a 3D graphics engine).</span></span>
- <span data-ttu-id="215aa-141">L’instance de la VM hébergeant le bot multimédia en temps réel doit avoir au moins 2 cœurs d’UC.</span><span class="sxs-lookup"><span data-stu-id="215aa-141">The VM instance hosting the real-time media bot must have at least 2 CPU cores.</span></span> <span data-ttu-id="215aa-142">Pour Azure, une machine virtuelle de série Dv2 est recommandée.</span><span class="sxs-lookup"><span data-stu-id="215aa-142">For Azure, a Dv2-series virtual machine is recommended.</span></span> <span data-ttu-id="215aa-143">Pour les autres types d’ordinateur virtuel Azure, un système avec 4 processeurs virtuels (vCPU) est la taille minimale requise.</span><span class="sxs-lookup"><span data-stu-id="215aa-143">For other Azure VM types, a system with 4 virtual CPUs (vCPU) is the minimum size required.</span></span> <span data-ttu-id="215aa-144">Des informations détaillées sur les types de vm Azure sont disponibles dans [la documentation Azure.](/azure/virtual-machines/windows/sizes-general)</span><span class="sxs-lookup"><span data-stu-id="215aa-144">Detailed information about Azure VM types is available in the [Azure documentation](/azure/virtual-machines/windows/sizes-general).</span></span>

## <a name="samples-and-additional-resources"></a><span data-ttu-id="215aa-145">Exemples et ressources supplémentaires</span><span class="sxs-lookup"><span data-stu-id="215aa-145">Samples and Additional Resources</span></span>

- [<span data-ttu-id="215aa-146">Exemples d’applications</span><span class="sxs-lookup"><span data-stu-id="215aa-146">Sample applications</span></span>](https://github.com/microsoftgraph/microsoft-graph-comms-samples/tree/master/Samples/V1.0Samples/LocalMediaSamples)
- [<span data-ttu-id="215aa-147">Graph Calling SDK Documentation</span><span class="sxs-lookup"><span data-stu-id="215aa-147">Graph Calling SDK Documentation</span></span>](https://microsoftgraph.github.io/microsoft-graph-comms-samples/docs/)
