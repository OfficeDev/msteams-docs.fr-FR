---
title: Conditions requises et considérations pour les robots multimédias hébergés par l'application
description: Comprendre les exigences et considérations importantes liées à la création de bots multimédias hébergés par l'application pour Microsoft Teams.
ms.topic: conceptual
localization_priority: Normal
keywords: ordinateur windows windows server azure hébergé par l'application
ms.date: 11/16/2018
ms.openlocfilehash: 731cc53573d5c2b65eaed36d75793901fde86e54
ms.sourcegitcommit: 825abed2f8784d2bab7407ba7a4455ae17bbd28f
ms.translationtype: MT
ms.contentlocale: fr-FR
ms.lasthandoff: 04/26/2021
ms.locfileid: "52020055"
---
# <a name="requirements-and-considerations-for-application-hosted-media-bots"></a><span data-ttu-id="953d6-104">Conditions requises et considérations pour les robots multimédias hébergés par l'application</span><span class="sxs-lookup"><span data-stu-id="953d6-104">Requirements and considerations for application-hosted media bots</span></span>

<span data-ttu-id="953d6-105">Un bot multimédia hébergé par l'application nécessite que la bibliothèque [ `Microsoft.Graph.Communications.Calls.Media` .NET](https://www.nuget.org/packages/Microsoft.Graph.Communications.Calls.Media/) accède aux flux multimédias audio et vidéo.</span><span class="sxs-lookup"><span data-stu-id="953d6-105">An application-hosted media bot requires the [`Microsoft.Graph.Communications.Calls.Media` .NET library](https://www.nuget.org/packages/Microsoft.Graph.Communications.Calls.Media/) to access the audio and video media streams.</span></span> <span data-ttu-id="953d6-106">Le bot doit être déployé sur un ordinateur Windows Server ou un système d'exploitation invité Windows Server dans Azure.</span><span class="sxs-lookup"><span data-stu-id="953d6-106">The bot must be deployed on a Windows Server machine or Windows Server guest Operating System (OS) in Azure.</span></span>

> [!NOTE]
> * <span data-ttu-id="953d6-107">Les instructions pour le développement de bots de messagerie et de réponse vocale interactive (IVR) ne s'appliquent pas complètement à la création de bots multimédias hébergés par l'application.</span><span class="sxs-lookup"><span data-stu-id="953d6-107">The guidance for developing messaging and Interactive Voice Response (IVR) bots does not completely apply to building application-hosted media bots.</span></span>
> * <span data-ttu-id="953d6-108">Comme la plateforme Microsoft Real-time Media pour les bots est en version préliminaire pour les développeurs, les instructions de ce document peuvent faire l'objet de changements.</span><span class="sxs-lookup"><span data-stu-id="953d6-108">As the Microsoft Real-time Media Platform for bots is in developer preview, the guidance in this document is subject to change.</span></span>

## <a name="c-or-net-and-windows-server-for-development"></a><span data-ttu-id="953d6-109">C# ou .NET et Windows Server pour le développement</span><span class="sxs-lookup"><span data-stu-id="953d6-109">C# or .NET and Windows Server for development</span></span>

<span data-ttu-id="953d6-110">Un bot multimédia hébergé par l'application requiert les procédures suivantes :</span><span class="sxs-lookup"><span data-stu-id="953d6-110">An application-hosted media bot requires the following:</span></span>

- <span data-ttu-id="953d6-111">Le bot doit être développé dans C# et la .NET Framework standard et déployé dans Microsoft Azure.</span><span class="sxs-lookup"><span data-stu-id="953d6-111">The bot must be developed in C# and the standard .NET Framework and deployed in Microsoft Azure.</span></span> <span data-ttu-id="953d6-112">Vous ne pouvez pas utiliser les API C++ ou Node.js pour accéder aux médias en temps réel et .NET Core n'est pas pris en charge pour un bot multimédia hébergé par l'application.</span><span class="sxs-lookup"><span data-stu-id="953d6-112">You cannot use C++ or Node.js APIs to access real-time media and .NET Core is not supported for an application-hosted media bot.</span></span>

- <span data-ttu-id="953d6-113">Le bot peut être hébergé dans l'un des environnements de service Azure suivants :</span><span class="sxs-lookup"><span data-stu-id="953d6-113">The bot can be hosted within one of the following Azure service environments:</span></span>
    - <span data-ttu-id="953d6-114">Service cloud.</span><span class="sxs-lookup"><span data-stu-id="953d6-114">Cloud Service.</span></span>
    - <span data-ttu-id="953d6-115">Service Fabric avec jeux d'échelle de machine virtuelle (VMSS).</span><span class="sxs-lookup"><span data-stu-id="953d6-115">Service Fabric with Virtual Machine Scale Sets (VMSS).</span></span>
    - <span data-ttu-id="953d6-116">Machine virtuelle (VM) IaaS (Infrastructure as a Service).</span><span class="sxs-lookup"><span data-stu-id="953d6-116">Infrastructure as a Service (IaaS) Virtual Machine (VM).</span></span>  
  
- <span data-ttu-id="953d6-117">Le bot ne peut pas être déployé en tant qu'application web Azure.</span><span class="sxs-lookup"><span data-stu-id="953d6-117">The bot cannot be deployed as an Azure web app.</span></span>

- <span data-ttu-id="953d6-118">Le bot doit être en cours d'exécution sur une version récente de la bibliothèque `Microsoft.Graph.Communications.Calls.Media` .NET.</span><span class="sxs-lookup"><span data-stu-id="953d6-118">The bot must be running on a recent version of the `Microsoft.Graph.Communications.Calls.Media` .NET library.</span></span> <span data-ttu-id="953d6-119">Le bot doit utiliser soit la dernière version disponible du [package NuGet,](https://www.nuget.org/packages/Microsoft.Graph.Communications.Calls.Media/)soit une version qui n'a pas plus de trois mois.</span><span class="sxs-lookup"><span data-stu-id="953d6-119">The bot must use either the newest available version of the [NuGet package](https://www.nuget.org/packages/Microsoft.Graph.Communications.Calls.Media/), or a version that is not more than three months old.</span></span> <span data-ttu-id="953d6-120">Les versions antérieures de la bibliothèque sont dépréciées et ne fonctionnent pas après quelques mois.</span><span class="sxs-lookup"><span data-stu-id="953d6-120">Older versions of the library are deprecated and do not work after a few months.</span></span> <span data-ttu-id="953d6-121">La mise à jour de la bibliothèque garantit la meilleure interopérabilité `Microsoft.Graph.Communications.Calls.Media` entre le bot et Microsoft Teams.</span><span class="sxs-lookup"><span data-stu-id="953d6-121">Keeping the `Microsoft.Graph.Communications.Calls.Media` library up-to-date ensures the best interoperability between the bot and Microsoft Teams.</span></span>

<span data-ttu-id="953d6-122">La section suivante fournit des détails sur l'emplacement des appels multimédias en temps réel.</span><span class="sxs-lookup"><span data-stu-id="953d6-122">The next section provides details on where real-time media calls are located.</span></span>

## <a name="real-time-media-calls-stay-where-they-are-created"></a><span data-ttu-id="953d6-123">Les appels multimédias en temps réel restent là où ils sont créés</span><span class="sxs-lookup"><span data-stu-id="953d6-123">Real-time media calls stay where they are created</span></span>

<span data-ttu-id="953d6-124">Les appels multimédias en temps réel restent sur l'ordinateur où ils ont été créés.</span><span class="sxs-lookup"><span data-stu-id="953d6-124">Real-time media calls stay on the computer where they were created.</span></span> <span data-ttu-id="953d6-125">Un appel multimédia en temps réel est épinglé à l'instance de machine virtuelle (VM) qui a accepté ou démarré l'appel.</span><span class="sxs-lookup"><span data-stu-id="953d6-125">A real-time media call is pinned to the virtual machine (VM) instance that accepted or started the call.</span></span> <span data-ttu-id="953d6-126">Le média d'un appel ou d'une réunion Microsoft Teams est envoyé à cette instance de la VM, et le support que le bot renvoie à Microsoft Teams doit également provenir de cette VM.</span><span class="sxs-lookup"><span data-stu-id="953d6-126">Media from a Microsoft Teams call or meeting flows to that VM instance, and media the bot sends back to Microsoft Teams must also originate from that VM.</span></span> <span data-ttu-id="953d6-127">Si des appels multimédias en temps réel sont en cours lorsque la VM est arrêtée, ces appels sont brusquement arrêtés.</span><span class="sxs-lookup"><span data-stu-id="953d6-127">If there are any real-time media calls in progress when the VM is stopped, those calls are abruptly terminated.</span></span> <span data-ttu-id="953d6-128">Si le bot a déjà connaissance de l'arrêt de la VM en attente, il peut mettre fin aux appels.</span><span class="sxs-lookup"><span data-stu-id="953d6-128">If the bot has prior knowledge of the pending VM shutdown, it can end the calls.</span></span>

<span data-ttu-id="953d6-129">La section suivante fournit des détails sur l'accessibilité des robots multimédias hébergés par l'application.</span><span class="sxs-lookup"><span data-stu-id="953d6-129">The next section provides details on accessibility of application-hosted media bots.</span></span>

## <a name="application-hosted-media-bots-accessible-on-the-internet"></a><span data-ttu-id="953d6-130">Bots multimédias hébergés par l'application accessibles sur Internet</span><span class="sxs-lookup"><span data-stu-id="953d6-130">Application-hosted media bots accessible on the internet</span></span>

<span data-ttu-id="953d6-131">Les robots multimédias hébergés par l'application doivent être directement accessibles sur Internet.</span><span class="sxs-lookup"><span data-stu-id="953d6-131">Application-hosted media bots must be directly accessible on the internet.</span></span> <span data-ttu-id="953d6-132">Ces bots doivent inclure les fonctionnalités suivantes :</span><span class="sxs-lookup"><span data-stu-id="953d6-132">These bots must include the following features:</span></span>

- <span data-ttu-id="953d6-133">Chaque instance de la VM hébergeant un bot multimédia hébergé par l'application dans Azure doit être directement accessible à partir d'Internet à l'aide d'une adresse IP publique au niveau de l'instance (ILPIP).</span><span class="sxs-lookup"><span data-stu-id="953d6-133">Each VM instance hosting an application-hosted media bot in Azure must be directly accessible from the internet using an instance-level public IP address (ILPIP).</span></span>
    - <span data-ttu-id="953d6-134">Pour obtenir et configurer un ILPIP pour un service cloud Azure, consultez la vue d'ensemble de l'adresse IP publique classique au niveau de [l'instance.](/azure/virtual-network/virtual-networks-instance-level-public-ip)</span><span class="sxs-lookup"><span data-stu-id="953d6-134">For obtaining and configuring an ILPIP for an Azure Cloud Service, see [instance level public IP classic overview](/azure/virtual-network/virtual-networks-instance-level-public-ip).</span></span>
    - <span data-ttu-id="953d6-135">Pour configurer un ILPIP pour un jeu d'échelles d'ordinateur virtuel, voir [public IPv4 par machine virtuelle](/azure/virtual-machine-scale-sets/virtual-machine-scale-sets-networking#public-ipv4-per-virtual-machine).</span><span class="sxs-lookup"><span data-stu-id="953d6-135">For configuring an ILPIP for a VM Scale Set, see [public IPv4 per virtual machine](/azure/virtual-machine-scale-sets/virtual-machine-scale-sets-networking#public-ipv4-per-virtual-machine).</span></span>
- <span data-ttu-id="953d6-136">Le service hébergeant un bot multimédia hébergé par l'application doit également configurer chaque instance d'une vm avec un port public qui est mapmé sur l'instance spécifique.</span><span class="sxs-lookup"><span data-stu-id="953d6-136">The service hosting an application-hosted media bot must also configure each VM instance with a public-facing port which maps to the specific instance.</span></span>
    - <span data-ttu-id="953d6-137">Pour un service Cloud Azure, cela nécessite un point de terminaison d'entrée d'instance.</span><span class="sxs-lookup"><span data-stu-id="953d6-137">For an Azure Cloud Service, this requires an instance input endpoint.</span></span> <span data-ttu-id="953d6-138">Pour plus d'informations, voir [activer la communication pour les instances de rôle dans Azure.](/azure/cloud-services/cloud-services-enable-communication-role-instances)</span><span class="sxs-lookup"><span data-stu-id="953d6-138">For more information, see [enable communication for role instances in Azure](/azure/cloud-services/cloud-services-enable-communication-role-instances).</span></span>
    - <span data-ttu-id="953d6-139">Pour un jeu d'échelles de vm, une règle NAT sur l'équilibrage de charge doit être configurée.</span><span class="sxs-lookup"><span data-stu-id="953d6-139">For a VM Scale Set, a NAT rule on the load balancer must be configured.</span></span> <span data-ttu-id="953d6-140">Pour plus d'informations, [voir les réseaux virtuels et les machines virtuelles dans Azure.](/azure/virtual-machines/windows/network-overview)</span><span class="sxs-lookup"><span data-stu-id="953d6-140">For more information, see [virtual networks and virtual machines in Azure](/azure/virtual-machines/windows/network-overview).</span></span>
- <span data-ttu-id="953d6-141">Les bots multimédias hébergés par l'application ne sont pas pris en charge par l'émulateur Bot Framework.</span><span class="sxs-lookup"><span data-stu-id="953d6-141">Application-hosted media bots are not supported by the Bot Framework Emulator.</span></span>

<span data-ttu-id="953d6-142">La section suivante fournit des détails sur l'évolutivité et les performances des robots multimédias hébergés par l'application.</span><span class="sxs-lookup"><span data-stu-id="953d6-142">The next section provides details on scalability and performance considerations of application-hosted media bots.</span></span>

## <a name="scalability-and-performance-considerations"></a><span data-ttu-id="953d6-143">Considérations relatives à l’évolutivité et aux performances</span><span class="sxs-lookup"><span data-stu-id="953d6-143">Scalability and performance considerations</span></span>

<span data-ttu-id="953d6-144">Les bots multimédias hébergés par l'application nécessitent les considérations suivantes en ce qui a lieu en ce qui a été question de l'évolutivité et des performances :</span><span class="sxs-lookup"><span data-stu-id="953d6-144">Application-hosted media bots require the following scalability and performance considerations:</span></span>

## <a name="code-sample"></a><span data-ttu-id="953d6-145">Exemple de code</span><span class="sxs-lookup"><span data-stu-id="953d6-145">Code sample</span></span>

<span data-ttu-id="953d6-146">Les exemples de bots multimédias hébergés par l'application sont les suivants :</span><span class="sxs-lookup"><span data-stu-id="953d6-146">Application-hosted media bots samples are as follows:</span></span>

| <span data-ttu-id="953d6-147">**Exemple de nom**</span><span class="sxs-lookup"><span data-stu-id="953d6-147">**Sample name**</span></span> | <span data-ttu-id="953d6-148">**Description**</span><span class="sxs-lookup"><span data-stu-id="953d6-148">**Description**</span></span> | <span data-ttu-id="953d6-149">**Graph**</span><span class="sxs-lookup"><span data-stu-id="953d6-149">**Graph**</span></span> |
|------------|-------------|-----------|
| <span data-ttu-id="953d6-150">Exemple de média local</span><span class="sxs-lookup"><span data-stu-id="953d6-150">Local media sample</span></span> | <span data-ttu-id="953d6-151">Exemples illustrant différents scénarios de médias locaux.</span><span class="sxs-lookup"><span data-stu-id="953d6-151">Samples that illustrates different local media scenarios.</span></span> | [<span data-ttu-id="953d6-152">View</span><span class="sxs-lookup"><span data-stu-id="953d6-152">View</span></span>](https://github.com/microsoftgraph/microsoft-graph-comms-samples/tree/master/Samples/V1.0Samples/LocalMediaSamples) |
| <span data-ttu-id="953d6-153">Exemple de média distant</span><span class="sxs-lookup"><span data-stu-id="953d6-153">Remote media sample</span></span> | <span data-ttu-id="953d6-154">Exemples illustrant différents scénarios de médias distants.</span><span class="sxs-lookup"><span data-stu-id="953d6-154">Samples that illustrates different remote media scenarios.</span></span> | [<span data-ttu-id="953d6-155">View</span><span class="sxs-lookup"><span data-stu-id="953d6-155">View</span></span>](https://github.com/microsoftgraph/microsoft-graph-comms-samples/tree/master/Samples/V1.0Samples/RemoteMediaSamples) |

## <a name="see-also"></a><span data-ttu-id="953d6-156">Voir aussi</span><span class="sxs-lookup"><span data-stu-id="953d6-156">See also</span></span>

- [<span data-ttu-id="953d6-157">Graph Calling SDK Documentation</span><span class="sxs-lookup"><span data-stu-id="953d6-157">Graph Calling SDK Documentation</span></span>](https://microsoftgraph.github.io/microsoft-graph-comms-samples/docs/)
- <span data-ttu-id="953d6-158">Les bots nécessitent plus de capacité de calcul et de bande passante réseau que les bots de messagerie et encourent des coûts d'exploitation beaucoup plus élevés.</span><span class="sxs-lookup"><span data-stu-id="953d6-158">The bots require more compute and network bandwidth capacity than messaging bots and incur significantly higher operational costs.</span></span> <span data-ttu-id="953d6-159">Un développeur de bot multimédia en temps réel doit mesurer avec soin l'évolutivité du bot et s'assurer qu'il n'accepte pas plus d'appels simultanés qu'il ne peut gérer.</span><span class="sxs-lookup"><span data-stu-id="953d6-159">A real-time media bot developer must carefully measure the bot's scalability, and ensure the bot does not accept more simultaneous calls than it can manage.</span></span> <span data-ttu-id="953d6-160">Un bot vidéo ne peut supporter qu'une ou deux sessions multimédias simultanées par cœur d'UC si vous utilisez les formats vidéo RGB24 ou NV12 bruts.</span><span class="sxs-lookup"><span data-stu-id="953d6-160">A video-enabled bot can sustain only one or two concurrent media sessions per CPU core if using the raw RGB24 or NV12 video formats.</span></span>
- <span data-ttu-id="953d6-161">La plateforme Real-time Media ne tire actuellement parti d'aucune unité de traitement graphique (GPU) disponible sur la VM pour décharger le codage ou le décodage vidéo H.264.</span><span class="sxs-lookup"><span data-stu-id="953d6-161">The Real-time Media Platform does not currently take advantage of any Graphics Processing Units (GPU) available on the VM to off-load H.264 video encoding or decoding.</span></span> <span data-ttu-id="953d6-162">Au lieu de cela, le code vidéo et le décodage sont effectués dans le logiciel sur l'UC.</span><span class="sxs-lookup"><span data-stu-id="953d6-162">Instead, video encode and decode are done in software on the CPU.</span></span> <span data-ttu-id="953d6-163">Si un processeur graphique est disponible, le bot en tire parti pour son propre rendu graphique, par exemple, si le bot utilise un moteur graphique 3D.</span><span class="sxs-lookup"><span data-stu-id="953d6-163">If a GPU is available, the bot takes advantage of it for its own graphics rendering, for example, if the bot is using a 3D graphics engine.</span></span>
- <span data-ttu-id="953d6-164">L'instance de la VM hébergeant le bot multimédia en temps réel doit avoir au moins 2 cœurs d'UC.</span><span class="sxs-lookup"><span data-stu-id="953d6-164">The VM instance hosting the real-time media bot must have at least 2 CPU cores.</span></span> <span data-ttu-id="953d6-165">Pour Azure, une machine virtuelle de série Dv2 est recommandée.</span><span class="sxs-lookup"><span data-stu-id="953d6-165">For Azure, a Dv2-series virtual machine is recommended.</span></span> <span data-ttu-id="953d6-166">Pour les autres types d'ordinateur virtuel Azure, un système avec 4 processeurs virtuels (vCPU) est la taille minimale requise.</span><span class="sxs-lookup"><span data-stu-id="953d6-166">For other Azure VM types, a system with 4 virtual CPUs (vCPU) is the minimum size required.</span></span> <span data-ttu-id="953d6-167">Pour plus d'informations sur les types de vm Azure, voir [la documentation Azure.](/azure/virtual-machines/windows/sizes-general)</span><span class="sxs-lookup"><span data-stu-id="953d6-167">For more information about Azure VM types, see [Azure documentation](/azure/virtual-machines/windows/sizes-general).</span></span>

<span data-ttu-id="953d6-168">La section suivante fournit des exemples illustrant différents scénarios de médias locaux.</span><span class="sxs-lookup"><span data-stu-id="953d6-168">The next section provides samples that illustrate different local media scenarios.</span></span>

## <a name="samples-and-additional-resources"></a><span data-ttu-id="953d6-169">Exemples et ressources supplémentaires</span><span class="sxs-lookup"><span data-stu-id="953d6-169">Samples and additional resources</span></span>

- [<span data-ttu-id="953d6-170">Exemples d'applications</span><span class="sxs-lookup"><span data-stu-id="953d6-170">Sample applications</span></span>](https://github.com/microsoftgraph/microsoft-graph-comms-samples/tree/master/Samples/V1.0Samples/LocalMediaSamples)
- [<span data-ttu-id="953d6-171">Documentation du SDK d'appel Graph</span><span class="sxs-lookup"><span data-stu-id="953d6-171">Graph calling SDK documentation</span></span>](https://microsoftgraph.github.io/microsoft-graph-comms-samples/docs/)

## <a name="next-step"></a><span data-ttu-id="953d6-172">Étape suivante</span><span class="sxs-lookup"><span data-stu-id="953d6-172">Next step</span></span>

> [!div class="nextstepaction"]
> [<span data-ttu-id="953d6-173">Formats multimédias pris en charge</span><span class="sxs-lookup"><span data-stu-id="953d6-173">Supported media formats</span></span>](~/resources/media-formats.md)
