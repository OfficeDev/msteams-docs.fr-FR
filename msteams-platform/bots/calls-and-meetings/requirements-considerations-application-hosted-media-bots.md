---
title: Configuration requise et considérations relatives aux robots multimédia hébergés par l’application
description: Découvrez les conditions requises et les considérations importantes liées à la création de robots multimédia hébergés par l’application pour Microsoft Teams.
keywords: ordinateur virtuel Windows Server Azure hébergé par une application
ms.date: 11/16/2018
ms.openlocfilehash: f5b721edacb11e867d05c8213b74036cb51f419c
ms.sourcegitcommit: fdcd91b270d4c2e98ab2b2c1029c76c49bb807fa
ms.translationtype: MT
ms.contentlocale: fr-FR
ms.lasthandoff: 03/13/2020
ms.locfileid: "44801070"
---
# <a name="requirements-and-considerations-for-application-hosted-media-bots"></a><span data-ttu-id="5feb6-104">Configuration requise et considérations relatives aux robots multimédia hébergés par l’application</span><span class="sxs-lookup"><span data-stu-id="5feb6-104">Requirements and considerations for application-hosted media bots</span></span>

<span data-ttu-id="5feb6-105">Toutes les instructions pour le développement de la messagerie et des robots de réponse vocale interactive (IVR) s’appliquent également à la création de robots multimédia hébergés par l’application.</span><span class="sxs-lookup"><span data-stu-id="5feb6-105">Not all guidance for developing messaging and Interactive Voice Response (IVR) bots applies equally to building application-hosted media bots.</span></span> <span data-ttu-id="5feb6-106">Cet article décrit certaines des exigences et considérations importantes pour le développement et l’exécution d’un robot multimédia hébergé par l’application.</span><span class="sxs-lookup"><span data-stu-id="5feb6-106">This article describes some of the important requirements and considerations for developing and running an application-hosted media bot.</span></span>

> [!NOTE]
> <span data-ttu-id="5feb6-107">Étant donné que la plateforme multimédia Microsoft Real-Time pour les bots est en version préliminaire pour les développeurs, les conseils de cet article sont susceptibles d’être modifiés.</span><span class="sxs-lookup"><span data-stu-id="5feb6-107">Because the Microsoft Real-time Media Platform for Bots is in developer preview, the guidance in this article is subject to change.</span></span>

## <a name="application-hosted-media-bot-development-requires-cnet-and-windows-server"></a><span data-ttu-id="5feb6-108">Le développement de Media bot hébergé par l’application requiert C#/.NET et Windows Server</span><span class="sxs-lookup"><span data-stu-id="5feb6-108">Application-hosted media bot development requires C#/.NET and Windows Server</span></span>

- <span data-ttu-id="5feb6-109">Un robot multimédia hébergé par une application requiert la `Microsoft.Graph.Communications.Calls.Media` bibliothèque .net ([disponible ici](https://www.nuget.org/packages/Microsoft.Graph.Communications.Calls.Media/) pour accéder aux flux multimédia audio et vidéo, et le bot doit être déployé sur un ordinateur Windows Server (ou système d’exploitation Windows Server invité dans Azure).</span><span class="sxs-lookup"><span data-stu-id="5feb6-109">An application-hosted media bot requires the `Microsoft.Graph.Communications.Calls.Media` .NET library ([available here](https://www.nuget.org/packages/Microsoft.Graph.Communications.Calls.Media/) to access the audio and video media streams, and the bot must be deployed on a Windows Server machine (or Windows Server guest OS in Azure).</span></span> <span data-ttu-id="5feb6-110">Par conséquent, le bot doit être développé en C# et dans .NET Framework standard et déployé dans Microsoft Azure.</span><span class="sxs-lookup"><span data-stu-id="5feb6-110">Therefore, the bot must be developed in C# and the standard .NET Framework and deployed in Microsoft Azure.</span></span> <span data-ttu-id="5feb6-111">Vous ne pouvez pas utiliser des API C++ ou Node.js pour accéder à des médias en temps réel et .NET Core n’est pas pris en charge pour un robot multimédia hébergé par une application.</span><span class="sxs-lookup"><span data-stu-id="5feb6-111">You can't use C++ or Node.js APIs to access real-time media and .NET Core is not supported for an application-hosted media bot.</span></span>

- <span data-ttu-id="5feb6-112">Un robot multimédia hébergé par une application peut être hébergé dans l’un des environnements de service Azure suivants :</span><span class="sxs-lookup"><span data-stu-id="5feb6-112">An application-hosted media bot can be hosted within one of the following Azure service environments:</span></span>
  - <span data-ttu-id="5feb6-113">Service Cloud.</span><span class="sxs-lookup"><span data-stu-id="5feb6-113">Cloud Service.</span></span>
  - <span data-ttu-id="5feb6-114">Service Fabric avec des ensembles d’adaptations de machines virtuelles (VMSS).</span><span class="sxs-lookup"><span data-stu-id="5feb6-114">Service Fabric with Virtual Machine Scale Sets (VMSS).</span></span>
  - <span data-ttu-id="5feb6-115">Machine virtuelle IaaS (infrastructure as a service).</span><span class="sxs-lookup"><span data-stu-id="5feb6-115">Infrastructure as a Service (IaaS) Virtual Machine (VM).</span></span>  
  
- <span data-ttu-id="5feb6-116">Un bot multimédia hébergé par l’application ne peut pas être déployé en tant qu’application Web Azure.</span><span class="sxs-lookup"><span data-stu-id="5feb6-116">An application-hosted media bot can't be deployed as an Azure Web App.</span></span>

- <span data-ttu-id="5feb6-117">Un robot multimédia hébergé par une application doit s’exécuter sur une version récente de la `Microsoft.Graph.Communications.Calls.Media` bibliothèque .net.</span><span class="sxs-lookup"><span data-stu-id="5feb6-117">An application-hosted media bot must be running on a recent version of the `Microsoft.Graph.Communications.Calls.Media` .NET library.</span></span> <span data-ttu-id="5feb6-118">Le bot doit utiliser la version disponible la plus récente du [package NuGet](https://www.nuget.org/packages/Microsoft.Graph.Communications.Calls.Media/)ou une version qui n’est pas postérieure à trois mois.</span><span class="sxs-lookup"><span data-stu-id="5feb6-118">The bot should use either the newest available version of the [NuGet package](https://www.nuget.org/packages/Microsoft.Graph.Communications.Calls.Media/), or a version that is not more than three months old.</span></span> <span data-ttu-id="5feb6-119">Les versions antérieures de la bibliothèque seront déconseillées et risquent de ne pas fonctionner après quelques mois.</span><span class="sxs-lookup"><span data-stu-id="5feb6-119">Older versions of the library will be deprecated and may not work after a few months.</span></span> <span data-ttu-id="5feb6-120">La mise à jour de la `Microsoft.Graph.Communications.Calls.Media` bibliothèque garantit une meilleure interopérabilité entre le bot et Microsoft Teams.</span><span class="sxs-lookup"><span data-stu-id="5feb6-120">Keeping the `Microsoft.Graph.Communications.Calls.Media` library up-to-date will ensure the best interoperability between the bot and Microsoft Teams.</span></span>

## <a name="real-time-media-calls-stay-on-the-machine-where-they-were-created"></a><span data-ttu-id="5feb6-121">Les appels multimédia en temps réel restent sur l’ordinateur où ils ont été créés.</span><span class="sxs-lookup"><span data-stu-id="5feb6-121">Real-time media calls stay on the machine where they were created</span></span>

- <span data-ttu-id="5feb6-122">Un appel multimédia en temps réel est épinglé à l’instance de machine virtuelle (VM) qui a accepté ou démarré l’appel.</span><span class="sxs-lookup"><span data-stu-id="5feb6-122">A real-time media call is pinned to the virtual machine (VM) instance that accepted or started the call.</span></span> <span data-ttu-id="5feb6-123">Les médias d’un appel ou d’une réunion Microsoft teams iront vers cette instance VM et les médias renvoyés par le robot à Microsoft teams doivent également provenir de cette machine virtuelle.</span><span class="sxs-lookup"><span data-stu-id="5feb6-123">Media from a Microsoft Teams call or meeting will flow to that VM instance, and media the bot sends back to Microsoft Teams must also originate from that VM.</span></span>
- <span data-ttu-id="5feb6-124">Si des appels multimédia en temps réel sont en cours lors de l’arrêt de l’ordinateur virtuel, ces appels seront brusquement arrêtés.</span><span class="sxs-lookup"><span data-stu-id="5feb6-124">If there are any real-time media calls in progress when the VM is stopped, those calls will be abruptly terminated.</span></span> <span data-ttu-id="5feb6-125">Si le bot a une connaissance préalable de l’arrêt de l’ordinateur virtuel en attente, il peut essayer de terminer les appels de manière « appropriée ».</span><span class="sxs-lookup"><span data-stu-id="5feb6-125">If the bot has prior knowledge of the pending VM shutdown, it can try to "gracefully" end the calls.</span></span>

## <a name="application-hosted-media-bots-must-be-directly-accessible-on-the-internet"></a><span data-ttu-id="5feb6-126">Les robots multimédia hébergés par l’application doivent être directement accessibles sur Internet.</span><span class="sxs-lookup"><span data-stu-id="5feb6-126">Application-hosted media bots must be directly accessible on the internet</span></span>

- <span data-ttu-id="5feb6-127">Chaque instance VM hébergeant un robot multimédia hébergé sur une application dans Azure doit être directement accessible à partir d’Internet à l’aide d’une adresse IP publique au niveau de l’instance (ILPIP).</span><span class="sxs-lookup"><span data-stu-id="5feb6-127">Each VM instance hosting an application-hosted media bot in Azure must be directly accessible from the internet using an instance-level public IP address (ILPIP).</span></span>
  - <span data-ttu-id="5feb6-128">Pour obtenir et configurer un ILPIP pour un service Cloud Azure, voir [instance Level public IP (Classic) Overview](/azure/virtual-network/virtual-networks-instance-level-public-ip).</span><span class="sxs-lookup"><span data-stu-id="5feb6-128">For obtaining and configuring an ILPIP for an Azure Cloud Service, see [Instance level public IP (Classic) overview](/azure/virtual-network/virtual-networks-instance-level-public-ip).</span></span>
  - <span data-ttu-id="5feb6-129">Pour configurer un ILPIP pour un ensemble d’mises à l’ampleur d’une machine virtuelle, consultez [la rubrique public IPv4 per Virtual Machine](/azure/virtual-machine-scale-sets/virtual-machine-scale-sets-networking#public-ipv4-per-virtual-machine).</span><span class="sxs-lookup"><span data-stu-id="5feb6-129">For configuring an ILPIP for a VM Scale Set, see [Public IPv4 per virtual machine](/azure/virtual-machine-scale-sets/virtual-machine-scale-sets-networking#public-ipv4-per-virtual-machine).</span></span>
- <span data-ttu-id="5feb6-130">Le service hébergeant un robot multimédia hébergé par une application doit également configurer chaque instance VM avec un port accessible au public qui mappe à l’instance spécifique.</span><span class="sxs-lookup"><span data-stu-id="5feb6-130">The service hosting an application-hosted media bot must also configure each VM instance with a public-facing port which maps to the specific instance.</span></span>
  - <span data-ttu-id="5feb6-131">Pour un service Cloud Azure, cela nécessite un point de terminaison d’entrée d’instance ; consultez la rubrique [activer la communication pour les instances de rôle dans Azure](/azure/cloud-services/cloud-services-enable-communication-role-instances).</span><span class="sxs-lookup"><span data-stu-id="5feb6-131">For an Azure Cloud Service, this requires an instance input endpoint; see [Enable communication for role instances in Azure](/azure/cloud-services/cloud-services-enable-communication-role-instances).</span></span>
  - <span data-ttu-id="5feb6-132">Pour un ensemble d’ordinateurs VM, une règle NAT sur l’équilibreur de charge doit être configurée ; consultez [la rubrique réseaux virtuels et machines virtuelles dans Azure](/azure/virtual-machines/windows/network-overview).</span><span class="sxs-lookup"><span data-stu-id="5feb6-132">For a VM Scale Set, a NAT rule on the load balancer must be configured; see [Virtual networks and virtual machines in Azure](/azure/virtual-machines/windows/network-overview).</span></span>
- <span data-ttu-id="5feb6-133">Les robots multimédias hébergés par l’application ne sont pas pris en charge par l’émulateur de l’infrastructure bot.</span><span class="sxs-lookup"><span data-stu-id="5feb6-133">Application-hosted media bots aren't supported by the Bot Framework Emulator.</span></span>

## <a name="scalability-and-performance-considerations"></a><span data-ttu-id="5feb6-134">Considérations relatives à l’évolutivité et aux performances</span><span class="sxs-lookup"><span data-stu-id="5feb6-134">Scalability and performance considerations</span></span>

- <span data-ttu-id="5feb6-135">Les robots multimédias hébergés par l’application nécessitent davantage de capacité de calcul et de réseau (bande passante) que les robots de messagerie et peuvent entraîner des coûts d’exploitation sensiblement plus élevés.</span><span class="sxs-lookup"><span data-stu-id="5feb6-135">Application-hosted media bots require more compute and network (bandwidth) capacity than messaging bots and may incur significantly higher operational costs.</span></span> <span data-ttu-id="5feb6-136">Un développeur de robots multimédia en temps réel doit mesurer soigneusement l’évolutivité du robot et s’assurer que le bot n’accepte pas plus d’appels simultanés qu’il ne peut en gérer.</span><span class="sxs-lookup"><span data-stu-id="5feb6-136">A real-time media bot developer must carefully measure the bot's scalability, and ensure the bot doesn't accept more simultaneous calls than it can manage.</span></span> <span data-ttu-id="5feb6-137">Un bot vidéo peut ne prendre en charge qu’une ou deux sessions multimédia simultanées par processeur (en cas d’utilisation des formats vidéo RGB24 ou NV12).</span><span class="sxs-lookup"><span data-stu-id="5feb6-137">A video-enabled bot may be able to sustain only one or two concurrent media sessions per CPU core (if using the "raw" RGB24 or NV12 video formats).</span></span>
- <span data-ttu-id="5feb6-138">La plateforme multimédia en temps réel ne bénéficie actuellement d’aucune unité de traitement graphique (GPU) disponible sur l’ordinateur virtuel pour décharger le codage/décodage vidéo H. 264 H. 264.</span><span class="sxs-lookup"><span data-stu-id="5feb6-138">The Real-time Media Platform doesn't currently take advantage of any Graphics Processing Units (GPU) available on the VM to off-load H.264 video encoding/decoding.</span></span> <span data-ttu-id="5feb6-139">Au lieu de cela, le codage et le décodage vidéo sont effectués dans le logiciel du processeur.</span><span class="sxs-lookup"><span data-stu-id="5feb6-139">Instead, video encode and decode are done in software on the CPU.</span></span> <span data-ttu-id="5feb6-140">Si une unité GPU est disponible, le bot peut en tirer parti pour son propre rendu graphique (par exemple, si le bot utilise un moteur graphique 3D).</span><span class="sxs-lookup"><span data-stu-id="5feb6-140">If a GPU is available, the bot may take advantage of it for its own graphics rendering (e.g. if the bot is using a 3D graphics engine).</span></span>
- <span data-ttu-id="5feb6-141">L’instance VM hébergeant le robot multimédia en temps réel doit avoir au moins 2 cœurs d’UC.</span><span class="sxs-lookup"><span data-stu-id="5feb6-141">The VM instance hosting the real-time media bot must have at least 2 CPU cores.</span></span> <span data-ttu-id="5feb6-142">Pour Azure, il est recommandé d’avoir un ordinateur virtuel dv2 Series.</span><span class="sxs-lookup"><span data-stu-id="5feb6-142">For Azure, a Dv2-series virtual machine is recommended.</span></span> <span data-ttu-id="5feb6-143">Pour les autres types de machines virtuelles Azure, un système doté de 4 processeurs virtuels (CPU) est la taille minimale requise.</span><span class="sxs-lookup"><span data-stu-id="5feb6-143">For other Azure VM types, a system with 4 virtual CPUs (vCPU) is the minimum size required.</span></span> <span data-ttu-id="5feb6-144">Des informations détaillées sur les types de machines virtuelles Azure sont disponibles dans la [documentation Azure](/azure/virtual-machines/windows/sizes-general).</span><span class="sxs-lookup"><span data-stu-id="5feb6-144">Detailed information about Azure VM types is available in the [Azure documentation](/azure/virtual-machines/windows/sizes-general).</span></span>

## <a name="samples-and-additional-resources"></a><span data-ttu-id="5feb6-145">Exemples et ressources supplémentaires</span><span class="sxs-lookup"><span data-stu-id="5feb6-145">Samples and Additional Resources</span></span>

- [<span data-ttu-id="5feb6-146">Exemples d’applications</span><span class="sxs-lookup"><span data-stu-id="5feb6-146">Sample applications</span></span>](https://github.com/microsoftgraph/microsoft-graph-comms-samples/tree/master/Samples/V1.0Samples/LocalMediaSamples)
- [<span data-ttu-id="5feb6-147">Documentation du kit de développement logiciel appelant Graph</span><span class="sxs-lookup"><span data-stu-id="5feb6-147">Graph Calling SDK Documentation</span></span>](https://microsoftgraph.github.io/microsoft-graph-comms-samples/docs/)
