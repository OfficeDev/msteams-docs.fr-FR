---
title: Inscription d’un robot de réunion et d’appel pour Microsoft teams
description: Découvrez comment enregistrer un nouveau robot d’appel audio/vidéo pour Microsoft teams
keywords: appels audio/vidéo vidéo audio/vidéo
ms.openlocfilehash: d38b9584440bcff664bd3a2d4b57e52bc695f1b5
ms.sourcegitcommit: 64acd30eee8af5fe151e9866c13226ed3f337c72
ms.translationtype: MT
ms.contentlocale: fr-FR
ms.lasthandoff: 11/18/2020
ms.locfileid: "49346846"
---
# <a name="register-a-calling-bot-for-microsoft-teams"></a><span data-ttu-id="0a11d-104">Enregistrer un bot appelant pour Microsoft teams</span><span class="sxs-lookup"><span data-stu-id="0a11d-104">Register a calling bot for Microsoft Teams</span></span>

<span data-ttu-id="0a11d-105">Un bot qui participe à des appels audio/vidéo et des réunions en ligne est un robot Microsoft teams ordinaire avec quelques fonctionnalités supplémentaires :</span><span class="sxs-lookup"><span data-stu-id="0a11d-105">A bot that participates in audio/video calls and online meetings is an ordinary Microsoft Teams bot with a few extra features:</span></span>

* <span data-ttu-id="0a11d-106">Il existe une nouvelle version du manifeste de l’application teams avec deux paramètres supplémentaires, `supportsCalling` et `supportsVideo` .</span><span class="sxs-lookup"><span data-stu-id="0a11d-106">There's a new version of the Teams app manifest with two additional settings, `supportsCalling` and `supportsVideo`.</span></span> <span data-ttu-id="0a11d-107">Ces paramètres sont inclus dans la version d' [évaluation du développeur](../../resources/dev-preview/developer-preview-intro.md) du manifeste de l’application Microsoft Teams.</span><span class="sxs-lookup"><span data-stu-id="0a11d-107">These settings are included in the [Developer Preview](../../resources/dev-preview/developer-preview-intro.md) version of the Microsoft Teams app manifest.</span></span>
* <span data-ttu-id="0a11d-108">Les [autorisations Microsoft Graph](./registering-calling-bot.md#add-microsoft-graph-permissions) doivent être configurées pour l’ID d’application Microsoft de votre robot.</span><span class="sxs-lookup"><span data-stu-id="0a11d-108">[Microsoft Graph permissions](./registering-calling-bot.md#add-microsoft-graph-permissions) must be configured for your bot's Microsoft App ID.</span></span>
* <span data-ttu-id="0a11d-109">Les autorisations d’appels et d’API de réunions en ligne de Microsoft Graph nécessitent un consentement de l’administrateur client.</span><span class="sxs-lookup"><span data-stu-id="0a11d-109">The Microsoft Graph calls and online meetings APIs permissions require tenant admin consent.</span></span>

<span data-ttu-id="0a11d-110">Nous allons étudier ce qui précède plus en détail.</span><span class="sxs-lookup"><span data-stu-id="0a11d-110">Let's discuss the above in more detail.</span></span>

## <a name="new-manifest-settings"></a><span data-ttu-id="0a11d-111">Nouveaux paramètres de manifeste</span><span class="sxs-lookup"><span data-stu-id="0a11d-111">New manifest settings</span></span>

<span data-ttu-id="0a11d-112">Les robots d’appels et de réunions en ligne ont deux paramètres supplémentaires dans la manifest.jssur qui activent l’audio/vidéo pour votre robot dans Teams.</span><span class="sxs-lookup"><span data-stu-id="0a11d-112">Calling and online meetings bots have two additional settings in the manifest.json that enable audio/video for your bot in Teams.</span></span>

* <span data-ttu-id="0a11d-113">`bots[0].supportsCalling`.</span><span class="sxs-lookup"><span data-stu-id="0a11d-113">`bots[0].supportsCalling`.</span></span> <span data-ttu-id="0a11d-114">S’il est présent et défini sur `true` , teams permettra à votre bot de participer à des appels et réunions en ligne.</span><span class="sxs-lookup"><span data-stu-id="0a11d-114">If present and set to `true`, Teams will allow your bot to participate in calls and online meetings.</span></span>
* <span data-ttu-id="0a11d-115">`bots[0].supportsVideo`.</span><span class="sxs-lookup"><span data-stu-id="0a11d-115">`bots[0].supportsVideo`.</span></span> <span data-ttu-id="0a11d-116">S’il est présent et défini sur `true` , teams sait que votre bot prend en charge la vidéo.</span><span class="sxs-lookup"><span data-stu-id="0a11d-116">If present and set to `true`, Teams knows that your bot supports video.</span></span>

<span data-ttu-id="0a11d-117">Si vous souhaitez que votre IDE valide correctement les manifest.jssur le schéma de votre appel et de votre robot de réunion pour ces valeurs, vous pouvez modifier l' `$schema` attribut comme suit :</span><span class="sxs-lookup"><span data-stu-id="0a11d-117">If you want your IDE to properly validate the manifest.json schema for your calling and meeting bot for these values, you can change the `$schema` attribute as follows:</span></span>

```json
"$schema": "https://raw.githubusercontent.com/OfficeDev/microsoft-teams-app-schema/preview/DevPreview/MicrosoftTeams.schema.json",
```

## <a name="creating-a-new-bot-or-adding-calling-capabilities-to-an-existing-bot"></a><span data-ttu-id="0a11d-118">Création d’un nouveau Bot ou ajout de fonctionnalités d’appel à un bot existant</span><span class="sxs-lookup"><span data-stu-id="0a11d-118">Creating a new bot or adding calling capabilities to an existing bot</span></span>

<span data-ttu-id="0a11d-119">La création d’un nouveau Bot est décrite plus en détail dans la rubrique [créer un bot pour Microsoft teams](../how-to/create-a-bot-for-teams.md) , mais nous allons répéter une partie de celle-ci ici :</span><span class="sxs-lookup"><span data-stu-id="0a11d-119">Creating a new bot is covered in more detail in the [Create a bot for Microsoft Teams](../how-to/create-a-bot-for-teams.md) topic, but we'll repeat some of it here:</span></span>

1. <span data-ttu-id="0a11d-120">Utilisez ce lien pour créer un nouveau robot : `https://dev.botframework.com/bots/new` .</span><span class="sxs-lookup"><span data-stu-id="0a11d-120">Use this link to create a new bot: `https://dev.botframework.com/bots/new`.</span></span> <span data-ttu-id="0a11d-121">Si, au lieu de cela, vous sélectionnez le bouton *créer un bot* dans le portail de l’infrastructure bot, vous allez créer votre robot dans Microsoft Azure, pour lequel vous aurez besoin d’un compte Azure.</span><span class="sxs-lookup"><span data-stu-id="0a11d-121">If, instead,  you select the *Create a bot* button in the Bot Framework portal, you will create your bot in Microsoft Azure, for which you'll need an Azure account.</span></span>
1. <span data-ttu-id="0a11d-122">Ajoutez le canal Microsoft Teams.</span><span class="sxs-lookup"><span data-stu-id="0a11d-122">Add the Microsoft Teams channel.</span></span> <span data-ttu-id="0a11d-123">Cliquez sur l’onglet « appel » de la page de la chaîne Microsoft teams et sélectionnez **activer l’appel**, puis mettez à jour **webhook (pour les appels)** avec votre URL https dans laquelle vous recevrez des notifications entrantes, par exemple `https://contoso.com/teamsapp/api/calling` .</span><span class="sxs-lookup"><span data-stu-id="0a11d-123">Click on the "Calling" tab on the Microsoft Teams channel page and select **Enable calling**, and then update **Webhook (for calling)** with your HTTPS URL where you will receive incoming notifications, e.g.`https://contoso.com/teamsapp/api/calling`.</span></span> <span data-ttu-id="0a11d-124">Reportez-vous à la rubrique [Configuring Channels](/bot-framework/portal-configure-channels) pour plus d’informations sur la configuration des canaux.</span><span class="sxs-lookup"><span data-stu-id="0a11d-124">Refer to [Configuring Channels](/bot-framework/portal-configure-channels) for more information on how to configure channels.</span></span>
  <span data-ttu-id="0a11d-125">![Configurer les informations de canal Microsoft teams](~/assets/images/calls-and-meetings/configure-msteams-channel.png)</span><span class="sxs-lookup"><span data-stu-id="0a11d-125">![Configure Microsoft Teams channel information](~/assets/images/calls-and-meetings/configure-msteams-channel.png)</span></span>

## <a name="add-microsoft-graph-permissions"></a><span data-ttu-id="0a11d-126">Ajouter des autorisations Microsoft Graph</span><span class="sxs-lookup"><span data-stu-id="0a11d-126">Add Microsoft Graph permissions</span></span>

<span data-ttu-id="0a11d-127">Microsoft Graph expose des autorisations granulaires qui contrôlent l’accès des applications aux ressources.</span><span class="sxs-lookup"><span data-stu-id="0a11d-127">Microsoft Graph exposes granular permissions controlling the access that apps have to resources.</span></span> <span data-ttu-id="0a11d-128">En tant que développeur, vous décidez des autorisations demandées par votre application pour Microsoft Graph.</span><span class="sxs-lookup"><span data-stu-id="0a11d-128">As a developer, you decide which permissions for Microsoft Graph your app requests.</span></span>  <span data-ttu-id="0a11d-129">Les API d’appel Microsoft Graph prennent en charge les _autorisations d’application_, qui sont utilisées par les applications qui s’exécutent sans utilisateur connecté présent.</span><span class="sxs-lookup"><span data-stu-id="0a11d-129">The Microsoft Graph Calling APIs support _Application permissions_, which are used by apps that run without a signed-in user present.</span></span>  <span data-ttu-id="0a11d-130">Un administrateur client doit accorder le consentement aux autorisations d’application.</span><span class="sxs-lookup"><span data-stu-id="0a11d-130">A tenant administrator must grant consent to application permissions.</span></span> <span data-ttu-id="0a11d-131">Vous trouverez ci-dessous une liste de ces autorisations :</span><span class="sxs-lookup"><span data-stu-id="0a11d-131">Below is a list of those permissions:</span></span>

### <a name="application-permissions-calls"></a><span data-ttu-id="0a11d-132">Autorisations d’application : appels</span><span class="sxs-lookup"><span data-stu-id="0a11d-132">Application permissions: calls</span></span>

|<span data-ttu-id="0a11d-133">Autorisation</span><span class="sxs-lookup"><span data-stu-id="0a11d-133">Permission</span></span>    |<span data-ttu-id="0a11d-134">Chaîne d’affichage</span><span class="sxs-lookup"><span data-stu-id="0a11d-134">Display String</span></span>   |<span data-ttu-id="0a11d-135">Description</span><span class="sxs-lookup"><span data-stu-id="0a11d-135">Description</span></span> |<span data-ttu-id="0a11d-136">Autorisation de l’administrateur requise</span><span class="sxs-lookup"><span data-stu-id="0a11d-136">Admin Consent Required</span></span> |
|:-----------------------------|:-----------------------------------------|:-----------------|:-----------------|
|<span data-ttu-id="0a11d-137">_Calls.Initiate.All_</span><span class="sxs-lookup"><span data-stu-id="0a11d-137">_Calls.Initiate.All_</span></span>|<span data-ttu-id="0a11d-138">Lancer les appels sortants 1:1 depuis l’application (aperçu)</span><span class="sxs-lookup"><span data-stu-id="0a11d-138">Initiate outgoing 1:1 calls from the app (preview)</span></span>|<span data-ttu-id="0a11d-139">Permet à l’application de passer des appels sortants à un seul utilisateur et de transférer des appels à des utilisateurs dans l’annuaire de votre organisation, sans utilisateur connecté.</span><span class="sxs-lookup"><span data-stu-id="0a11d-139">Allows the app to place outbound calls to a single user and transfer calls to users in your organization’s directory, without a signed-in user.</span></span>|<span data-ttu-id="0a11d-140">Oui</span><span class="sxs-lookup"><span data-stu-id="0a11d-140">Yes</span></span>|
|<span data-ttu-id="0a11d-141">_Calls.InitiateGroupCall.All_</span><span class="sxs-lookup"><span data-stu-id="0a11d-141">_Calls.InitiateGroupCall.All_</span></span>|<span data-ttu-id="0a11d-142">Lancer les appels de groupe sortants 1:1 depuis l’application (aperçu)</span><span class="sxs-lookup"><span data-stu-id="0a11d-142">Initiate outgoing group calls from the app (preview)</span></span>|<span data-ttu-id="0a11d-143">Permet à l’application de passer des appels sortants à plusieurs utilisateurs et d’ajouter des participants à des réunions dans votre organisation, sans utilisateur connecté.</span><span class="sxs-lookup"><span data-stu-id="0a11d-143">Allows the app to place outbound calls to multiple users and add participants to meetings in your organization, without a signed-in user.</span></span>|<span data-ttu-id="0a11d-144">Oui</span><span class="sxs-lookup"><span data-stu-id="0a11d-144">Yes</span></span>|
|<span data-ttu-id="0a11d-145">_Calls.JoinGroupCall.All_</span><span class="sxs-lookup"><span data-stu-id="0a11d-145">_Calls.JoinGroupCall.All_</span></span>|<span data-ttu-id="0a11d-146">Participer à des réunions et à des appels de groupe en tant qu’application (aperçu)</span><span class="sxs-lookup"><span data-stu-id="0a11d-146">Join Group Calls and Meetings as an app (preview)</span></span>|<span data-ttu-id="0a11d-p107">Allows the app to join group calls and scheduled meetings in your organization, without a signed-in user. The app will be joined with the privileges of a directory user to meetings in your tenant.</span><span class="sxs-lookup"><span data-stu-id="0a11d-p107">Allows the app to join group calls and scheduled meetings in your organization, without a signed-in user. The app will be joined with the privileges of a directory user to meetings in your tenant.</span></span>|<span data-ttu-id="0a11d-149">Oui</span><span class="sxs-lookup"><span data-stu-id="0a11d-149">Yes</span></span>|
|<span data-ttu-id="0a11d-150">_Calls.JoinGroupCallasGuest.All_</span><span class="sxs-lookup"><span data-stu-id="0a11d-150">_Calls.JoinGroupCallasGuest.All_</span></span>|<span data-ttu-id="0a11d-151">Participer à des réunions et à des appels de groupe en tant qu’invité (aperçu)</span><span class="sxs-lookup"><span data-stu-id="0a11d-151">Join Group Calls and Meetings as a guest (preview)</span></span>|<span data-ttu-id="0a11d-p108">Allows the app to anonymously join group calls and scheduled meetings in your organization, without a signed-in user. The app will be joined as a guest to meetings in your tenant.</span><span class="sxs-lookup"><span data-stu-id="0a11d-p108">Allows the app to anonymously join group calls and scheduled meetings in your organization, without a signed-in user. The app will be joined as a guest to meetings in your tenant.</span></span>|<span data-ttu-id="0a11d-154">Oui</span><span class="sxs-lookup"><span data-stu-id="0a11d-154">Yes</span></span>|
|<span data-ttu-id="0a11d-155">_Calls. AccessMedia. All_ <sup> _voir ci-dessous_</sup></span><span class="sxs-lookup"><span data-stu-id="0a11d-155">_Calls.AccessMedia.All_ <sup>_see below_</sup></span></span>|<span data-ttu-id="0a11d-156">Accéder aux flux multimédias dans un appel en tant qu’application (aperçu)</span><span class="sxs-lookup"><span data-stu-id="0a11d-156">Access media streams in a call as an app (preview)</span></span>|<span data-ttu-id="0a11d-157">Permet à l’application d’obtenir un accès direct aux flux multimédias dans un appel, sans utilisateur connecté.</span><span class="sxs-lookup"><span data-stu-id="0a11d-157">Allows the app to get direct access to media streams in a call, without a signed-in user.</span></span>|<span data-ttu-id="0a11d-158">Oui</span><span class="sxs-lookup"><span data-stu-id="0a11d-158">Yes</span></span>|

> [!IMPORTANT]
> <span data-ttu-id="0a11d-159">Vous **ne pouvez pas** utiliser l’API Microsoft. Graph. Calls. Media pour enregistrer ou conserver un contenu multimédia à partir d’appels ou de réunions auxquels votre bot accède.</span><span class="sxs-lookup"><span data-stu-id="0a11d-159">You **cannot** use the Microsoft.Graph.Calls.Media API to record or otherwise persist media content from calls or meetings that your bot accesses.</span></span>

### <a name="application-permissions-online-meetings"></a><span data-ttu-id="0a11d-160">Autorisations d’application : réunions en ligne</span><span class="sxs-lookup"><span data-stu-id="0a11d-160">Application permissions: online meetings</span></span>

|<span data-ttu-id="0a11d-161">Autorisation</span><span class="sxs-lookup"><span data-stu-id="0a11d-161">Permission</span></span>    |<span data-ttu-id="0a11d-162">Chaîne d’affichage</span><span class="sxs-lookup"><span data-stu-id="0a11d-162">Display String</span></span>   |<span data-ttu-id="0a11d-163">Description</span><span class="sxs-lookup"><span data-stu-id="0a11d-163">Description</span></span> |<span data-ttu-id="0a11d-164">Autorisation de l’administrateur requise</span><span class="sxs-lookup"><span data-stu-id="0a11d-164">Admin Consent Required</span></span> |
|:-----------------------------|:-----------------------------------------|:-----------------|:-----------------|
|<span data-ttu-id="0a11d-165">_OnlineMeetings.Read.All_</span><span class="sxs-lookup"><span data-stu-id="0a11d-165">_OnlineMeetings.Read.All_</span></span>|<span data-ttu-id="0a11d-166">Lire les détails de la réunion en ligne à partir de l’application (aperçu)</span><span class="sxs-lookup"><span data-stu-id="0a11d-166">Read Online Meeting details from the app (preview)</span></span>|<span data-ttu-id="0a11d-167">Permet à l’application de lire tous les détails de la réunion en ligne dans votre organisation, sans utilisateur connectéé.</span><span class="sxs-lookup"><span data-stu-id="0a11d-167">Allows the app to read Online Meeting details in your organization, without a signed-in user.</span></span>|<span data-ttu-id="0a11d-168">Oui</span><span class="sxs-lookup"><span data-stu-id="0a11d-168">Yes</span></span>|
|<span data-ttu-id="0a11d-169">_OnlineMeetings.ReadWrite.All_</span><span class="sxs-lookup"><span data-stu-id="0a11d-169">_OnlineMeetings.ReadWrite.All_</span></span>|<span data-ttu-id="0a11d-170">Lire et créer des réunions en ligne à partir de l’application (aperçu) au nom d’un utilisateur</span><span class="sxs-lookup"><span data-stu-id="0a11d-170">Read and Create Online Meetings from the app (preview) on behalf of a user</span></span>|<span data-ttu-id="0a11d-171">Permet à l’application de créer des réunions en ligne dans votre organisation au nom d’un utilisateur, sans utilisateur connecté.</span><span class="sxs-lookup"><span data-stu-id="0a11d-171">Allows the app to create Online Meetings in your organization on behalf of a user, without a signed-in user.</span></span>|<span data-ttu-id="0a11d-172">Oui</span><span class="sxs-lookup"><span data-stu-id="0a11d-172">Yes</span></span>|

### <a name="assigning-permissions"></a><span data-ttu-id="0a11d-173">Attribution d'autorisations</span><span class="sxs-lookup"><span data-stu-id="0a11d-173">Assigning permissions</span></span>

<span data-ttu-id="0a11d-174">Si vous préférez utiliser le [point de terminaison Azure ad v1](/azure/active-directory/develop/azure-ad-endpoint-comparison), vous devez configurer les autorisations d’application pour votre robot à l’aide du [portail Azure](https://aka.ms/aadapplist) .</span><span class="sxs-lookup"><span data-stu-id="0a11d-174">You must configure the application permissions for your bot in advance by using the [Azure portal](https://aka.ms/aadapplist) if you prefer to use the [Azure AD V1 endpoint](/azure/active-directory/develop/azure-ad-endpoint-comparison).</span></span>

### <a name="getting-tenant-administrator-consent"></a><span data-ttu-id="0a11d-175">Obtention du consentement de l’administrateur client</span><span class="sxs-lookup"><span data-stu-id="0a11d-175">Getting tenant administrator consent</span></span>

<span data-ttu-id="0a11d-176">Pour les applications qui utilisent le point de terminaison Azure AD v1, un administrateur client peut accorder des autorisations d’application à l’aide du [portail Azure](https://portal.azure.com) lorsque votre application est installée dans son organisation, ou vous pouvez fournir une expérience d’inscription dans votre application grâce à laquelle les administrateurs peuvent consentir aux autorisations que vous avez configurées.</span><span class="sxs-lookup"><span data-stu-id="0a11d-176">For apps using the Azure AD V1 endpoint, a tenant administrator can consent to the application permissions using the [Azure portal](https://portal.azure.com) when your app is installed in their organization, or you can provide a sign-up experience in your app through which administrators can consent to the permissions you configured.</span></span> <span data-ttu-id="0a11d-177">Une fois le consentement de l’administrateur enregistré par Azure AD, votre application peut demander des jetons sans avoir à demander de nouveau l’autorisation.</span><span class="sxs-lookup"><span data-stu-id="0a11d-177">Once administrator consent is recorded by Azure AD, your app can request tokens without having to request consent again.</span></span>

<span data-ttu-id="0a11d-178">Vous pouvez compter sur un administrateur pour accorder les autorisations dont votre application a besoin sur le [portail Azure](https://portal.azure.com); Toutefois, il est souvent préférable de fournir une expérience d’abonnement pour les administrateurs à l’aide du point de terminaison Azure AD v2 `/adminconsent` .</span><span class="sxs-lookup"><span data-stu-id="0a11d-178">You can rely on an administrator to grant the permissions your app needs at the [Azure portal](https://portal.azure.com); though, often a better option is to provide a sign-up experience for administrators by using the Azure AD V2 `/adminconsent` endpoint.</span></span>  <span data-ttu-id="0a11d-179">Pour plus d’informations, reportez-vous aux [instructions sur la création d’une URL de consentement d’administrateur](https://developer.microsoft.com/graph/docs/concepts/auth_v2_service#3-get-administrator-consent) .</span><span class="sxs-lookup"><span data-stu-id="0a11d-179">Please refer to the [instructions on constructing an Admin Consent URL](https://developer.microsoft.com/graph/docs/concepts/auth_v2_service#3-get-administrator-consent) for more information.</span></span>

> [!NOTE]
> <span data-ttu-id="0a11d-180">La construction de l’URL de consentement de l’administrateur client nécessite une URL de redirection/URL de réponse dans le [portail d’inscription des applications](https://apps.dev.microsoft.com/).</span><span class="sxs-lookup"><span data-stu-id="0a11d-180">Constructing the Tenant Admin Consent URL requires a configured Redirect URI/Reply URL in the [App Registration Portal](https://apps.dev.microsoft.com/).</span></span> <span data-ttu-id="0a11d-181">Pour ajouter des URL de réponse pour votre bot, accédez à votre enregistrement de robot, choisissez Options avancées-> modifier le manifeste d’application.</span><span class="sxs-lookup"><span data-stu-id="0a11d-181">To add reply URLs for your bot, access your bot registration, choose Advanced Options -> Edit Application Manifest.</span></span>  <span data-ttu-id="0a11d-182">Ajoutez votre URL de redirection à la `replyUrls` collection.</span><span class="sxs-lookup"><span data-stu-id="0a11d-182">Add your Redirect URL to the `replyUrls` collection.</span></span>

> [!IMPORTANT]
> <span data-ttu-id="0a11d-183">Chaque fois que vous modifiez les autorisations de votre application, vous devez également répéter le processus de consentement de l’administrateur.</span><span class="sxs-lookup"><span data-stu-id="0a11d-183">Anytime you make a change to your application's permissions, you must also repeat the Admin Consent process.</span></span> <span data-ttu-id="0a11d-184">Les modifications apportées dans le portail d’inscription des applications prennent effet uniquement lorsque le consentement a été donné par l’administrateur du client.</span><span class="sxs-lookup"><span data-stu-id="0a11d-184">Changes made in the app registration portal will not be reflected until consent has been reapplied by the tenant's administrator.</span></span>
