---
title: Notions de base sur les robots
author: clearab
description: Maîtrisez les notions de base des robots dans Teams.
ms.topic: conceptual
ms.author: anclear
ms.openlocfilehash: e1b0c79b73ae89c8ab76ba0a1ff045603ab0b932
ms.sourcegitcommit: 4329a94918263c85d6c65ff401f571556b80307b
ms.translationtype: MT
ms.contentlocale: fr-FR
ms.lasthandoff: 02/01/2020
ms.locfileid: "41673704"
---
# <a name="bot-basics"></a><span data-ttu-id="5a23e-103">Notions de base sur les robots</span><span class="sxs-lookup"><span data-stu-id="5a23e-103">Bot basics</span></span>

<span data-ttu-id="5a23e-104">Il s’agit d’une introduction qui s’appuie sur l’article [How bots Work](https://aka.ms/how-bots-work) in the Core [bot Framework documentation](https://aka.ms/azure-bot-service-docs).</span><span class="sxs-lookup"><span data-stu-id="5a23e-104">This is an introduction that builds on the article [How bots work](https://aka.ms/how-bots-work) in the core [Bot Framework documentation](https://aka.ms/azure-bot-service-docs).</span></span> <span data-ttu-id="5a23e-105">Vous trouverez peut-être cet article, ainsi que les autres Articles de la section *concepts* , utiles.</span><span class="sxs-lookup"><span data-stu-id="5a23e-105">You may find that article, and the other articles in the *Concepts* section, useful.</span></span>

<span data-ttu-id="5a23e-106">La principale différence dans les robots développés pour Microsoft teams réside dans la façon dont les activités sont gérées.</span><span class="sxs-lookup"><span data-stu-id="5a23e-106">The primary difference in bots developed for Microsoft Teams is in how activities are handled.</span></span> <span data-ttu-id="5a23e-107">Le gestionnaire d’activité Microsoft teams dérive du gestionnaire d’activité de l’infrastructure bot pour acheminer toutes les activités de teams avant d’autoriser le traitement de toutes les activités spécifiques non liées à l’équipe.</span><span class="sxs-lookup"><span data-stu-id="5a23e-107">The Microsoft Teams activity handler derives from the Bot Framework's activity handler to route all Teams activities before allowing any non-Teams specific activities to be handled.</span></span>

## <a name="teams-activity-handlers"></a><span data-ttu-id="5a23e-108">Gestionnaires d’activités de teams</span><span class="sxs-lookup"><span data-stu-id="5a23e-108">Teams Activity handlers</span></span>

<span data-ttu-id="5a23e-109">Lorsqu’un bot pour Microsoft teams reçoit une activité, il le transmet à ses *gestionnaires d’activité*.</span><span class="sxs-lookup"><span data-stu-id="5a23e-109">When a bot for Microsoft Teams receives an activity, it passes it on to its *activity handlers*.</span></span> <span data-ttu-id="5a23e-110">En coulisses, il existe un gestionnaire de base appelé *Gestionnaire de tournage*, que toutes les activités sont acheminées par le biais de.</span><span class="sxs-lookup"><span data-stu-id="5a23e-110">Under the covers, there's one base handler called the *turn handler*, that all activities are routed through.</span></span> <span data-ttu-id="5a23e-111">Le *Gestionnaire Turn* appelle le gestionnaire d’activités requis pour gérer le type d’activité reçu.</span><span class="sxs-lookup"><span data-stu-id="5a23e-111">The *turn handler* calls the required activity handler to handle whatever type of activity was received.</span></span> <span data-ttu-id="5a23e-112">Lorsqu’un bot conçu pour Microsoft teams diffère, il est dérivé de `TeamsActivityHandler` la classe qui est dérivée de la classe `ActivityHandler` de l’infrastructure bot.</span><span class="sxs-lookup"><span data-stu-id="5a23e-112">Where a bot designed for Microsoft Teams differs is that it is derived from `TeamsActivityHandler` class that is derived from the Bot Framework's `ActivityHandler` class.</span></span>

# <a name="ctabcsharp"></a>[<span data-ttu-id="5a23e-113">C#</span><span class="sxs-lookup"><span data-stu-id="5a23e-113">C#</span></span>](#tab/csharp)

<span data-ttu-id="5a23e-114">Comme avec tout robot créé à l’aide de Microsoft bot Framework, si le bot reçoit une activité de message, le gestionnaire de tournage voit cette activité entrante `OnMessageActivityAsync` et l’envoie au gestionnaire d’activité.</span><span class="sxs-lookup"><span data-stu-id="5a23e-114">As with any bot created using the Microsoft Bot Framework, if the bot receives a message activity, the turn handler sees that incoming activity and sends it to the `OnMessageActivityAsync` activity handler.</span></span> <span data-ttu-id="5a23e-115">Dans Teams, cette fonctionnalité reste identique.</span><span class="sxs-lookup"><span data-stu-id="5a23e-115">In Teams, this functionality remains the same.</span></span> <span data-ttu-id="5a23e-116">Si le bot reçoit une activité de mise à jour de conversation, le gestionnaire de tournage voit cette activité entrante et l’envoie au `OnConversationUpdateActivityAsync` gestionnaire d’activités *teams* qui vérifie d’abord les événements spécifiques des équipes et les transmet au gestionnaire d’activité de l’infrastructure de robots si aucun n’est trouvé.</span><span class="sxs-lookup"><span data-stu-id="5a23e-116">If the bot receives a conversation update activity, the turn handler sees that incoming activity and sends it to the `OnConversationUpdateActivityAsync` *Teams* activity handler that will first check for any Teams specific events and pass it along to the Bot Framework's activity handler if none are found.</span></span>

<span data-ttu-id="5a23e-117">Dans la classe de gestionnaire d’activités de teams, il existe deux gestionnaires d' `OnConversationUpdateActivityAsync` activité de teams principaux, qui acheminent toutes les activités de mise à jour de conversation et `OnInvokeActivityAsync` qui achemine toutes les équipes.</span><span class="sxs-lookup"><span data-stu-id="5a23e-117">In the Teams activity handler class, there are two primary Teams activity handlers, `OnConversationUpdateActivityAsync` that routes all conversation update activities, and `OnInvokeActivityAsync` that routes all Teams invoke activities.</span></span>

<span data-ttu-id="5a23e-118">Pour implémenter votre logique pour les gestionnaires d’activités spécifiques à Teams, vous devez remplacer ces méthodes dans votre bot, comme illustré dans la section [logique bot](#bot-logic) ci-dessous.</span><span class="sxs-lookup"><span data-stu-id="5a23e-118">To implement your logic for Teams specific activity handlers, you'll override these methods in your bot as shown in the [Bot logic](#bot-logic) section below.</span></span> <span data-ttu-id="5a23e-119">Pour chacun de ces gestionnaires, il n’existe pas d’implémentation de base, il vous suffit d’ajouter la logique de votre choix dans votre substitution.</span><span class="sxs-lookup"><span data-stu-id="5a23e-119">For each of these handlers, there is no base implementation, so just add the logic that you want in your override.</span></span>

# <a name="javascripttabjavascript"></a>[<span data-ttu-id="5a23e-120">JavaScript</span><span class="sxs-lookup"><span data-stu-id="5a23e-120">JavaScript</span></span>](#tab/javascript)

<span data-ttu-id="5a23e-121">Comme avec tout robot créé à l’aide de Microsoft bot Framework, si le bot reçoit une activité de message, le gestionnaire de tournage voit cette activité entrante `onMessage` et l’envoie au gestionnaire d’activité.</span><span class="sxs-lookup"><span data-stu-id="5a23e-121">As with any bot created using the Microsoft Bot Framework, if the bot receives a message activity, the turn handler sees that incoming activity and sends it to the `onMessage` activity handler.</span></span> <span data-ttu-id="5a23e-122">Dans Teams, cette fonctionnalité reste identique.</span><span class="sxs-lookup"><span data-stu-id="5a23e-122">In Teams, this functionality remains the same.</span></span> <span data-ttu-id="5a23e-123">Si le bot reçoit une activité de mise à jour de conversation, le gestionnaire de tournage voit cette activité entrante et l’envoie au `dispatchConversationUpdateActivity` gestionnaire d’activités *teams* qui vérifiera d’abord les événements spécifiques des équipes et les transmettra au gestionnaire d’activités de robots Framework si aucun n’est trouvé.</span><span class="sxs-lookup"><span data-stu-id="5a23e-123">If the bot receives a conversation update activity, the turn handler sees that incoming activity and sends it to the `dispatchConversationUpdateActivity` *Teams* activity handler that will first check for any Teams specific events and pass it along to the bot frameworks activity handler if none are found.</span></span>

<span data-ttu-id="5a23e-124">Dans la classe de gestionnaire d’activités de teams, il existe deux gestionnaires d' `dispatchConversationUpdateActivity` activité de teams principaux, qui acheminent toutes les activités de mise à jour de conversation et `onInvokeActivity` qui achemine toutes les équipes.</span><span class="sxs-lookup"><span data-stu-id="5a23e-124">In the Teams activity handler class, there are two primary Teams activity handlers, `dispatchConversationUpdateActivity` that routes all conversation update Activities, and `onInvokeActivity` that routes all Teams invoke activities.</span></span>

<span data-ttu-id="5a23e-125">Pour implémenter votre logique pour les gestionnaires d’activités spécifiques à Teams, vous devez remplacer ces méthodes dans votre bot, comme indiqué dans la section de la [logique bot](#bot-logic) ci-dessous.</span><span class="sxs-lookup"><span data-stu-id="5a23e-125">To implement your logic for Teams specific activity handlers, you'll override these methods in your bot as seen in the [Bot logic](#bot-logic) section below.</span></span> <span data-ttu-id="5a23e-126">Pour chacun de ces gestionnaires, définissez votre logique de robot, puis **Veillez à appeler `next()` à la fin**.</span><span class="sxs-lookup"><span data-stu-id="5a23e-126">For each of these handlers, define your bot logic, then **be sure to call `next()` at the end**.</span></span> <span data-ttu-id="5a23e-127">En vous `next()` appelant, assurez-vous que le gestionnaire suivant s’exécute.</span><span class="sxs-lookup"><span data-stu-id="5a23e-127">By calling `next()` you ensure that the next handler runs.</span></span>

---

## <a name="bot-logic"></a><span data-ttu-id="5a23e-128">Logique de robot</span><span class="sxs-lookup"><span data-stu-id="5a23e-128">Bot logic</span></span>

<span data-ttu-id="5a23e-129">La logique du robot traite les activités entrantes à partir d’un ou de plusieurs de vos canaux de robots et génère des activités sortantes en réponse.</span><span class="sxs-lookup"><span data-stu-id="5a23e-129">The bot logic processes incoming activities from one or more of your bot channels and generates outgoing activities in response.</span></span>  <span data-ttu-id="5a23e-130">Cela est toujours vrai pour les robots dérivés de la classe de gestionnaire d’activités Teams, qui vérifie d’abord les activités Teams, puis passe toutes les autres activités au gestionnaire d’activité de l’infrastructure de robot.</span><span class="sxs-lookup"><span data-stu-id="5a23e-130">This is still true of bots derived from the Teams activity handler class, which first checks for Teams activities, then passes all other activities to the bot frameworks activity handler.</span></span>

# <a name="ctabcsharp"></a>[<span data-ttu-id="5a23e-131">C#</span><span class="sxs-lookup"><span data-stu-id="5a23e-131">C#</span></span>](#tab/csharp)

#### <a name="core-bot-framework-handlers"></a><span data-ttu-id="5a23e-132">Gestionnaires d’infrastructure de robot principal</span><span class="sxs-lookup"><span data-stu-id="5a23e-132">Core Bot Framework handlers</span></span>

<span data-ttu-id="5a23e-133">Tous les gestionnaires d’activité décrits ci-dessous continueront de fonctionner comme avec un robot non Teams, à l’exception de la gestion des membres *ajoutés* et des activités *supprimées* , celles-ci seront différentes dans le contexte d’une équipe, où le nouveau membre est ajouté à l’équipe par opposition à un thread de message.</span><span class="sxs-lookup"><span data-stu-id="5a23e-133">All of the activity handlers described below will continue to work as they do with a non-Teams bot, with the exception of handling members *added* and members *removed* activities, these will be different in the context of a team, where the new member is added to the team as opposed to a message thread.</span></span>

<span data-ttu-id="5a23e-134">Les gestionnaires définis dans `ActivityHandler` sont présentés ci-dessous.</span><span class="sxs-lookup"><span data-stu-id="5a23e-134">The handlers defined in `ActivityHandler` are outlined below.</span></span>

| <span data-ttu-id="5a23e-135">Événement</span><span class="sxs-lookup"><span data-stu-id="5a23e-135">Event</span></span> | <span data-ttu-id="5a23e-136">D</span><span class="sxs-lookup"><span data-stu-id="5a23e-136">Handler</span></span> | <span data-ttu-id="5a23e-137">Description</span><span class="sxs-lookup"><span data-stu-id="5a23e-137">Description</span></span> |
| :-- | :-- | :-- |
| <span data-ttu-id="5a23e-138">N’importe quel type d’activité reçu</span><span class="sxs-lookup"><span data-stu-id="5a23e-138">Any activity type received</span></span> | `OnTurnAsync` | <span data-ttu-id="5a23e-139">Appelle l’un des autres gestionnaires, en fonction du type d’activité reçu.</span><span class="sxs-lookup"><span data-stu-id="5a23e-139">Calls one of the other handlers, based on the type of activity received.</span></span> |
| <span data-ttu-id="5a23e-140">Activité de message reçue</span><span class="sxs-lookup"><span data-stu-id="5a23e-140">Message activity received</span></span> | `OnMessageActivityAsync` | <span data-ttu-id="5a23e-141">Remplacez ceci pour gérer une `Message` activité.</span><span class="sxs-lookup"><span data-stu-id="5a23e-141">Override this to handle a `Message` activity.</span></span> |
| <span data-ttu-id="5a23e-142">Activité de mise à jour de conversation reçue</span><span class="sxs-lookup"><span data-stu-id="5a23e-142">Conversation update activity received</span></span> | `OnConversationUpdateActivityAsync` | <span data-ttu-id="5a23e-143">Sur une `ConversationUpdate` activité, appelle un gestionnaire si les membres autres que le bot ont rejoint ou quitté la conversation.</span><span class="sxs-lookup"><span data-stu-id="5a23e-143">On a `ConversationUpdate` activity, calls a handler if members other than the bot joined or left the conversation.</span></span> |
| <span data-ttu-id="5a23e-144">Les membres autres que les robots joignent la conversation</span><span class="sxs-lookup"><span data-stu-id="5a23e-144">Non-bot members joined the conversation</span></span> | `OnMembersAddedAsync` | <span data-ttu-id="5a23e-145">Remplacez ceci pour gérer les membres qui rejoignent une conversation.</span><span class="sxs-lookup"><span data-stu-id="5a23e-145">Override this to handle members joining a conversation.</span></span> |
| <span data-ttu-id="5a23e-146">Les membres non-bot ont quitté la conversation</span><span class="sxs-lookup"><span data-stu-id="5a23e-146">Non-bot members left the conversation</span></span> | `OnMembersRemovedAsync` | <span data-ttu-id="5a23e-147">Remplacez ceci pour gérer les membres qui quittent une conversation.</span><span class="sxs-lookup"><span data-stu-id="5a23e-147">Override this to handle members leaving a conversation.</span></span> |
| <span data-ttu-id="5a23e-148">Activité d’événement reçue</span><span class="sxs-lookup"><span data-stu-id="5a23e-148">Event activity received</span></span> | `OnEventActivityAsync` | <span data-ttu-id="5a23e-149">Sur une `Event` activité, appelle un gestionnaire spécifique au type d’événement.</span><span class="sxs-lookup"><span data-stu-id="5a23e-149">On an `Event` activity, calls a handler specific to the event type.</span></span> |
| <span data-ttu-id="5a23e-150">Activité d’événement de réponse de jeton reçue</span><span class="sxs-lookup"><span data-stu-id="5a23e-150">Token-response event activity received</span></span> | `OnTokenResponseEventAsync` | <span data-ttu-id="5a23e-151">Substituez cette option pour gérer les événements de réponse de jeton.</span><span class="sxs-lookup"><span data-stu-id="5a23e-151">Override this to handle token response events.</span></span> |
| <span data-ttu-id="5a23e-152">Activité d’événement sans réponse de jeton reçue</span><span class="sxs-lookup"><span data-stu-id="5a23e-152">Non-token-response event activity received</span></span> | `OnEventAsync` | <span data-ttu-id="5a23e-153">Substituez ceci pour gérer les autres types d’événements.</span><span class="sxs-lookup"><span data-stu-id="5a23e-153">Override this to handle other types of events.</span></span> |
| <span data-ttu-id="5a23e-154">Autre type d’activité reçu</span><span class="sxs-lookup"><span data-stu-id="5a23e-154">Other activity type received</span></span> | `OnUnrecognizedActivityTypeAsync` | <span data-ttu-id="5a23e-155">Remplacez ceci pour gérer n’importe quel type d’activité non géré.</span><span class="sxs-lookup"><span data-stu-id="5a23e-155">Override this to handle any activity type otherwise unhandled.</span></span> |

#### <a name="teams-specific-handlers"></a><span data-ttu-id="5a23e-156">Gestionnaires spécifiques à teams</span><span class="sxs-lookup"><span data-stu-id="5a23e-156">Teams-specific handlers</span></span>

<span data-ttu-id="5a23e-157">L `TeamsActivityHandler` 'étend la liste des gestionnaires ci-dessus pour inclure les éléments suivants :</span><span class="sxs-lookup"><span data-stu-id="5a23e-157">The `TeamsActivityHandler` extends the list of handlers above to include the following:</span></span>

| <span data-ttu-id="5a23e-158">Événement</span><span class="sxs-lookup"><span data-stu-id="5a23e-158">Event</span></span> | <span data-ttu-id="5a23e-159">D</span><span class="sxs-lookup"><span data-stu-id="5a23e-159">Handler</span></span> | <span data-ttu-id="5a23e-160">Description</span><span class="sxs-lookup"><span data-stu-id="5a23e-160">Description</span></span> |
| :-- | :-- | :-- |
| <span data-ttu-id="5a23e-161">channelCreated</span><span class="sxs-lookup"><span data-stu-id="5a23e-161">channelCreated</span></span> | `OnTeamsChannelCreatedAsync` | <span data-ttu-id="5a23e-162">Remplacez ceci pour gérer la création d’un canal Teams.</span><span class="sxs-lookup"><span data-stu-id="5a23e-162">Override this to handle a Teams channel being created.</span></span> <span data-ttu-id="5a23e-163">Pour plus d’informations, consultez la rubrique [canal créé](https://aka.ms/azure-bot-subscribe-to-conversation-events#channel-created) dans les [événements de mise à jour de conversation](https://aka.ms/azure-bot-subscribe-to-conversation-events).</span><span class="sxs-lookup"><span data-stu-id="5a23e-163">For more information see [Channel created](https://aka.ms/azure-bot-subscribe-to-conversation-events#channel-created) in [Conversation update events](https://aka.ms/azure-bot-subscribe-to-conversation-events).</span></span> |
| <span data-ttu-id="5a23e-164">channelDeleted</span><span class="sxs-lookup"><span data-stu-id="5a23e-164">channelDeleted</span></span> | `OnTeamsChannelDeletedAsync` | <span data-ttu-id="5a23e-165">Remplacez ceci pour gérer la suppression d’un canal Teams.</span><span class="sxs-lookup"><span data-stu-id="5a23e-165">Override this to handle a Teams channel being deleted.</span></span> <span data-ttu-id="5a23e-166">Pour plus d’informations, consultez la rubrique [canal supprimé](https://aka.ms/azure-bot-subscribe-to-conversation-events#channel-deleted) dans les [événements de mise à jour de conversation](https://aka.ms/azure-bot-subscribe-to-conversation-events).</span><span class="sxs-lookup"><span data-stu-id="5a23e-166">For more information see [Channel deleted](https://aka.ms/azure-bot-subscribe-to-conversation-events#channel-deleted) in [Conversation update events](https://aka.ms/azure-bot-subscribe-to-conversation-events).</span></span>|
| <span data-ttu-id="5a23e-167">channelRenamed</span><span class="sxs-lookup"><span data-stu-id="5a23e-167">channelRenamed</span></span> | `OnTeamsChannelRenamedAsync` | <span data-ttu-id="5a23e-168">Remplacez ceci pour gérer un canal teams renommé.</span><span class="sxs-lookup"><span data-stu-id="5a23e-168">Override this to handle a Teams channel being renamed.</span></span> <span data-ttu-id="5a23e-169">Pour plus d’informations, voir [canal renommé](https://aka.ms/azure-bot-subscribe-to-conversation-events#channel-renamed) dans les [événements de mise à jour de conversation](https://aka.ms/azure-bot-subscribe-to-conversation-events).</span><span class="sxs-lookup"><span data-stu-id="5a23e-169">For more information see [Channel renamed](https://aka.ms/azure-bot-subscribe-to-conversation-events#channel-renamed) in [Conversation update events](https://aka.ms/azure-bot-subscribe-to-conversation-events).</span></span>|
| <span data-ttu-id="5a23e-170">teamRenamed</span><span class="sxs-lookup"><span data-stu-id="5a23e-170">teamRenamed</span></span> | `OnTeamsTeamRenamedAsync` | <span data-ttu-id="5a23e-171">`return Task.CompletedTask;`Remplacez ceci pour gérer une équipe teams renommée.</span><span class="sxs-lookup"><span data-stu-id="5a23e-171">`return Task.CompletedTask;` Override this to handle a Teams Team being Renamed.</span></span> <span data-ttu-id="5a23e-172">Pour plus d’informations, consultez la rubrique [Equipe renommée](https://aka.ms/azure-bot-subscribe-to-conversation-events#team-renamed) en [événements de mise à jour de conversation](https://aka.ms/azure-bot-subscribe-to-conversation-events).</span><span class="sxs-lookup"><span data-stu-id="5a23e-172">For more information see [Team renamed](https://aka.ms/azure-bot-subscribe-to-conversation-events#team-renamed) in [Conversation update events](https://aka.ms/azure-bot-subscribe-to-conversation-events).</span></span>|
| <span data-ttu-id="5a23e-173">MembersAdded</span><span class="sxs-lookup"><span data-stu-id="5a23e-173">MembersAdded</span></span> | `OnTeamsMembersAddedAsync` | <span data-ttu-id="5a23e-174">Appelle la `OnMembersAddedAsync` méthode dans `ActivityHandler`.</span><span class="sxs-lookup"><span data-stu-id="5a23e-174">Calls the `OnMembersAddedAsync` method in `ActivityHandler`.</span></span> <span data-ttu-id="5a23e-175">Remplacez ceci pour gérer les membres qui rejoignent une équipe.</span><span class="sxs-lookup"><span data-stu-id="5a23e-175">Override this to handle members joining a team.</span></span> <span data-ttu-id="5a23e-176">Pour plus d’informations, consultez la rubrique [membre d’équipe ajouté](https://aka.ms/azure-bot-subscribe-to-conversation-events#Team-Member-Added) dans les [événements de mise à jour de conversation](https://aka.ms/azure-bot-subscribe-to-conversation-events).</span><span class="sxs-lookup"><span data-stu-id="5a23e-176">For more information see [Team member added](https://aka.ms/azure-bot-subscribe-to-conversation-events#Team-Member-Added) in [Conversation update events](https://aka.ms/azure-bot-subscribe-to-conversation-events).</span></span>|
| <span data-ttu-id="5a23e-177">MembersRemoved</span><span class="sxs-lookup"><span data-stu-id="5a23e-177">MembersRemoved</span></span> | `OnTeamsMembersRemovedAsync` | <span data-ttu-id="5a23e-178">Appelle la `OnMembersRemovedAsync` méthode dans `ActivityHandler`.</span><span class="sxs-lookup"><span data-stu-id="5a23e-178">Calls the `OnMembersRemovedAsync` method in `ActivityHandler`.</span></span> <span data-ttu-id="5a23e-179">Remplacez ceci pour gérer les membres qui quittent une équipe.</span><span class="sxs-lookup"><span data-stu-id="5a23e-179">Override this to handle members leaving a team.</span></span> <span data-ttu-id="5a23e-180">Pour plus d’informations, consultez la rubrique [membre d’équipe supprimé](https://aka.ms/azure-bot-subscribe-to-conversation-events#Team-Member-Removed) dans les [événements de mise à jour de conversation](https://aka.ms/azure-bot-subscribe-to-conversation-events).</span><span class="sxs-lookup"><span data-stu-id="5a23e-180">For more information see [Team member removed](https://aka.ms/azure-bot-subscribe-to-conversation-events#Team-Member-Removed) in [Conversation update events](https://aka.ms/azure-bot-subscribe-to-conversation-events).</span></span>|

#### <a name="teams-invoke--activities"></a><span data-ttu-id="5a23e-181">Les équipes appellent des activités</span><span class="sxs-lookup"><span data-stu-id="5a23e-181">Teams invoke  activities</span></span>

<span data-ttu-id="5a23e-182">Voici une liste de tous les gestionnaires d’activités de teams appelés à partir `OnInvokeActivityAsync` du gestionnaire d’activités de _teams_ :</span><span class="sxs-lookup"><span data-stu-id="5a23e-182">Here is a list of all of the Teams activity handlers called from the `OnInvokeActivityAsync` _Teams_ activity handler:</span></span>

| <span data-ttu-id="5a23e-183">Types d’appel</span><span class="sxs-lookup"><span data-stu-id="5a23e-183">Invoke types</span></span>                    | <span data-ttu-id="5a23e-184">D</span><span class="sxs-lookup"><span data-stu-id="5a23e-184">Handler</span></span>                              | <span data-ttu-id="5a23e-185">Description</span><span class="sxs-lookup"><span data-stu-id="5a23e-185">Description</span></span>                                                  |
| :-----------------------------  | :----------------------------------- | :----------------------------------------------------------- |
| <span data-ttu-id="5a23e-186">CardAction. Invoke</span><span class="sxs-lookup"><span data-stu-id="5a23e-186">CardAction.Invoke</span></span>               | `OnTeamsCardActionInvokeAsync`       | <span data-ttu-id="5a23e-187">Appel d’action de la carte Teams.</span><span class="sxs-lookup"><span data-stu-id="5a23e-187">Teams Card Action Invoke.</span></span> |
| <span data-ttu-id="5a23e-188">fileConsent/Invoke</span><span class="sxs-lookup"><span data-stu-id="5a23e-188">fileConsent/invoke</span></span>              | `OnTeamsFileConsentAcceptAsync`      | <span data-ttu-id="5a23e-189">Acceptation du consentement de fichier Teams.</span><span class="sxs-lookup"><span data-stu-id="5a23e-189">Teams File Consent Accept.</span></span> |
| <span data-ttu-id="5a23e-190">fileConsent/Invoke</span><span class="sxs-lookup"><span data-stu-id="5a23e-190">fileConsent/invoke</span></span>              | `OnTeamsFileConsentAsync`            | <span data-ttu-id="5a23e-191">Consentement du fichier Teams.</span><span class="sxs-lookup"><span data-stu-id="5a23e-191">Teams File Consent.</span></span> |
| <span data-ttu-id="5a23e-192">fileConsent/Invoke</span><span class="sxs-lookup"><span data-stu-id="5a23e-192">fileConsent/invoke</span></span>              | `OnTeamsFileConsentDeclineAsync`     | <span data-ttu-id="5a23e-193">Consentement du fichier Teams.</span><span class="sxs-lookup"><span data-stu-id="5a23e-193">Teams File Consent.</span></span> |
| <span data-ttu-id="5a23e-194">actionableMessage/executeAction</span><span class="sxs-lookup"><span data-stu-id="5a23e-194">actionableMessage/executeAction</span></span> | `OnTeamsO365ConnectorCardActionAsync` | <span data-ttu-id="5a23e-195">Action de la carte de connecteur O365 Teams.</span><span class="sxs-lookup"><span data-stu-id="5a23e-195">Teams O365 Connector Card Action.</span></span> |
| <span data-ttu-id="5a23e-196">connexion/verifyState</span><span class="sxs-lookup"><span data-stu-id="5a23e-196">signin/verifyState</span></span>              | `OnTeamsSigninVerifyStateAsync`      | <span data-ttu-id="5a23e-197">L’état de vérification de la connexion Teams.</span><span class="sxs-lookup"><span data-stu-id="5a23e-197">Teams Sign in Verify State.</span></span> |
| <span data-ttu-id="5a23e-198">tâche/extraction</span><span class="sxs-lookup"><span data-stu-id="5a23e-198">task/fetch</span></span>                      | `OnTeamsTaskModuleFetchAsync`        | <span data-ttu-id="5a23e-199">Extraction du module de tâche Teams.</span><span class="sxs-lookup"><span data-stu-id="5a23e-199">Teams Task Module Fetch.</span></span> |
| <span data-ttu-id="5a23e-200">tâche/Envoyer</span><span class="sxs-lookup"><span data-stu-id="5a23e-200">task/submit</span></span>                     | `OnTeamsTaskModuleSubmitAsync`       | <span data-ttu-id="5a23e-201">Soumission du module de tâche équipes.</span><span class="sxs-lookup"><span data-stu-id="5a23e-201">Teams Task Module Submit.</span></span> |

<span data-ttu-id="5a23e-202">Les activités d’appel répertoriées ci-dessus concernent les robots de conversation dans Teams.</span><span class="sxs-lookup"><span data-stu-id="5a23e-202">The invoke activities listed above are for conversational bots in Teams.</span></span> <span data-ttu-id="5a23e-203">Le kit de développement logiciel (SDK) de robot prend également en charge les appels spécifiques aux extensions de messagerie.</span><span class="sxs-lookup"><span data-stu-id="5a23e-203">The Bot Framework SDK also supports invokes specific to messaging extensions.</span></span> <span data-ttu-id="5a23e-204">Pour plus d’informations, consultez [qu’est-ce que les extensions de messagerie](https://aka.ms/azure-bot-what-are-messaging-extensions)</span><span class="sxs-lookup"><span data-stu-id="5a23e-204">For more information see [What are messaging extensions](https://aka.ms/azure-bot-what-are-messaging-extensions)</span></span>

# <a name="javascripttabjavascript"></a>[<span data-ttu-id="5a23e-205">JavaScript</span><span class="sxs-lookup"><span data-stu-id="5a23e-205">JavaScript</span></span>](#tab/javascript)

<span data-ttu-id="5a23e-206">Tous les gestionnaires d’activité décrits ci-dessous continuent de fonctionner comme ils le font avec un robot non Teams, à l’exception de la gestion des membres *ajoutés* et des membres des activités *supprimées* , celles-ci seront différentes dans le contexte d’une équipe, où le nouveau membre est ajouté à l’équipe par opposition à un thread de message.</span><span class="sxs-lookup"><span data-stu-id="5a23e-206">All of the activity handlers described below will continue to work as they do with a non-Teams bot, with the exception of handling the members *added* and members *removed* activities, these will be different in the context of a team, where the new member is added to the team as opposed to a message thread.</span></span>

#### <a name="core-bot-framework-handlers"></a><span data-ttu-id="5a23e-207">Gestionnaires d’infrastructure de robot principal</span><span class="sxs-lookup"><span data-stu-id="5a23e-207">Core Bot Framework handlers</span></span>

<span data-ttu-id="5a23e-208">Les gestionnaires définis dans `ActivityHandler` sont présentés ci-dessous.</span><span class="sxs-lookup"><span data-stu-id="5a23e-208">The handlers defined in `ActivityHandler` are outlined below.</span></span>

| <span data-ttu-id="5a23e-209">Événement</span><span class="sxs-lookup"><span data-stu-id="5a23e-209">Event</span></span> | <span data-ttu-id="5a23e-210">D</span><span class="sxs-lookup"><span data-stu-id="5a23e-210">Handler</span></span> | <span data-ttu-id="5a23e-211">Description</span><span class="sxs-lookup"><span data-stu-id="5a23e-211">Description</span></span> |
| :-- | :-- | :-- |
| <span data-ttu-id="5a23e-212">N’importe quel type d’activité reçu</span><span class="sxs-lookup"><span data-stu-id="5a23e-212">Any activity type received</span></span> | `onTurn` | <span data-ttu-id="5a23e-213">Appelle l’un des autres gestionnaires, en fonction du type d’activité reçu.</span><span class="sxs-lookup"><span data-stu-id="5a23e-213">Calls one of the other handlers, based on the type of activity received.</span></span> |
| <span data-ttu-id="5a23e-214">Activité de message reçue</span><span class="sxs-lookup"><span data-stu-id="5a23e-214">Message activity received</span></span> | `onMessage` | <span data-ttu-id="5a23e-215">Fournissez une fonction pour qu’elle gère `Message` une activité.</span><span class="sxs-lookup"><span data-stu-id="5a23e-215">Provide a function for this to handle a `Message` activity.</span></span> |
| <span data-ttu-id="5a23e-216">Activité de mise à jour de conversation reçue</span><span class="sxs-lookup"><span data-stu-id="5a23e-216">Conversation update activity received</span></span> | `onConversationUpdate` | <span data-ttu-id="5a23e-217">Sur une `ConversationUpdate` activité, appelle un gestionnaire si les membres autres que le bot ont rejoint ou quitté la conversation.</span><span class="sxs-lookup"><span data-stu-id="5a23e-217">On a `ConversationUpdate` activity, calls a handler if members other than the bot joined or left the conversation.</span></span> |
| <span data-ttu-id="5a23e-218">Les membres autres que les robots joignent la conversation</span><span class="sxs-lookup"><span data-stu-id="5a23e-218">Non-bot members joined the conversation</span></span> | `onMembersAdded` | <span data-ttu-id="5a23e-219">Fournissez une fonction permettant de gérer les membres qui rejoignent une conversation.</span><span class="sxs-lookup"><span data-stu-id="5a23e-219">Provide a function for this to handle members joining a conversation.</span></span> |
| <span data-ttu-id="5a23e-220">Les membres non-bot ont quitté la conversation</span><span class="sxs-lookup"><span data-stu-id="5a23e-220">Non-bot members left the conversation</span></span> | `onMembersRemoved` | <span data-ttu-id="5a23e-221">Fournir une fonction pour ce qui permet de gérer les membres qui quittent une conversation.</span><span class="sxs-lookup"><span data-stu-id="5a23e-221">Provide a function for this to handle members leaving a conversation.</span></span> |
| <span data-ttu-id="5a23e-222">Activité d’événement reçue</span><span class="sxs-lookup"><span data-stu-id="5a23e-222">Event activity received</span></span> | `onEvent` | <span data-ttu-id="5a23e-223">Sur une `Event` activité, appelle un gestionnaire spécifique au type d’événement.</span><span class="sxs-lookup"><span data-stu-id="5a23e-223">On an `Event` activity, calls a handler specific to the event type.</span></span> |
| <span data-ttu-id="5a23e-224">Activité d’événement de réponse de jeton reçue</span><span class="sxs-lookup"><span data-stu-id="5a23e-224">Token-response event activity received</span></span> | `onTokenResponseEvent` | <span data-ttu-id="5a23e-225">Fournissez une fonction permettant de gérer les événements de réponse de jeton.</span><span class="sxs-lookup"><span data-stu-id="5a23e-225">Provide a function for this to handle token response events.</span></span> |
| <span data-ttu-id="5a23e-226">Autre type d’activité reçu</span><span class="sxs-lookup"><span data-stu-id="5a23e-226">Other activity type received</span></span> | `onUnrecognizedActivityType` | <span data-ttu-id="5a23e-227">Fournissez une fonction pour qu’elle gère n’importe quel type d’activité non géré.</span><span class="sxs-lookup"><span data-stu-id="5a23e-227">Provide a function for this to handle any activity type otherwise unhandled.</span></span> |
| <span data-ttu-id="5a23e-228">Gestionnaires d’activité terminés</span><span class="sxs-lookup"><span data-stu-id="5a23e-228">Activity handlers have completed</span></span> | `onDialog` | <span data-ttu-id="5a23e-229">Fournissez une fonction permettant de gérer le traitement qui doit être effectué à la fin d’un tour, une fois que le reste de vos gestionnaires d’activité est terminé.</span><span class="sxs-lookup"><span data-stu-id="5a23e-229">Provide a function for this to handle any processing that should be done at the end of a turn, after the rest of your activity handlers have completed.</span></span> |

#### <a name="teams-specific-handlers"></a><span data-ttu-id="5a23e-230">Gestionnaires spécifiques à teams</span><span class="sxs-lookup"><span data-stu-id="5a23e-230">Teams-specific handlers</span></span>

<span data-ttu-id="5a23e-231">L `TeamsActivityHandler` 'étend la liste des gestionnaires ci-dessus pour inclure les éléments suivants :</span><span class="sxs-lookup"><span data-stu-id="5a23e-231">The `TeamsActivityHandler` extends the list of handlers above to include the following:</span></span>

| <span data-ttu-id="5a23e-232">Événement</span><span class="sxs-lookup"><span data-stu-id="5a23e-232">Event</span></span> | <span data-ttu-id="5a23e-233">D</span><span class="sxs-lookup"><span data-stu-id="5a23e-233">Handler</span></span> | <span data-ttu-id="5a23e-234">Description</span><span class="sxs-lookup"><span data-stu-id="5a23e-234">Description</span></span> |
| :-- | :-- | :-- |
| <span data-ttu-id="5a23e-235">channelCreated</span><span class="sxs-lookup"><span data-stu-id="5a23e-235">channelCreated</span></span> | `OnTeamsChannelCreatedAsync` | <span data-ttu-id="5a23e-236">Remplacez ceci pour gérer la création d’un canal Teams.</span><span class="sxs-lookup"><span data-stu-id="5a23e-236">Override this to handle a Teams channel being created.</span></span> <span data-ttu-id="5a23e-237">Pour plus d’informations, consultez la rubrique [canal créé](https://aka.ms/azure-bot-subscribe-to-conversation-events#channel-created) dans les [événements de mise à jour de conversation](https://aka.ms/azure-bot-subscribe-to-conversation-events).</span><span class="sxs-lookup"><span data-stu-id="5a23e-237">For more information see [Channel created](https://aka.ms/azure-bot-subscribe-to-conversation-events#channel-created) in [Conversation update events](https://aka.ms/azure-bot-subscribe-to-conversation-events).</span></span> |
| <span data-ttu-id="5a23e-238">channelDeleted</span><span class="sxs-lookup"><span data-stu-id="5a23e-238">channelDeleted</span></span> | `OnTeamsChannelDeletedAsync` | <span data-ttu-id="5a23e-239">Remplacez ceci pour gérer la suppression d’un canal Teams.</span><span class="sxs-lookup"><span data-stu-id="5a23e-239">Override this to handle a Teams channel being deleted.</span></span> <span data-ttu-id="5a23e-240">Pour plus d’informations, consultez la rubrique [canal supprimé](https://aka.ms/azure-bot-subscribe-to-conversation-events#channel-deleted) dans les [événements de mise à jour de conversation](https://aka.ms/azure-bot-subscribe-to-conversation-events).</span><span class="sxs-lookup"><span data-stu-id="5a23e-240">For more information see [Channel deleted](https://aka.ms/azure-bot-subscribe-to-conversation-events#channel-deleted) in [Conversation update events](https://aka.ms/azure-bot-subscribe-to-conversation-events).</span></span>|
| <span data-ttu-id="5a23e-241">channelRenamed</span><span class="sxs-lookup"><span data-stu-id="5a23e-241">channelRenamed</span></span> | `OnTeamsChannelRenamedAsync` | <span data-ttu-id="5a23e-242">Remplacez ceci pour gérer un canal teams renommé.</span><span class="sxs-lookup"><span data-stu-id="5a23e-242">Override this to handle a Teams channel being renamed.</span></span> <span data-ttu-id="5a23e-243">Pour plus d’informations, voir [canal renommé](https://aka.ms/azure-bot-subscribe-to-conversation-events#channel-renamed) dans les [événements de mise à jour de conversation](https://aka.ms/azure-bot-subscribe-to-conversation-events).</span><span class="sxs-lookup"><span data-stu-id="5a23e-243">For more information see [Channel renamed](https://aka.ms/azure-bot-subscribe-to-conversation-events#channel-renamed) in [Conversation update events](https://aka.ms/azure-bot-subscribe-to-conversation-events).</span></span> |
| <span data-ttu-id="5a23e-244">teamRenamed</span><span class="sxs-lookup"><span data-stu-id="5a23e-244">teamRenamed</span></span> | `OnTeamsTeamRenamedAsync` | <span data-ttu-id="5a23e-245">`return Task.CompletedTask;`Remplacez ceci pour gérer une équipe teams renommée.</span><span class="sxs-lookup"><span data-stu-id="5a23e-245">`return Task.CompletedTask;` Override this to handle a Teams Team being Renamed.</span></span> <span data-ttu-id="5a23e-246">Pour plus d’informations, consultez la rubrique [Equipe renommée](https://aka.ms/azure-bot-subscribe-to-conversation-events#team-renamed) en [événements de mise à jour de conversation](https://aka.ms/azure-bot-subscribe-to-conversation-events).</span><span class="sxs-lookup"><span data-stu-id="5a23e-246">For more information see [Team renamed](https://aka.ms/azure-bot-subscribe-to-conversation-events#team-renamed) in [Conversation update events](https://aka.ms/azure-bot-subscribe-to-conversation-events).</span></span> |
| <span data-ttu-id="5a23e-247">MembersAdded</span><span class="sxs-lookup"><span data-stu-id="5a23e-247">MembersAdded</span></span> | `OnTeamsMembersAddedAsync` | <span data-ttu-id="5a23e-248">Appelle la `OnMembersAddedAsync` méthode dans `ActivityHandler`.</span><span class="sxs-lookup"><span data-stu-id="5a23e-248">Calls the `OnMembersAddedAsync` method in `ActivityHandler`.</span></span> <span data-ttu-id="5a23e-249">Remplacez ceci pour gérer les membres qui rejoignent une équipe.</span><span class="sxs-lookup"><span data-stu-id="5a23e-249">Override this to handle members joining a team.</span></span> <span data-ttu-id="5a23e-250">Pour plus d’informations, consultez la rubrique [membre d’équipe ajouté](https://aka.ms/azure-bot-subscribe-to-conversation-events#Team-Member-Added) dans les [événements de mise à jour de conversation](https://aka.ms/azure-bot-subscribe-to-conversation-events).</span><span class="sxs-lookup"><span data-stu-id="5a23e-250">For more information see [Team member added](https://aka.ms/azure-bot-subscribe-to-conversation-events#Team-Member-Added) in [Conversation update events](https://aka.ms/azure-bot-subscribe-to-conversation-events).</span></span> |
| <span data-ttu-id="5a23e-251">MembersRemoved</span><span class="sxs-lookup"><span data-stu-id="5a23e-251">MembersRemoved</span></span> | `OnTeamsMembersRemovedAsync` | <span data-ttu-id="5a23e-252">Appelle la `OnMembersRemovedAsync` méthode dans `ActivityHandler`.</span><span class="sxs-lookup"><span data-stu-id="5a23e-252">Calls the `OnMembersRemovedAsync` method in `ActivityHandler`.</span></span> <span data-ttu-id="5a23e-253">Remplacez ceci pour gérer les membres qui quittent une équipe.</span><span class="sxs-lookup"><span data-stu-id="5a23e-253">Override this to handle members leaving a team.</span></span> <span data-ttu-id="5a23e-254">Pour plus d’informations, consultez la rubrique [membre d’équipe supprimé](https://aka.ms/azure-bot-subscribe-to-conversation-events#Team-Member-Removed) dans les [événements de mise à jour de conversation](https://aka.ms/azure-bot-subscribe-to-conversation-events).</span><span class="sxs-lookup"><span data-stu-id="5a23e-254">For more information see [Team member removed](https://aka.ms/azure-bot-subscribe-to-conversation-events#Team-Member-Removed) in [Conversation update events](https://aka.ms/azure-bot-subscribe-to-conversation-events).</span></span> |

#### <a name="teams-invoke-activities"></a><span data-ttu-id="5a23e-255">Les équipes appellent des activités</span><span class="sxs-lookup"><span data-stu-id="5a23e-255">Teams invoke activities</span></span>

<span data-ttu-id="5a23e-256">Voici une liste de tous les gestionnaires d’activités de teams appelés à partir `onInvokeActivity` du gestionnaire d’activités de _teams_ :</span><span class="sxs-lookup"><span data-stu-id="5a23e-256">Here is a list of all of the Teams activity handlers called from the `onInvokeActivity` _Teams_ activity handler:</span></span>

| <span data-ttu-id="5a23e-257">Types d’appel</span><span class="sxs-lookup"><span data-stu-id="5a23e-257">Invoke types</span></span>                    | <span data-ttu-id="5a23e-258">D</span><span class="sxs-lookup"><span data-stu-id="5a23e-258">Handler</span></span>                              | <span data-ttu-id="5a23e-259">Description</span><span class="sxs-lookup"><span data-stu-id="5a23e-259">Description</span></span>                                                  |
| :-----------------------------  | :----------------------------------- | :----------------------------------------------------------- |
| <span data-ttu-id="5a23e-260">CardAction. Invoke</span><span class="sxs-lookup"><span data-stu-id="5a23e-260">CardAction.Invoke</span></span>               | `handleTeamsCardActionInvoke`       | <span data-ttu-id="5a23e-261">Appel d’action de la carte Teams.</span><span class="sxs-lookup"><span data-stu-id="5a23e-261">Teams Card Action Invoke.</span></span> |
| <span data-ttu-id="5a23e-262">fileConsent/Invoke</span><span class="sxs-lookup"><span data-stu-id="5a23e-262">fileConsent/invoke</span></span>              | `handleTeamsFileConsentAccept`      | <span data-ttu-id="5a23e-263">Acceptation du consentement de fichier Teams.</span><span class="sxs-lookup"><span data-stu-id="5a23e-263">Teams File Consent Accept.</span></span> |
| <span data-ttu-id="5a23e-264">fileConsent/Invoke</span><span class="sxs-lookup"><span data-stu-id="5a23e-264">fileConsent/invoke</span></span>              | `handleTeamsFileConsent`            | <span data-ttu-id="5a23e-265">Consentement du fichier Teams.</span><span class="sxs-lookup"><span data-stu-id="5a23e-265">Teams File Consent.</span></span> |
| <span data-ttu-id="5a23e-266">fileConsent/Invoke</span><span class="sxs-lookup"><span data-stu-id="5a23e-266">fileConsent/invoke</span></span>              | `handleTeamsFileConsentDecline`     | <span data-ttu-id="5a23e-267">Consentement du fichier Teams.</span><span class="sxs-lookup"><span data-stu-id="5a23e-267">Teams File Consent.</span></span> |
| <span data-ttu-id="5a23e-268">actionableMessage/executeAction</span><span class="sxs-lookup"><span data-stu-id="5a23e-268">actionableMessage/executeAction</span></span> | `handleTeamsO365ConnectorCardAction` | <span data-ttu-id="5a23e-269">Action de la carte de connecteur O365 Teams.</span><span class="sxs-lookup"><span data-stu-id="5a23e-269">Teams O365 Connector Card Action.</span></span> |
| <span data-ttu-id="5a23e-270">connexion/verifyState</span><span class="sxs-lookup"><span data-stu-id="5a23e-270">signin/verifyState</span></span>              | `handleTeamsSigninVerifyState`      | <span data-ttu-id="5a23e-271">L’état de vérification de la connexion Teams.</span><span class="sxs-lookup"><span data-stu-id="5a23e-271">Teams Sign in Verify State.</span></span> |
| <span data-ttu-id="5a23e-272">tâche/extraction</span><span class="sxs-lookup"><span data-stu-id="5a23e-272">task/fetch</span></span>                      | `handleTeamsTaskModuleFetch`        | <span data-ttu-id="5a23e-273">Extraction du module de tâche Teams.</span><span class="sxs-lookup"><span data-stu-id="5a23e-273">Teams Task Module Fetch.</span></span> |
| <span data-ttu-id="5a23e-274">tâche/Envoyer</span><span class="sxs-lookup"><span data-stu-id="5a23e-274">task/submit</span></span>                     | `handleTeamsTaskModuleSubmit`       | <span data-ttu-id="5a23e-275">Soumission du module de tâche équipes.</span><span class="sxs-lookup"><span data-stu-id="5a23e-275">Teams Task Module Submit.</span></span> |

<span data-ttu-id="5a23e-276">Les activités d’appel répertoriées ci-dessus concernent les robots de conversation dans Teams.</span><span class="sxs-lookup"><span data-stu-id="5a23e-276">The invoke activities listed above are for conversational bots in Teams.</span></span> <span data-ttu-id="5a23e-277">Le kit de développement logiciel (SDK) de robot prend également en charge les appels spécifiques aux extensions de messagerie.</span><span class="sxs-lookup"><span data-stu-id="5a23e-277">The Bot Framework SDK also supports invocations specific to messaging extensions.</span></span> <span data-ttu-id="5a23e-278">Pour plus d’informations, consultez [qu’est-ce que les extensions de messagerie](https://aka.ms/azure-bot-what-are-messaging-extensions)</span><span class="sxs-lookup"><span data-stu-id="5a23e-278">For more information see [What are messaging extensions](https://aka.ms/azure-bot-what-are-messaging-extensions)</span></span>

---
