### YamlMime:Tutorial
title: Créer Teams bot de conversation
metadata:
  title: Créer Teams bot de conversation
  description: Dans ce didacticiel, vous allez apprendre à configurer le bot de conversation dans Teams.
  audience: Developer
  level: Beginner
  ms.date: 04/01/2022
  ms.topic: interactive-tutorial
  nextTutorialHref: bots/how-to/conversations/channel-and-group-conversations.md
  nextTutorialTitle: Conversations de canal et de groupe avec un bot
  ms.custom: mvc
  ms.localizationpriority: none
  ms.openlocfilehash: 7bdb662ef322edf1e635d84593be66d8946874ee
  ms.sourcegitcommit: a85b4ae65b87006bb2e2e50ea902eb97291e83a8
  ms.translationtype: MT
  ms.contentlocale: fr-FR
  ms.lasthandoff: 04/01/2022
  ms.locfileid: "64612749"
items:
- durationInMinutes: 1
  content: >
    Teams bots de conversation permettent aux utilisateurs d’interagir avec votre service web via du texte, des cartes interactives et des modules de tâche. Les conversations de base sont gérées via le connecteur Bot Framework, une API REST unique. Cette API permet à votre bot de communiquer avec Teams et d’autres canaux. Le SDK Bot Builder fournit les fonctionnalités suivantes :


    * Accès facile au connecteur Bot Framework.

    * Fonctionnalités supplémentaires pour gérer le flux et l’état des conversations.

    * Méthodes simples pour incorporer des services cognitives, tels que le traitement du langage naturel (NLP).


    Lorsque votre bot est ajouté pour la première fois à un groupe ou à une équipe, un message d’introduction est envoyé. Le message fournit une brève description des fonctionnalités du bot et de leur utilisation.


    Ce guide pas à pas vous aide à créer un bot de conversation de base dans Teams application. Vous verrez le résultat suivant :


    :::image type="content" source="./assets/images/conversation-bot/final-output.png" alt-text="Résultat final." border="true"lightbox="assets/images/conversation-bot/final-output.png":::
- title: Prerequisites
  durationInMinutes: 1
  content: >
    Pour configurer votre environnement de développement, installez les outils suivants :


    * [Office 365 client](https://developer.microsoft.com/en-us/microsoft-365/dev-program)

    * [Ngrok ou](https://ngrok.com/) une solution de tunnel équivalente

    * Dernière version de [Visual Studio](https://visualstudio.microsoft.com/downloads/)

    * [.NET Core SDK version 3.1](https://dotnet.microsoft.com/en-us/download)

    * Microsoft Teams et un compte Teams client
- title: Configurer le bot de conversation
  durationInMinutes: 5
  content: "Inscrivez le bot auprès du service de bot Azure lorsque vous le développez et l’hébergez dans Azure. Effectuez les opérations suivantes :\n\n1. Utilisez ngrok pour créer un tunnel vers les points de terminaison de votre serveur web.\n1. Créez une inscription de canal bot dans un compte Azure.\n1. Créez une secret client qui permet l’authentification sso du bot.\n1. Ajouter des autorisations d’API pour les appels en aval.\n1. Ajoutez le point de terminaison de messagerie au tunnel ngrok que vous avez créé.\n1. Ajoutez Microsoft Teams canal pour déployer le bot sur un canal Teams’accès.\n\n**Créer un tunnel ngrok**\n\nUtilisez ngrok pour créer un tunnel vers les points de terminaison HTTPS disponibles publiquement de votre serveur web exécutant localement. Exécutez la commande suivante dans ngrok :\n\n```bash\nngrok http -host-header=rewrite 3978\n```\n\n**Créer une inscription de canal bot dans un compte Azure**\n\n1. Accédez au [Portail Azure](https://portal.azure.com/).\n1. Sélectionnez **Créer une ressource**.\n1. Recherchez **Azure Bot dans** la zone de recherche.\n1. **Sélectionnez Azure Bot**.\n\n    :::image type=\"content\" source=\"./assets/images/conversation-bot/azure-bot.png\" alt-text=\"Bot Azure.\":::\n\n1. Sélectionnez **Créer**.\n1. Entrez le nom de handle du bot dans **le champ De handle bot** .\n1. Sélectionnez **votre abonnement dans** la liste liste.\n1. Sélectionnez votre **groupe de ressources** dans la liste liste.\n\n    Pour créer un nouveau groupe de ressources, sélectionnez Créer un nouveau **groupe de ressources**, entrez le nom de la ressource, **sélectionnez OK** et sélectionnez l’emplacement requis dans la liste de listes de listes des emplacements du nouveau groupe de ressources.\n\n    :::image type=\"content\" source=\"./assets/images/conversation-bot/create-azure-bot.png\" alt-text=\"Créez un bot Azure.\":::\n\n1. **Sélectionnez Type d’application en** **tant qu’ID** **d’application Multi-Client pour Microsoft**.\n\n    > [!NOTE]\n    > Dans **la section Création du type** d’ID d’application Microsoft, créer un **ID** d’application Microsoft est déjà sélectionné pour créer un bot. Vous pouvez également sélectionner **Utiliser l’inscription d’application** existante, si vous avez déjà inscrit un bot. Entrez l’ID de l’application Microsoft dans **le champ ID** d’application existant, puis entrez la valeur dans **le champ Mot de passe de l’application** existante.\n\n1. Sélectionnez **Examiner et créer**.\n\n    :::image type=\"content\" source=\"./assets/images/conversation-bot/review-create.png\" alt-text=\"Révision et création.\":::\n\n1. **Sélectionnez Créer**, si la validation réussit. La mise en service de votre service de bot prend quelques instants.\n\n    :::image type=\"content\" source=\"./assets/images/conversation-bot/validation-passed.png\" alt-text=\"Validation du bot.\":::\n\n1. Sélectionnez **Accéder à la ressource**. Le bot et les ressources associées sont répertoriés dans le groupe de ressources.\n\n    Votre bot Azure a maintenant été créé.\n\n    :::image type=\"content\" source=\"./assets/images/conversation-bot/go-to-resource.png\" alt-text=\"Go to resource card.\":::\n\n**Pour créer une secret client**\n\n1. Dans **Paramètres**, sélectionnez **Configuration**. Enregistrez **l’ID de l’application Microsoft** (ID client) pour référence ultérieure.\n\n    :::image type=\"content\" source=\"./assets/images/conversation-bot/microsoft-app-id.png\" alt-text=\"ID de l’application Microsoft.\":::\n\n1. **Sélectionnez Gérer** en adjacent à **l’ID de l’application Microsoft**.\n\n    :::image type=\"content\" source=\"./assets/images/conversation-bot/manage-bot-label.png\" alt-text=\"Gérer l’étiquette.\":::\n\n1. Dans la section **Secrets client** , sélectionnez **Nouvelle secret client**. La **fenêtre Ajouter une secret client** s’affiche.  \n\n    :::image type=\"content\" source=\"./assets/images/conversation-bot/new-client-secret.png\" alt-text=\"Nouvelle secret client.\":::\n\n1. Entrez **description,** puis sélectionnez **Ajouter**.\n\n    :::image type=\"content\" source=\"./assets/images/conversation-bot/add-client-secret.png\" alt-text=\"Ajoutez une secret client.\":::\n\n1. **Sélectionnez Copier dans le Presse-papiers** dans la colonne **Valeur** et enregistrez l’ID de la question secrète client pour référence ultérieure.\n\n    :::image type=\"content\" source=\"./assets/images/conversation-bot/value.png\" alt-text=\"Carte de valeur.\":::\n\n**Pour ajouter des autorisations d’API pour les appels en aval**\n\n1. Dans **le volet** Gérer de votre bot, sélectionnez les **autorisations d’API**.\n1. Sélectionnez **Ajouter une autorisation**. **La fenêtre Demander des autorisations d’API** s’affiche.\n1. **Sélectionnez LES API Microsoft** et **sélectionnez Microsoft Graph**.\n1. Sélectionnez **les autorisations d’application** , puis les autorisations.\n1. Ajoutez les autorisations utilisateur dont votre application a besoin pour les API en aval, par exemple, `User.Read`.\n1. Sélectionnez **Ajouter des autorisations**.\n\n    :::image type=\"content\" source=\"./assets/images/conversation-bot/api-permissions.png\" alt-text=\"Ajouter des autorisations d’API.\" border=\"true\"lightbox=\"assets/images/conversation-bot/api-permissions.png\":::\n\n**Pour ajouter un point de terminaison de messagerie**\n\n1. Go to **Home** page of your bot and select **Configuration** under **Paramètres** from the left pane.\n1. Go to ngrok.\n1. Copiez l’URL HTTPS (https to io) comme illustré dans l’image suivante :\n    \n    :::image type=\"content\" source=\"./assets/images/conversation-bot/ngrok.png\" alt-text=\"Ngrok.\":::\n\n1. Dans **le point de terminaison de messagerie**, ajoutez l’URL HTTPS disponible à partir de ngrok et à la fin de l’URL, **ajoutez /api/messages**.\n    \n    :::image type=\"content\" source=\"./assets/images/conversation-bot/messaging-endpoint.png\" alt-text=\"Point de terminaison de messagerie.\":::\n\n1. Sélectionnez **Appliquer**.\n\n**Pour ajouter le Microsoft Teams canal**\n\n1. Go to **Home**.\n1. Dans la section **Ressources récentes** , ouvrez votre bot.\n1. **Sélectionnez Canaux** dans le volet gauche et **sélectionnez Microsoft Teams** <img src=\"~/assets/images/conversation-bot/teamsicon.png\" alt=\"Teams icon\" width=\"20\"/> dans la liste des canaux disponibles.    \n    \n    :::image type=\"content\" source=\"./assets/images/conversation-bot/channels-teams.png\" alt-text=\"Sélectionnez Teams.\":::\n\n1. Cochez la case pour accepter les conditions d’utilisation et sélectionnez **Accepter**.\n\n    :::image type=\"content\" source=\"./assets/images/conversation-bot/terms-of-service.png\" alt-text=\"Conditions d’utilisation.\":::\n\n1. Sélectionnez **Enregistrer**.\n\n    Vous avez réussi à configurer un bot dans Azure Bot Service et vous devez maintenant configurer une connexion de service de bot.\n"
- title: Configurer la connexion au service de bot
  durationInMinutes: 1
  content: "Configurez l’exemple de bot pour comprendre comment authentifier le bot de conversation dans Microsoft Teams et créer le package d’application Teams et le télécharger dans l’organisation.\n\n1. Mettez à jour appsettings.json dans Visual Studio.\n1. Mettez à jour manifest.json Visual Studio et compressez-le dans le fichier zip dans le fichier Explorateur de fichiers.\n1. Exécutez votre solution dans Visual Studio.\n1. Télécharger le bot à Teams.\n\n**Mettre à jour les appsettings pour le bot de conversation**\n\n1. Go to the repo https://github.com/Microsoft/botbuilder-samples.git.\n1. **Sélectionnez Code** et sélectionnez la dropdown.\n1. **Sélectionnez Télécharger le fichier ZIP**.\n\n    :::image type=\"content\" source=\"./assets/images/conversation-bot/repo.png\" alt-text=\"Clonage de repo.\":::\n\n1. Veillez à noter le chemin d’accès du référentiel que vous avez téléchargé.\n1. Dans la **Explorateur de fichiers**, allez à **botbuilder-samplessamples** >  >  **csharp_dotnetcore** >  **57.teams-conversation-bot**.\n1. Ouvrez **le fichier appsettings.json** dans Visual Studio et mettez à jour la configuration du bot.\n\n    * Ajoutez le nom de votre bot pour `MicrosoftAppType`.\n    * Vous pouvez obtenir l’aide `MicrosoftAppId` de la page de configuration du bot. Il s’agit `MicrosoftAppPassword` de la valeur de l’ID de secret client que vous avez enregistré précédemment.\n    * Vous pouvez obtenir le ou `MicrosoftAppTenantId` à partir `UserId` du lien du compte utilisé pour vous connecter au Teams. Suivez le chemin d’accès dans l’image pour obtenir le lien pour `tenant id`:\n    \n        :::image type=\"content\" source=\"./assets/images/conversation-bot/teams-link-new.png\" alt-text=\"Chemin d’accès de l’ID de Teams.\":::\n\n        :::image type=\"content\" source=\"./assets/images/conversation-bot/tenant-id.png\" alt-text=\"Copiez Teams lien.\":::\n\n        Copiez l’ID de client à partir de l’URL.\n\n        :::image type=\"content\" source=\"./assets/images/conversation-bot/url-tenantid.png\" alt-text=\"TenantID.\":::\n\n1. Sélectionnez **Enregistrer**.    \n    \n    :::image type=\"content\" source=\"./assets/images/conversation-bot/appsettings.png\" alt-text=\"Appsettings Json.\":::\n\n**Pour mettre à jour le manifeste**\n\n1. Dans la **Explorateur de fichiers**, allez à **botbuilder-samplessamples** >  >  **csharp_dotnetcore** >  **57.teams-conversation-botTeamsAppManifest** > .\n1. Ouvrez **le fichier manifest.json** dans Visual Studio.\n1. Dans le **fichier manifest.json** , recherchez **{id}, {botId}** et ajoutez votre ID d’application Microsoft.\n1. Ajoutez votre URL ngrok dans **validDomains** à l’exclusion et `https://` enregistrez.\n\n    :::image type=\"content\" source=\"./assets/images/conversation-bot/manifest.png\" alt-text=\"Manifeste.\":::\n\n1. Zip le contenu du **dossier TeamsAppManifest** pour créer des **manifest.zip**.\n\n    > [!NOTE]\n    > Il ne `manifest.zip` doit contenir aucun dossier supplémentaire. Il doit y avoir un `manifest json` fichier source, `color` une icône et une `outline` icône à l’intérieur du dossier zip.\n    > Exécutez votre solution dans Visual Studio et téléchargez votre manifeste dans votre client de démonstration pour l’organisation ou Teams compte.\n\n**Pour exécuter la solution dans Visual Studio**\n\n1. Ouvrez Visual Studio.\n1. **Sélectionnez Fichier** et **Ouvrir**.\n1. **Sélectionnez Project/Solution** pour ouvrir le `.csproj` fichier à partir du Explorateur de fichiers.\n1. Go to **botbuilder-samplessamples** >  >  **csharp_dotnetcore** >  **57.teams-conversation-bot**.\n1. Sélectionnez `TeamsConversationBot.csproj` un fichier et sélectionnez votre bot dans la **liste Projets de** démarrage.\n\n    :::image type=\"content\" source=\"./assets/images/conversation-bot/visual-studio.png\" alt-text=\"Visual Studio débogage.\":::\n\n1. Sélectionnez F5 pour déboguer. Vous recevrez un écran de confirmation lorsque votre bot sera prêt.\n\n    :::image type=\"content\" source=\"./assets/images/conversation-bot/bot.png\" alt-text=\"Écran prêt pour le bot.\":::\n\n**Pour télécharger l’application sur Teams**\n\n1. Go to Teams.\n1. Pour télécharger **manifest.zip**, sélectionnez **Windows Store >** Gérer vos applications > Télécharger une application personnalisée et ouvrirmanifest.zipà partir du repo dans Explorateur de fichiers.****\n\n    :::image type=\"content\" source=\"./assets/images/conversation-bot/upload-manifest.png\" alt-text=\"Chargement du manifeste dans Teams.\":::\n\n1. **Sélectionnez Ajouter** pour installer le bot de conversation dans Teams.\n\n    :::image type=\"content\" source=\"./assets/images/conversation-bot/add-app-teams.png\" alt-text=\"Ajoutez l’application Teams.\":::\n\n    Vous pouvez interagir avec ce bot maintenant.\n"
- title: Interaction avec le bot de conversation
  durationInMinutes: 2
  content: >
    Vous pouvez interagir avec le bot dans Teams en lui envoyant un message ou en sélectionnant une commande dans la liste de commandes. Le bot répond aux chaînes suivantes :


    Dans le volet gauche du Teams, sélectionnez les ellipses « ... » et sélectionnez votre application dans la liste. Le bot affiche **les suggestions** comme suit :


    :::image type="content" source="./assets/images/conversation-bot/suggestions.png" alt-text="Carte de suggestions.":::


    | MentionMe    | Afficher la bienvenue   | MessageAllMembers |

    | --- | --- | --- |

    | :::image type="content" source="./assets/images/conversation-bot/mentionme-new.png" alt-text="Mentionme card" border="true"lightbox="assets/images/conversation-bot/mentionme-new.png"::: | :::image type="content" source="./assets/images/conversation-bot/show-welcome-new.png" alt-text="Afficher la carte d’accueil" border="true"lightbox="assets/images/conversation-bot/show-welcome-new.png"::: | :::image type="content" source="./assets/images/conversation-bot/message-all-members-new.png" alt-text="Carte MessageAllMembers" border="true"lightbox="assets/images/conversation-bot/message-all-members-new.png"::: |

    | **Résultat :** Le bot répond au message et mentionne l’utilisateur. | **Résultat :** Le bot envoie la carte de bienvenue avec qui vous pouvez interagir. |  **Résultat :** Le bot envoie un message un-à-un à chaque membre de la conversation en cours. |

    | **Étendues valides : personnel** , conversation de groupe, conversation d’équipe. | **Étendues valides : personnel** , conversation de groupe, conversation d’équipe. |  **Étendues valides : personnel** , conversation de groupe, conversation d’équipe. |


    Vous pouvez sélectionner une option dans la liste de commandes en tapant **@TeamsConversationBot** dans la zone composer un message et que puis-je faire **?** texte au-dessus de la zone de composition.
- title: Défi complet
  durationInMinutes: 1
  content: >
    Avez-vous eu un projet comme celui-ci ?


    :::image type="content" source="./assets/images/conversation-bot/final-output.png" alt-text="Résultat final." border="true"lightbox="assets/images/conversation-bot/final-output.png":::
- content: Vous avez terminé le didacticiel pour commencer avec le bot de conversation pour Microsoft Teams.
