### YamlMime:Tutorial
title: Créer un bot de conversation Teams
metadata:
  title: Créer un bot de conversation Teams
  description: Avec ce module d’apprentissage, vous allez apprendre à créer un bot de conversation de base dans l’application Microsoft Teams.
  audience: Developer
  level: Beginner
  ms.date: 04/01/2022
  ms.topic: interactive-tutorial
  nextTutorialHref: bots/how-to/conversations/channel-and-group-conversations.md
  nextTutorialTitle: Conversations de canal et de groupe avec un bot
  ms.custom: mvc
  ms.localizationpriority: none
  ms.openlocfilehash: 1e6c281a22a393bfe78de864566dd39249165a93
  ms.sourcegitcommit: c1032ea4f48c4bbf5446798ff7d46d7e6e9f55d2
  ms.translationtype: MT
  ms.contentlocale: fr-FR
  ms.lasthandoff: 09/27/2022
  ms.locfileid: "68027241"
items:
- durationInMinutes: 1
  content: >
    Les bots de conversation Teams permettent aux utilisateurs d’interagir avec votre service web via du texte, des cartes interactives et des modules de tâches. Les conversations de base sont gérées via le connecteur Bot Framework, une API REST unique. Cette API permet à votre bot de communiquer avec Teams et d’autres canaux. Le Kit de développement logiciel (SDK) Bot Builder fournit les fonctionnalités suivantes :


    * Accès facile au connecteur Bot Framework.

    * Fonctionnalités supplémentaires pour gérer le flux et l’état de conversation.

    * Méthodes simples pour incorporer des services cognitifs, tels que le traitement en langage naturel (NLP).


    Lorsque votre bot est ajouté pour la première fois à un groupe ou à une équipe, un message d’introduction est envoyé. Le message fournit une brève description des fonctionnalités du bot et comment les utiliser.


    Ce guide pas à pas vous aide à créer un bot de conversation de base dans l’application Teams. La sortie suivante s’affiche :


    :::image type="content" source="./assets/images/conversation-bot/final-output.png" alt-text="Sortie finale."lightbox="assets/images/conversation-bot/final-output.png":::
- title: Conditions préalables
  durationInMinutes: 1
  content: >
    Pour configurer votre environnement de développement, installez les outils suivants :


    * [locataire Office 365](https://developer.microsoft.com/en-us/microsoft-365/dev-program)

    * [Ngrok](https://ngrok.com/) ou une solution de tunneling équivalente

    * Dernière version de [Visual Studio](https://visualstudio.microsoft.com/downloads/)

    * [Kit de développement logiciel (SDK) .NET Core version 3.1](https://dotnet.microsoft.com/en-us/download)

    * Microsoft Teams et un compte Teams
- title: Configurer un bot de conversation
  durationInMinutes: 5
  content: "Inscrivez un bot auprès du service de bot Azure lorsque vous le développez et l’hébergez dans Azure. Effectuez les opérations suivantes :\n\n1. Utilisez ngrok pour créer un tunnel vers les points de terminaison de votre serveur web.\n1. Créez l’inscription de canal de bot dans un compte Azure.\n1. Créez une clé secrète client qui active l’authentification unique du bot.\n1. Ajoutez des autorisations d’API pour les appels en aval.\n1. Ajoutez un point de terminaison de messagerie au tunnel ngrok que vous avez créé.\n1. Ajoutez un canal Microsoft Teams pour déployer le bot sur un canal Teams.\n\n**Créer un tunnel ngrok**\n\nUtilisez ngrok pour créer un tunnel vers les points de terminaison HTTPS disponibles publiquement de votre serveur web local. Exécutez la commande suivante dans ngrok :\n\n```bash\nngrok http --host-header=rewrite 3978\n```\n\n**Créer une inscription de canal bot dans un compte Azure**\n\n1. Accédez à la [Portail Azure](https://portal.azure.com/).\n1. Sélectionnez **Créer une ressource**.\n1. Recherchez **Azure Bot** dans la zone de recherche.\n1. Sélectionnez **Azure Bot**.\n\n    :::image type=\"content\" source=\"./assets/images/azure-bot.png\" alt-text=\"Bot Azure.\":::\n\n1. Sélectionnez **Créer**.\n1. Entrez le nom du handle du bot dans le champ **Descripteur** de bot.\n1. Sélectionnez votre **abonnement** dans la liste déroulante.\n1. Sélectionnez votre **groupe de ressources** existant dans la liste déroulante ou créez un groupe de ressources, **sélectionnez Créer**, entrez le nom de la ressource, **sélectionnez OK**, puis sélectionnez l’emplacement requis dans la liste déroulante **Nouvel emplacement du groupe de ressources** .\n\n    :::image type=\"content\" source=\"./assets/images/conversation-bot/create-azure-bot.png\" alt-text=\"Créez un bot Azure.\":::\n\n1. Sélectionnez **Type d’application** en tant que **multilocataire** pour **l’ID d’application Microsoft**.\n\n    > [!NOTE]\n    > Dans **la section Création de l’ID** d’application Microsoft, **l’option Créer un ID d’application Microsoft** est déjà sélectionnée pour créer un bot. Vous pouvez également sélectionner **Utiliser l’inscription d’application existante**, si vous avez déjà inscrit un bot. Entrez l’ID d’application Microsoft dans le champ **ID d’application existant** , puis entrez la valeur dans le champ **mot de passe de l’application existante** . \n1. Sélectionnez **Examiner et créer**.\n\n    :::image type=\"content\" source=\"./assets/images/conversation-bot/review-create.png\" alt-text=\"Examinez et créez.\":::\n\n1. Sélectionnez **Créer**, si la validation réussit. L’approvisionnement de votre service de bot prend quelques instants.\n\n    :::image type=\"content\" source=\"./assets/images/conversation-bot/validation-passed.png\" alt-text=\"Validation du bot.\":::\n\n1. Sélectionnez **Accéder à la ressource**. Le bot et les ressources associées sont répertoriés dans le groupe de ressources.\n\n    Votre bot Azure a maintenant été créé.\n\n    :::image type=\"content\" source=\"./assets/images/conversation-bot/go-to-resource.png\" alt-text=\"Accédez à la carte de ressources.\":::\n\n**Pour créer une clé secrète client**\n\n1. Dans **Paramètres**, sélectionnez **Configuration**. Enregistrez **l’ID d’application Microsoft** (ID client) pour référence ultérieure.\n\n    :::image type=\"content\" source=\"./assets/images/conversation-bot/microsoft-app-id.png\" alt-text=\"ID d’application Microsoft.\":::\n\n1. Sélectionnez **Gérer** à côté de **l’ID d’application Microsoft**.\n\n   :::image type=\"content\" source=\"~/assets/images/manage-bot-label.png\" alt-text=\"gérer le bot\":::\n\n1. Dans la section **Secrets client** , sélectionnez **Nouvelle clé secrète client**. La fenêtre **Ajouter une clé secrète client** s’affiche.  \n\n    :::image type=\"content\" source=\"./assets/images/meetings-side-panel/newclientsecret.png\" alt-text=\"Nouvelle clé secrète client.\":::\n\n1. Entrez **Description** , puis **sélectionnez Ajouter**.\n\n    :::image type=\"content\" source=\"./assets/images/conversation-bot/add-client-secret.png\" alt-text=\"Ajoutez une clé secrète client.\":::\n\n1. Sélectionnez Copier dans le **Presse-papiers** dans la colonne **Valeur** et enregistrez l’ID de secret client pour référence ultérieure.\n\n    :::image type=\"content\" source=\"./assets/images/conversation-bot/value.png\" alt-text=\"Carte valeur.\":::\n\n**Pour ajouter des autorisations d’API pour les appels en aval**\n\n1. Dans **le volet Gérer** de votre bot, sélectionnez **autorisations d’API**.\n1. Sélectionnez **Ajouter une autorisation**. **La fenêtre Demander des autorisations d’API** s’affiche.\n1. Sélectionnez **LES API Microsoft** , puis **Microsoft Graph**.\n1. Sélectionnez **Autorisations d’application**, puis sélectionnez autorisations.\n1. Ajoutez toutes les autorisations utilisateur dont votre application a besoin pour les API en aval, par exemple. `User.Read`\n1. Sélectionnez **Ajouter des autorisations**.\n\n    :::image type=\"content\" source=\"./assets/images/conversation-bot/api-permissions.png\" alt-text=\"Ajoutez des autorisations d’API.\"lightbox=\"assets/images/conversation-bot/api-permissions.png\":::\n\n**Pour ajouter un point de terminaison de messagerie**\n\n1. Accédez à la page **d’accueil** de votre bot et sélectionnez **Configuration** sous **Paramètres** dans le volet gauche.\n1. Accédez à ngrok.\n1. Copiez l’URL HTTPS (https vers io) comme illustré dans l’image suivante :\n    \n   :::image type=\"content\" source=\"../msteams-platform/assets/images/ngrok-url.png\" alt-text=\"URL HTTPS ngrok\":::\n   \n1. Dans **le point de terminaison de messagerie**, ajoutez l’URL HTTPS disponible à partir de ngrok et, à la fin de l’URL, ajoutez **/api/messages**.\n    \n    :::image type=\"content\" source=\"./assets/images/conversation-bot/messaging-endpoint.png\" alt-text=\"Point de terminaison de messagerie.\":::\n\n1. Sélectionnez **Appliquer**.\n\n**Pour ajouter le canal Microsoft Teams**\n\n1. Accéder à **l’Accueil**\n1. Dans la section **Ressources récentes** , ouvrez votre bot.\n1. Sélectionnez **Canaux** dans le volet gauche, puis **Microsoft Teams** <img src=\"~/assets/images/bots/teamsicon.png\" alt=\"Teams icon\" width=\"20\"/> dans la liste des canaux disponibles.    \n    \n    :::image type=\"content\" source=\"~/assets/images/adaptive-cards/channel-teams.png\" alt-text=\"Sélectionner Teams dans les canaux\":::\n\n1. Cochez la case pour accepter les conditions d’utilisation, puis **sélectionnez Accepter**.\n\n    :::image type=\"content\" source=\"./assets/images/conversation-bot/terms-of-service.png\" alt-text=\"Conditions d’utilisation.\":::\n\n1. Sélectionnez **Enregistrer**.\n\n    Vous avez correctement configuré un bot dans Azure Bot Service et vous devez maintenant configurer la connexion au service bot.\n"
- title: Configurer la connexion au service de bot
  durationInMinutes: 1
  content: "Configurez l’exemple de bot pour comprendre comment authentifier le bot de conversation dans Microsoft Teams, créer le package d’application Teams et le charger dans l’organisation.\n\n1. Mettez à jour appsettings.json dans Visual Studio.\n1. Mettez à jour manifest.json dans Visual Studio et compressez-le dans le fichier zip du Explorateur de fichiers.\n1. Exécutez votre solution dans Visual Studio.\n1. Chargez le bot dans Teams.\n\n**Mettre à jour appsettings pour le bot de conversation**\n\n1. Accédez au référentiel https://github.com/Microsoft/botbuilder-samples.git.\n1. Sélectionnez **Code** , puis sélectionnez la liste déroulante.\n1. Sélectionnez **Télécharger zip**.\n\n    :::image type=\"content\" source=\"./assets/images/conversation-bot/repo.png\" alt-text=\"Clonage de référentiel.\":::\n\n1. Veillez à noter le chemin d’accès du référentiel que vous avez téléchargé.\n1. Dans le **Explorateur de fichiers**, accédez aux **exemples botbuilder-samples** >  > **csharp_dotnetcore** > **57.teams-conversation-bot**.\n1. Ouvrez le fichier **appsettings.json** dans Visual Studio et mettez à jour la configuration du bot.\n\n    * Ajoutez le nom de votre bot pour `MicrosoftAppType`.\n    * Vous pouvez obtenir l’élément `MicrosoftAppId` à partir de la page de configuration du bot. Il `MicrosoftAppPassword` s’agit de la valeur de l’ID de secret client que vous avez enregistré précédemment.\n    * Vous pouvez obtenir le `MicrosoftAppTenantId` lien `UserId` ou à partir du compte utilisé pour vous connecter à Teams. Suivez le chemin d’accès dans l’image pour obtenir le lien pour `tenant id`:\n    \n        :::image type=\"content\" source=\"./assets/images/conversation-bot/teams-link-new.png\" alt-text=\"Chemin d’accès de l’ID de locataire dans Teams.\":::\n\n        :::image type=\"content\" source=\"./assets/images/conversation-bot/tenant-id.png\" alt-text=\"Copier le lien Teams.\":::\n\n        Copiez l’ID de locataire à partir de l’URL.\n\n        :::image type=\"content\" source=\"./assets/images/conversation-bot/url-tenantid.png\" alt-text=\"TenantID.\":::\n\n1. Sélectionnez **Enregistrer**.    \n    \n    :::image type=\"content\" source=\"./assets/images/conversation-bot/appsettings.png\" alt-text=\"Appsettings Json.\":::\n\n**Pour mettre à jour le manifeste**\n\n1. Dans le **Explorateur de fichiers**, accédez aux **exemples botbuilder-samples** >  > **csharp_dotnetcore** > **57.teams-conversation-bot** > **TeamsAppManifest**.\n1. Ouvrez le fichier **manifest.json** dans Visual Studio.\n1. Dans le fichier **manifest.json** , recherchez **{id}, {botId}** et ajoutez votre ID d’application Microsoft.\n1. Ajoutez votre URL ngrok dans **validDomains** à l’exclusion et à l’enregistrement `https://` .\n\n    :::image type=\"content\" source=\"./assets/images/conversation-bot/manifest.png\" alt-text=\"Manifeste.\":::\n\n1. Compressez le contenu du dossier **TeamsAppManifest** pour créer **manifest.zip**.\n\n    > [!NOTE]\n    > Ne `manifest.zip` doit pas contenir de dossiers supplémentaires. Il doit contenir un `manifest json` fichier source, `color` une icône et `outline` une icône dans le dossier zip.\n    > Exécutez votre solution dans Visual Studio et chargez votre manifeste dans votre locataire de démonstration pour l’organisation ou votre compte Teams.\n\n**Pour exécuter la solution dans Visual Studio**\n\n1. Ouvrez Visual Studio.\n1. Sélectionnez **Fichier** , puis **Ouvrez**.\n1. Sélectionnez **Projet/Solution** pour ouvrir le `.csproj` fichier à partir du Explorateur de fichiers.\n1. Accédez aux **exemples botbuilder-samples** >  > **csharp_dotnetcore** > **57.teams-conversation-bot**.\n1. Sélectionnez le fichier et sélectionnez `TeamsConversationBot.csproj` votre bot dans la liste **Projets de démarrage** .\n\n    :::image type=\"content\" source=\"./assets/images/conversation-bot/visual-studio.png\" alt-text=\"Débogage Visual Studio.\":::\n\n1. Sélectionnez F5 pour déboguer. Vous recevrez un écran de confirmation lorsque votre bot sera prêt.\n\n    :::image type=\"content\" source=\"./assets/images/conversation-bot/bot.png\" alt-text=\"Écran prêt pour le bot.\":::\n\n**Pour charger l’application dans Teams**\n\n1. Accédez à Teams.\n1. Pour charger **manifest.zip**, sélectionnez **Store > Manage your apps > Upload a custom app** and open **manifest.zip** from the repo in Explorateur de fichiers.\n\n    :::image type=\"content\" source=\"./assets/images/conversation-bot/upload-manifest.png\" alt-text=\"Chargement du manifeste dans Teams.\":::\n\n1. Sélectionnez **Ajouter** pour installer le bot de conversation dans Teams.\n\n    :::image type=\"content\" source=\"./assets/images/conversation-bot/add-app-teams.png\" alt-text=\"Ajouter une application à Teams.\":::\n\n    Vous pouvez interagir avec ce bot maintenant.\n"
- title: Interaction avec le bot de conversation
  durationInMinutes: 2
  content: >
    Vous pouvez interagir avec le bot dans Teams en lui envoyant un message ou en sélectionnant une commande dans la liste de commandes. Le bot répond aux chaînes suivantes :


    Dans le volet gauche de Teams, sélectionnez les points de suspension ●●●, puis sélectionnez votre application dans la liste. Le bot affiche **les suggestions** comme suit :


    :::image type="content" source="./assets/images/conversation-bot/suggestions.png" alt-text="Carte de suggestions.":::


    | MentionMe    | Afficher l’accueil   | MessageAllMembers |

    | --- | --- | --- |

    | :::image type="content" source="./assets/images/conversation-bot/mentionme-new.png" alt-text="Carte Mentionme"lightbox="assets/images/conversation-bot/mentionme-new.png"::: | :::image type="content" source="./assets/images/conversation-bot/show-welcome-new.png" alt-text="Afficher la carte de bienvenue"lightbox="assets/images/conversation-bot/show-welcome-new.png"::: | :::image type="content" source="./assets/images/conversation-bot/message-all-members-new.png" alt-text="Carte MessageAllMembers"lightbox="assets/images/conversation-bot/message-all-members-new.png"::: |

    | **Résultat:** Le bot répond au message et mentionne l’utilisateur. | **Résultat:** Le bot envoie la carte de bienvenue avec laquelle vous pouvez interagir. |  **Résultat:** Le bot envoie un message un-à-un à chaque membre de la conversation actuelle. |

    | **Étendues valides :** personnelle, conversation de groupe, conversation d’équipe. | **Étendues valides :** personnelle, conversation de groupe, conversation d’équipe. |  **Étendues valides :** personnelle, conversation de groupe, conversation d’équipe. |


    Vous pouvez sélectionner une option dans la liste de commandes en tapant **@TeamsConversationBot** dans la zone de message de composition et **que puis-je faire ?** Texte au-dessus de la zone de composition.
- title: Relever le défi
  durationInMinutes: 1
  content: >
    Tu as trouvé quelque chose comme ça ?


    :::image type="content" source="./assets/images/conversation-bot/final-output.png" alt-text="Sortie finale."lightbox="assets/images/conversation-bot/final-output.png":::
- content: Vous avez terminé le didacticiel pour commencer à utiliser le bot de conversation pour Microsoft Teams.
