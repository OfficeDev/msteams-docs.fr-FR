---
title: Combiner des robots à des onglets
description: Décrit l’utilisation conjointe des onglets et des bots
keywords: développement des onglets robots teams
ms.date: 03/15/2018
ms.openlocfilehash: 59ae8bc01f82c70dd7ea6869cb870e26acae1293
ms.sourcegitcommit: 4329a94918263c85d6c65ff401f571556b80307b
ms.translationtype: MT
ms.contentlocale: fr-FR
ms.lasthandoff: 02/01/2020
ms.locfileid: "41673833"
---
# <a name="combine-bots-with-tabs"></a><span data-ttu-id="b2b2b-104">Combiner des robots à des onglets</span><span class="sxs-lookup"><span data-stu-id="b2b2b-104">Combine bots with tabs</span></span>

[!include[v3-to-v4-SDK-pointer](~/includes/v3-to-v4-pointer-bots.md)]

<span data-ttu-id="b2b2b-105">Les robots et les onglets fonctionnent bien ensemble et sont souvent combinés en un seul service principal.</span><span class="sxs-lookup"><span data-stu-id="b2b2b-105">Bots and tabs work well together, and are often combined into a single back-end service.</span></span> <span data-ttu-id="b2b2b-106">Cette section décrit les meilleures pratiques et les modèles courants pour l’utilisation conjointe des onglets et des bots.</span><span class="sxs-lookup"><span data-stu-id="b2b2b-106">This section describes best practices and common patterns for using tabs and bots together.</span></span>

## <a name="associating-user-identities-across-bot-and-tab"></a><span data-ttu-id="b2b2b-107">Association d’identités d’utilisateur entre un bot et un onglet</span><span class="sxs-lookup"><span data-stu-id="b2b2b-107">Associating user identities across bot and tab</span></span>

<span data-ttu-id="b2b2b-108">Par exemple : Supposons que votre application d’onglet utilise un système d’ID propriétaire pour sécuriser son contenu.</span><span class="sxs-lookup"><span data-stu-id="b2b2b-108">For example: Suppose your tab application uses a proprietary ID system to secure its content.</span></span> <span data-ttu-id="b2b2b-109">Supposons que vous avez également un bot qui peut interagir avec l’utilisateur.</span><span class="sxs-lookup"><span data-stu-id="b2b2b-109">Suppose you also have a bot that can interact with the user.</span></span> <span data-ttu-id="b2b2b-110">En règle générale, vous voudrez afficher le contenu sous l’onglet qui est propre à l’utilisateur de l’affichage.</span><span class="sxs-lookup"><span data-stu-id="b2b2b-110">Typically, you’ll want to show content in the tab that is specific to the viewing user.</span></span> <span data-ttu-id="b2b2b-111">Le défi réside dans le fait que l’IDENTIFIant de l’utilisateur dans votre système est probablement différent de l’ID utilisateur Microsoft Teams.</span><span class="sxs-lookup"><span data-stu-id="b2b2b-111">The challenge is that the user ID in your system is likely different from the Microsoft Teams user ID.</span></span> <span data-ttu-id="b2b2b-112">Comment associer ces deux identités ?</span><span class="sxs-lookup"><span data-stu-id="b2b2b-112">So how do you associate these two identities?</span></span>
<span data-ttu-id="b2b2b-113">En règle générale, l’approche recommandée consiste à connecter l’utilisateur à l’aide du robot en utilisant le même système d’identité que celui utilisé pour fournir l’authentification pour le contenu de l’onglet.</span><span class="sxs-lookup"><span data-stu-id="b2b2b-113">In general, the recommended approach is to sign the user in with the bot using the same identity system used to provide authentication for the tab content.</span></span> <span data-ttu-id="b2b2b-114">Vous pouvez implémenter cette opération via l’action de connexion, qui se connecte généralement à l’utilisateur via un flux OAuth.</span><span class="sxs-lookup"><span data-stu-id="b2b2b-114">You can implement this via the sign-in action, which typically logs in the user via an OAuth flow.</span></span>

<span data-ttu-id="b2b2b-115">Ce flux fonctionne mieux si votre fournisseur d’identité implémente le protocole OAuth 2,0.</span><span class="sxs-lookup"><span data-stu-id="b2b2b-115">This flow works best if your identity provider implements the OAuth 2.0 protocol.</span></span> <span data-ttu-id="b2b2b-116">Vous pouvez ensuite associer l’ID d’utilisateur teams aux informations d’identification de l’utilisateur à partir de votre propre service d’identité.</span><span class="sxs-lookup"><span data-stu-id="b2b2b-116">You can then associate the Teams user ID with the user’s credentials from your own identity service.</span></span>

   ![Association d’identités](~/assets/images/bots/associating_contexts.png)

## <a name="constructing-deep-links-to-tabs-in-messages-from-your-bot"></a><span data-ttu-id="b2b2b-118">Création de liens détaillés vers des onglets dans les messages à partir de votre robot</span><span class="sxs-lookup"><span data-stu-id="b2b2b-118">Constructing deep links to tabs in messages from your bot</span></span>

<span data-ttu-id="b2b2b-119">Vous pouvez utiliser des onglets pour afficher un plus grand nombre de contenu pouvant être contenu dans une carte ou un moyen d’effectuer des tâches complexes de remplissage de formulaires à l’aide de la toile de tabulation.</span><span class="sxs-lookup"><span data-stu-id="b2b2b-119">You may want to use tabs to show more content than can fit inside of a card, or provide a way to complete complex form-filling tasks using the tab canvas.</span></span> <span data-ttu-id="b2b2b-120">Par exemple, vous pouvez envisager de parcourir l’utilisateur vers l’onglet lorsqu’il clique sur la carte à partir de votre bot.</span><span class="sxs-lookup"><span data-stu-id="b2b2b-120">For example, consider navigating the user to the tab when he or she clicks on the card from your bot.</span></span> <span data-ttu-id="b2b2b-121">Pour que cela se produise, vous devez coder le message de votre bot afin d’inclure une URL de [lien détaillé](~/concepts/build-and-test/deep-links.md) , soit par balisage, soit comme cible de l’action openUrl.</span><span class="sxs-lookup"><span data-stu-id="b2b2b-121">For this to happen, you’ll need to encode your bot’s message to include a [deep link](~/concepts/build-and-test/deep-links.md) URL, either via markup or as the target of the openUrl action.</span></span>

<span data-ttu-id="b2b2b-122">Les liens détaillés s’appuient sur un entityId, qui est une valeur opaque qui correspond à une entité unique de votre système.</span><span class="sxs-lookup"><span data-stu-id="b2b2b-122">Deep links rely on an entityId, which is an opaque value that maps to a unique entity in your system.</span></span> <span data-ttu-id="b2b2b-123">Lorsque l’onglet est créé, vous pouvez stocker un état simple (par exemple, un indicateur) sur votre serveur principal, indiquant que l’onglet a été créé dans le canal.</span><span class="sxs-lookup"><span data-stu-id="b2b2b-123">When the tab is created, you ideally store some simple state (e.g. flag) on your backend indicating the tab has been created in the channel.</span></span> <span data-ttu-id="b2b2b-124">Lorsque votre bot construit un message, il peut cibler le entityId associé à cet onglet.</span><span class="sxs-lookup"><span data-stu-id="b2b2b-124">When your bot constructs a message, it can target the entityId associated with that tab.</span></span>

<span data-ttu-id="b2b2b-125">**Remarque :** dans les conversations personnelles, étant donné que les onglets sont « statiques » et installés avec l’application, vous pouvez toujours supposer leur existence et donc créer des liens détaillés en conséquence.</span><span class="sxs-lookup"><span data-stu-id="b2b2b-125">**Note:** in personal chats, because tabs are “static” and installed with the app, you can always assume their existence and thus construct deep links accordingly.</span></span>

## <a name="sending-notifications-for-tab-updates"></a><span data-ttu-id="b2b2b-126">Envoi de notifications pour les mises à jour d’onglet</span><span class="sxs-lookup"><span data-stu-id="b2b2b-126">Sending notifications for tab updates</span></span>

<span data-ttu-id="b2b2b-127">Il est souvent préférable d’avertir l’utilisateur final chaque fois qu’une action de mise à jour ou d’utilisateur se produit dans un onglet. Un exemple de scénario consiste à attribuer une tâche ou un ticket à un membre de l’équipe, puis à avertir ce membre d’équipe.</span><span class="sxs-lookup"><span data-stu-id="b2b2b-127">Often you’ll want to notify the end user whenever an update or a user action occurs in a tab. An example scenario is assigning a task or ticket to a fellow team member and then notifying that team member.</span></span>

<span data-ttu-id="b2b2b-128">Il existe deux façons d’atteindre ce scénario :</span><span class="sxs-lookup"><span data-stu-id="b2b2b-128">There are two ways of achieving this scenario:</span></span>

1. <span data-ttu-id="b2b2b-129">Si vous souhaitez avertir un canal entier, votre bot peut publier de manière asynchrone un message sur le canal.</span><span class="sxs-lookup"><span data-stu-id="b2b2b-129">If you wish to notify an entire channel your bot can asynchronously post a message to the channel.</span></span> <span data-ttu-id="b2b2b-130">Il n’existe aucun moyen pour un bot de créer de façon proactive la conversation par onglet si elle n’a pas été créée avec l’onglet.</span><span class="sxs-lookup"><span data-stu-id="b2b2b-130">There is no way for a bot to proactively create the tab conversation if it wasn't created with the tab.</span></span>

2. <span data-ttu-id="b2b2b-131">Si vous souhaitez uniquement informer le destinataire ou les parties intéressées de l’action, votre robot peut envoyer un message de conversation personnelle à l’utilisateur.</span><span class="sxs-lookup"><span data-stu-id="b2b2b-131">If you wish to only notify the recipient or interested parties involved with the action, your bot can send a personal chat message to the user.</span></span> <span data-ttu-id="b2b2b-132">Vous devez d’abord vérifier s’il existe une conversation personnelle entre votre robot et l’utilisateur.</span><span class="sxs-lookup"><span data-stu-id="b2b2b-132">You should first check to see if a personal conversation between your bot and the user exists.</span></span> <span data-ttu-id="b2b2b-133">Si ce n’est pas le `CreateConversation` cas, vous pouvez appeler pour lancer la conversation personnelle.</span><span class="sxs-lookup"><span data-stu-id="b2b2b-133">If not, you can call `CreateConversation` to initiate the personal chat.</span></span>

<span data-ttu-id="b2b2b-134">Dans les deux cas, utilisez les notifications d’événement avec prudence et jamais le courrier indésirable par l’utilisateur avec des mises à jour inutiles.</span><span class="sxs-lookup"><span data-stu-id="b2b2b-134">In both cases, use event notifications wisely and never spam the user with unnecessary updates.</span></span>
