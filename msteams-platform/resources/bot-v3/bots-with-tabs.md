---
title: Combiner les bots avec les onglets
description: Décrit comment utiliser les onglets et les bots ensemble
keywords: équipes bots onglets développement
ms.topic: conceptual
localization_priority: Normal
ms.date: 03/15/2018
ms.openlocfilehash: 3273369ad1122355b792dc3d429c3a4eff7e1d47
ms.sourcegitcommit: 51e4a1464ea58c254ad6bd0317aca03ebf6bf1f6
ms.translationtype: MT
ms.contentlocale: fr-FR
ms.lasthandoff: 05/19/2021
ms.locfileid: "52566452"
---
# <a name="combine-bots-with-tabs"></a><span data-ttu-id="353d9-104">Combiner les bots avec les onglets</span><span class="sxs-lookup"><span data-stu-id="353d9-104">Combine bots with tabs</span></span>

[!include[v3-to-v4-SDK-pointer](~/includes/v3-to-v4-pointer-bots.md)]

<span data-ttu-id="353d9-105">Les bots et les onglets fonctionnent bien ensemble, et sont souvent combinés en un seul service back-end.</span><span class="sxs-lookup"><span data-stu-id="353d9-105">Bots and tabs work well together, and are often combined into a single back-end service.</span></span> <span data-ttu-id="353d9-106">Cette section décrit les meilleures pratiques et les modèles communs pour l’utilisation d’onglets et de bots ensemble.</span><span class="sxs-lookup"><span data-stu-id="353d9-106">This section describes best practices and common patterns for using tabs and bots together.</span></span>

## <a name="associating-user-identities-across-bot-and-tab"></a><span data-ttu-id="353d9-107">Associer les identités des utilisateurs à travers le bot et l’onglet</span><span class="sxs-lookup"><span data-stu-id="353d9-107">Associating user identities across bot and tab</span></span>

<span data-ttu-id="353d9-108">Par exemple : Supposons que votre application d’onglet utilise un système d’identification propriétaire pour sécuriser son contenu.</span><span class="sxs-lookup"><span data-stu-id="353d9-108">For example: Suppose your tab application uses a proprietary ID system to secure its content.</span></span> <span data-ttu-id="353d9-109">Supposons que vous avez également un bot qui peut interagir avec l’utilisateur.</span><span class="sxs-lookup"><span data-stu-id="353d9-109">Suppose you also have a bot that can interact with the user.</span></span> <span data-ttu-id="353d9-110">En règle générale, vous souhaitez afficher le contenu de l’onglet qui est spécifique à l’utilisateur de visualisation.</span><span class="sxs-lookup"><span data-stu-id="353d9-110">Typically, you’ll want to show content in the tab that is specific to the viewing user.</span></span> <span data-ttu-id="353d9-111">Le défi est que l’iD utilisateur dans votre système est probablement différent de l’Microsoft Teams’utilisateur.</span><span class="sxs-lookup"><span data-stu-id="353d9-111">The challenge is that the user ID in your system is likely different from the Microsoft Teams user ID.</span></span> <span data-ttu-id="353d9-112">Alors, comment associez-vous ces deux identités?</span><span class="sxs-lookup"><span data-stu-id="353d9-112">So how do you associate these two identities?</span></span>
<span data-ttu-id="353d9-113">En général, l’approche recommandée consiste à connecter l’utilisateur avec le bot en utilisant le même système d’identité utilisé pour fournir l’authentification pour le contenu de l’onglet.</span><span class="sxs-lookup"><span data-stu-id="353d9-113">In general, the recommended approach is to sign the user in with the bot using the same identity system used to provide authentication for the tab content.</span></span> <span data-ttu-id="353d9-114">Vous pouvez implémenter cela via l’action de connexion, qui se connecte généralement à l’utilisateur via un flux OAuth.</span><span class="sxs-lookup"><span data-stu-id="353d9-114">You can implement this via the sign-in action, which typically logs in the user via an OAuth flow.</span></span>

<span data-ttu-id="353d9-115">Ce flux fonctionne mieux si votre fournisseur d’identité implémente le protocole OAuth 2.0.</span><span class="sxs-lookup"><span data-stu-id="353d9-115">This flow works best if your identity provider implements the OAuth 2.0 protocol.</span></span> <span data-ttu-id="353d9-116">Vous pouvez ensuite associer le Teams utilisateur à l’identifiant de l’utilisateur à partir de votre propre service d’identité.</span><span class="sxs-lookup"><span data-stu-id="353d9-116">You can then associate the Teams user ID with the user’s credentials from your own identity service.</span></span>

   ![Associer les identités](~/assets/images/bots/associating_contexts.png)

## <a name="constructing-deep-links-to-tabs-in-messages-from-your-bot"></a><span data-ttu-id="353d9-118">Construire des liens profonds vers les onglets dans les messages de votre bot</span><span class="sxs-lookup"><span data-stu-id="353d9-118">Constructing deep links to tabs in messages from your bot</span></span>

<span data-ttu-id="353d9-119">Vous pouvez utiliser des onglets pour afficher plus de contenu que ce qui peut s’insérer à l’intérieur d’une carte, ou fournir un moyen d’effectuer des tâches complexes de remplissage de formulaires à l’aide de la toile d’onglet.</span><span class="sxs-lookup"><span data-stu-id="353d9-119">You may want to use tabs to show more content than can fit inside of a card, or provide a way to complete complex form-filling tasks using the tab canvas.</span></span> <span data-ttu-id="353d9-120">Par exemple, envisagez de naviguer sur l’utilisateur à l’onglet quand il ou elle clique sur la carte de votre bot.</span><span class="sxs-lookup"><span data-stu-id="353d9-120">For example, consider navigating the user to the tab when he or she clicks on the card from your bot.</span></span> <span data-ttu-id="353d9-121">Pour ce faire, vous devrez coder le message de votre bot pour inclure une URL de [lien profond,](~/concepts/build-and-test/deep-links.md) soit par balisage, soit comme cible de l’action openUrl.</span><span class="sxs-lookup"><span data-stu-id="353d9-121">For this to happen, you’ll need to encode your bot’s message to include a [deep link](~/concepts/build-and-test/deep-links.md) URL, either through markup or as the target of the openUrl action.</span></span>

<span data-ttu-id="353d9-122">Les liens profonds reposent sur une entityId, qui est une valeur opaque qui cartographie une entité unique dans votre système.</span><span class="sxs-lookup"><span data-stu-id="353d9-122">Deep links rely on an entityId, which is an opaque value that maps to a unique entity in your system.</span></span> <span data-ttu-id="353d9-123">Lorsque l’onglet est créé, vous stockez idéalement un état simple, par exemple, drapeau sur votre backend indiquant que l’onglet a été créé dans le canal.</span><span class="sxs-lookup"><span data-stu-id="353d9-123">When the tab is created, you ideally store some simple state, For example, flag on your backend indicating the tab has been created in the channel.</span></span> <span data-ttu-id="353d9-124">Lorsque votre bot construit un message, il peut cibler l’entityId associé à cet onglet.</span><span class="sxs-lookup"><span data-stu-id="353d9-124">When your bot constructs a message, it can target the entityId associated with that tab.</span></span>

> [!NOTE]
> <span data-ttu-id="353d9-125">dans les chats personnels, parce que les onglets sont « statiques » et installés avec l’application, vous pouvez toujours assumer leur existence et ainsi construire des liens profonds en conséquence.</span><span class="sxs-lookup"><span data-stu-id="353d9-125">in personal chats, because tabs are “static” and installed with the app, you can always assume their existence and thus construct deep links accordingly.</span></span>

## <a name="sending-notifications-for-tab-updates"></a><span data-ttu-id="353d9-126">Envoi de notifications pour les mises à jour d’onglets</span><span class="sxs-lookup"><span data-stu-id="353d9-126">Sending notifications for tab updates</span></span>

<span data-ttu-id="353d9-127">Souvent, vous souhaitez aviser l’utilisateur final chaque fois qu’une mise à jour ou une action utilisateur se produit dans un onglet. Un scénario d’exemple est l’attribution d’une tâche ou d’un billet à un autre membre de l’équipe, puis l’aviser de ce membre de l’équipe.</span><span class="sxs-lookup"><span data-stu-id="353d9-127">Often you’ll want to notify the end user whenever an update or a user action occurs in a tab. An example scenario is assigning a task or ticket to a fellow team member and then notifying that team member.</span></span>

<span data-ttu-id="353d9-128">Il y a deux façons d’atteindre ce scénario :</span><span class="sxs-lookup"><span data-stu-id="353d9-128">There are two ways of achieving this scenario:</span></span>

1. <span data-ttu-id="353d9-129">Si vous souhaitez aviser un canal entier, votre bot peut poster un message asynchrone sur le canal.</span><span class="sxs-lookup"><span data-stu-id="353d9-129">If you wish to notify an entire channel your bot can asynchronously post a message to the channel.</span></span> <span data-ttu-id="353d9-130">Il n’y a aucun moyen pour un bot de créer proactivement la conversation onglet si elle n’a pas été créée avec l’onglet.</span><span class="sxs-lookup"><span data-stu-id="353d9-130">There is no way for a bot to proactively create the tab conversation if it wasn't created with the tab.</span></span>

2. <span data-ttu-id="353d9-131">Si vous souhaitez uniquement aviser le destinataire ou les parties intéressées impliquées dans l’action, votre bot peut envoyer un message de chat personnel à l’utilisateur.</span><span class="sxs-lookup"><span data-stu-id="353d9-131">If you wish to only notify the recipient or interested parties involved with the action, your bot can send a personal chat message to the user.</span></span> <span data-ttu-id="353d9-132">Vous devez d’abord vérifier si une conversation personnelle entre votre bot et l’utilisateur existe.</span><span class="sxs-lookup"><span data-stu-id="353d9-132">You should first check to see if a personal conversation between your bot and the user exists.</span></span> <span data-ttu-id="353d9-133">Sinon, vous pouvez appeler `CreateConversation` pour lancer le chat personnel.</span><span class="sxs-lookup"><span data-stu-id="353d9-133">If not, you can call `CreateConversation` to initiate the personal chat.</span></span>

<span data-ttu-id="353d9-134">Dans les deux cas, utilisez les notifications d’événements à bon escient et ne spammez jamais l’utilisateur avec des mises à jour inutiles.</span><span class="sxs-lookup"><span data-stu-id="353d9-134">In both cases, use event notifications wisely and never spam the user with unnecessary updates.</span></span>
