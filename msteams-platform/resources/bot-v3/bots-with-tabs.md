---
title: Combiner des bots avec des onglets
description: Décrit comment utiliser les onglets et les bots ensemble
keywords: Développement d’onglets de bots teams
ms.topic: conceptual
localization_priority: Normal
ms.date: 03/15/2018
ms.openlocfilehash: 3273369ad1122355b792dc3d429c3a4eff7e1d47
ms.sourcegitcommit: 51e4a1464ea58c254ad6bd0317aca03ebf6bf1f6
ms.translationtype: MT
ms.contentlocale: fr-FR
ms.lasthandoff: 05/19/2021
ms.locfileid: "52566452"
---
# <a name="combine-bots-with-tabs"></a><span data-ttu-id="ffd53-104">Combiner des bots avec des onglets</span><span class="sxs-lookup"><span data-stu-id="ffd53-104">Combine bots with tabs</span></span>

[!include[v3-to-v4-SDK-pointer](~/includes/v3-to-v4-pointer-bots.md)]

<span data-ttu-id="ffd53-105">Les bots et les onglets fonctionnent bien ensemble et sont souvent combinés en un seul service back-end.</span><span class="sxs-lookup"><span data-stu-id="ffd53-105">Bots and tabs work well together, and are often combined into a single back-end service.</span></span> <span data-ttu-id="ffd53-106">Cette section décrit les meilleures pratiques et les modèles courants pour l’utilisation des onglets et des bots ensemble.</span><span class="sxs-lookup"><span data-stu-id="ffd53-106">This section describes best practices and common patterns for using tabs and bots together.</span></span>

## <a name="associating-user-identities-across-bot-and-tab"></a><span data-ttu-id="ffd53-107">Association d’identités d’utilisateurs entre le bot et l’onglet</span><span class="sxs-lookup"><span data-stu-id="ffd53-107">Associating user identities across bot and tab</span></span>

<span data-ttu-id="ffd53-108">Par exemple : supposons que votre application d’onglet utilise un système d’ID propriétaire pour sécuriser son contenu.</span><span class="sxs-lookup"><span data-stu-id="ffd53-108">For example: Suppose your tab application uses a proprietary ID system to secure its content.</span></span> <span data-ttu-id="ffd53-109">Supposons que vous avez également un bot qui peut interagir avec l’utilisateur.</span><span class="sxs-lookup"><span data-stu-id="ffd53-109">Suppose you also have a bot that can interact with the user.</span></span> <span data-ttu-id="ffd53-110">En règle générale, vous souhaiterez afficher dans l’onglet du contenu spécifique à l’utilisateur d’affichage.</span><span class="sxs-lookup"><span data-stu-id="ffd53-110">Typically, you’ll want to show content in the tab that is specific to the viewing user.</span></span> <span data-ttu-id="ffd53-111">La difficulté est que l’ID d’utilisateur dans votre système est probablement différent de l’ID Microsoft Teams’utilisateur.</span><span class="sxs-lookup"><span data-stu-id="ffd53-111">The challenge is that the user ID in your system is likely different from the Microsoft Teams user ID.</span></span> <span data-ttu-id="ffd53-112">Comment associer ces deux identités ?</span><span class="sxs-lookup"><span data-stu-id="ffd53-112">So how do you associate these two identities?</span></span>
<span data-ttu-id="ffd53-113">En règle générale, l’approche recommandée consiste à signer l’utilisateur avec le bot à l’aide du système d’identité utilisé pour fournir l’authentification pour le contenu de l’onglet.</span><span class="sxs-lookup"><span data-stu-id="ffd53-113">In general, the recommended approach is to sign the user in with the bot using the same identity system used to provide authentication for the tab content.</span></span> <span data-ttu-id="ffd53-114">Vous pouvez l’implémenter via l’action de connexion, qui connecte généralement l’utilisateur via un flux OAuth.</span><span class="sxs-lookup"><span data-stu-id="ffd53-114">You can implement this via the sign-in action, which typically logs in the user via an OAuth flow.</span></span>

<span data-ttu-id="ffd53-115">Ce flux fonctionne mieux si votre fournisseur d’identité implémente le protocole OAuth 2.0.</span><span class="sxs-lookup"><span data-stu-id="ffd53-115">This flow works best if your identity provider implements the OAuth 2.0 protocol.</span></span> <span data-ttu-id="ffd53-116">Vous pouvez ensuite associer l Teams’utilisateur principal aux informations d’identification de l’utilisateur à partir de votre propre service d’identité.</span><span class="sxs-lookup"><span data-stu-id="ffd53-116">You can then associate the Teams user ID with the user’s credentials from your own identity service.</span></span>

   ![Association d’identités](~/assets/images/bots/associating_contexts.png)

## <a name="constructing-deep-links-to-tabs-in-messages-from-your-bot"></a><span data-ttu-id="ffd53-118">Construction de liens profonds vers des onglets dans les messages à partir de votre bot</span><span class="sxs-lookup"><span data-stu-id="ffd53-118">Constructing deep links to tabs in messages from your bot</span></span>

<span data-ttu-id="ffd53-119">Vous pouvez utiliser des onglets pour afficher plus de contenu qu’il n’est possible d’y intégrer dans une carte, ou fournir un moyen d’effectuer des tâches complexes de remplissage de formulaire à l’aide de la zone de dessin de l’onglet.</span><span class="sxs-lookup"><span data-stu-id="ffd53-119">You may want to use tabs to show more content than can fit inside of a card, or provide a way to complete complex form-filling tasks using the tab canvas.</span></span> <span data-ttu-id="ffd53-120">Par exemple, pensez à naviguer l’utilisateur vers l’onglet lorsqu’il clique sur la carte à partir de votre bot.</span><span class="sxs-lookup"><span data-stu-id="ffd53-120">For example, consider navigating the user to the tab when he or she clicks on the card from your bot.</span></span> <span data-ttu-id="ffd53-121">Pour ce faire, vous devez encoder le message de votre bot pour inclure une [URL](~/concepts/build-and-test/deep-links.md) de lien profond, soit par le biais du code, soit comme cible de l’action openUrl.</span><span class="sxs-lookup"><span data-stu-id="ffd53-121">For this to happen, you’ll need to encode your bot’s message to include a [deep link](~/concepts/build-and-test/deep-links.md) URL, either through markup or as the target of the openUrl action.</span></span>

<span data-ttu-id="ffd53-122">Les liens profonds reposent sur un entityId, qui est une valeur opaque qui matric une entité unique dans votre système.</span><span class="sxs-lookup"><span data-stu-id="ffd53-122">Deep links rely on an entityId, which is an opaque value that maps to a unique entity in your system.</span></span> <span data-ttu-id="ffd53-123">Lorsque l’onglet est créé, vous stockez dans l’idéal un état simple, par exemple, un indicateur sur votre système arrière indiquant que l’onglet a été créé dans le canal.</span><span class="sxs-lookup"><span data-stu-id="ffd53-123">When the tab is created, you ideally store some simple state, For example, flag on your backend indicating the tab has been created in the channel.</span></span> <span data-ttu-id="ffd53-124">Lorsque votre bot construit un message, il peut cibler l’entityId associé à cet onglet.</span><span class="sxs-lookup"><span data-stu-id="ffd53-124">When your bot constructs a message, it can target the entityId associated with that tab.</span></span>

> [!NOTE]
> <span data-ttu-id="ffd53-125">dans les conversations personnelles, étant donné que les onglets sont « statiques » et installés avec l’application, vous pouvez toujours supposer leur existence et construire des liens profonds en conséquence.</span><span class="sxs-lookup"><span data-stu-id="ffd53-125">in personal chats, because tabs are “static” and installed with the app, you can always assume their existence and thus construct deep links accordingly.</span></span>

## <a name="sending-notifications-for-tab-updates"></a><span data-ttu-id="ffd53-126">Envoi de notifications pour les mises à jour d’onglets</span><span class="sxs-lookup"><span data-stu-id="ffd53-126">Sending notifications for tab updates</span></span>

<span data-ttu-id="ffd53-127">Il est souvent possible d’avertir l’utilisateur final chaque fois qu’une mise à jour ou une action de l’utilisateur se produit dans un onglet. Un exemple de scénario consiste à affecter une tâche ou un ticket à un membre de l’équipe, puis à avertir ce membre de l’équipe.</span><span class="sxs-lookup"><span data-stu-id="ffd53-127">Often you’ll want to notify the end user whenever an update or a user action occurs in a tab. An example scenario is assigning a task or ticket to a fellow team member and then notifying that team member.</span></span>

<span data-ttu-id="ffd53-128">Il existe deux façons d’atteindre ce scénario :</span><span class="sxs-lookup"><span data-stu-id="ffd53-128">There are two ways of achieving this scenario:</span></span>

1. <span data-ttu-id="ffd53-129">Si vous souhaitez avertir un canal entier, votre bot peut publier de manière asynchrone un message sur le canal.</span><span class="sxs-lookup"><span data-stu-id="ffd53-129">If you wish to notify an entire channel your bot can asynchronously post a message to the channel.</span></span> <span data-ttu-id="ffd53-130">Il n’existe aucun moyen pour un bot de créer de manière proactive la conversation d’onglet si elle n’a pas été créée avec l’onglet.</span><span class="sxs-lookup"><span data-stu-id="ffd53-130">There is no way for a bot to proactively create the tab conversation if it wasn't created with the tab.</span></span>

2. <span data-ttu-id="ffd53-131">Si vous souhaitez uniquement avertir le destinataire ou les parties concernées impliquées dans l’action, votre bot peut envoyer un message de conversation personnelle à l’utilisateur.</span><span class="sxs-lookup"><span data-stu-id="ffd53-131">If you wish to only notify the recipient or interested parties involved with the action, your bot can send a personal chat message to the user.</span></span> <span data-ttu-id="ffd53-132">Vous devez d’abord vérifier si une conversation personnelle existe entre votre bot et l’utilisateur.</span><span class="sxs-lookup"><span data-stu-id="ffd53-132">You should first check to see if a personal conversation between your bot and the user exists.</span></span> <span data-ttu-id="ffd53-133">Si ce n’est pas le cas, vous `CreateConversation` pouvez appeler pour lancer la conversation personnelle.</span><span class="sxs-lookup"><span data-stu-id="ffd53-133">If not, you can call `CreateConversation` to initiate the personal chat.</span></span>

<span data-ttu-id="ffd53-134">Dans les deux cas, utilisez judicieusement les notifications d’événement et ne mettez jamais l’utilisateur en courrier indésirable avec des mises à jour inutiles.</span><span class="sxs-lookup"><span data-stu-id="ffd53-134">In both cases, use event notifications wisely and never spam the user with unnecessary updates.</span></span>
